{
  "hash": "3d2cfd9cc532a6a065b7c940981a99cf",
  "result": {
    "engine": "knitr",
    "markdown": "# interRAI Codebook {-}\n\n# Pulling interRAI Data for BI Dashboard\n\nThis chapter was compiled by the Office of System Performance at Compass / Boussole / Akii-Izhinoogan to assist organizations who use the interRAI ChYMH suite of assesssment tools in analyzing clinical data in the free open source data analysis language R. This code was adapted from that provided by interRAI on the interRAI repository in SAS. This based on interRAI Algorithms V1.35. See individual CAPs and Scales for version number and update dates.\n\n::: Lightbulb\nAll scale items are copyrighted material of [InterRAI](https://interrai.org/about-interrai/#!/licensing). For more information please follow the [link](https://interrai.org/about-interrai/#!/licensing).\n:::\n\n\n\n\n\n\n\n\n\n## Preparing Data\n\n### Loading Codebooks\n\nThe following codebooks include information specific to variables necessary to run the interRAI calculations. Have a look at them to check out what they're all about.\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nSAS_interRAI_Code_Info <- read_excel(\"Codebooks/SAS interRAI Code Info.xlsx\")\n\ninterRAI_Code_Info <- read_excel(\"Codebooks/interRAI Codebook.xlsx\")\n\nvarsummary <- read_excel(\"Codebooks/Compass interRAI Codebook.xlsx\", \n    sheet = \"iCodes\")[,c(1,3,9)]\n\nscalesummary <- read_excel(\"Codebooks/Compass interRAI Codebook.xlsx\", \n    sheet = \"Final Calculated\")[,c(1,2,3,4,6)]\n\n# The code that follows this line is idiosyncratic to Compass's system, however I've left the code in in case you have a similar situation where you need to normalize coding from an old system to match up with a newer system. \n\nCompass_interRAI_Codebook <- read_excel(\"Codebooks/Compass interRAI Codebook.xlsx\", \n    sheet = \"iCodes\")\n```\n:::\n\n\n\n\n### Pulling and Tidying Data\n\nThe following code should be updated to reflect your organizations file/directory structure.\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n# Grab EMHware codebook\n\nEMHware_CodeBook <- read_excel(\"M:\\\\DATA & REPORTS\\\\Clinical & Client Services\\\\Clinical Data\\\\interRAI\\\\interRAI Matching Codebook.xlsx\", sheet = \"EMHware Variables\")\n\n# Grab new ChYMH data \n\nChYMH_folder <- \"M:/DATA & REPORTS/Clinical & Client Services/Clinical Data/interRAI/EMHware interRAI ChYMH Export\"\n\n# merge all of the interRAI dfs\n\nallfiles <- list.files(path=ChYMH_folder, pattern=\"*.csv\", full.names=TRUE)\n\nChYMH_export <- plyr::ldply(allfiles, read_csv, show_col_types = FALSE)\n\nChYMH_1 <- filter(ChYMH_export,!is.na(program_name)) # remove rows w/NAs in program_name\n\nChYMH_1 <- subset(ChYMH_1, !grepl(\"default\", program_name)) # remove rows w/default as program\n```\n:::\n\n\n\n\n### Data formatting\n\nAmend the following code according to your own data structure and cleaning needs.\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n# auto format column types\n\nChYMH_2 <- type_convert(ChYMH_1)\n\nChYMH_3 <- transform(ChYMH_2,cihiU3=as.numeric(cihiU3),client_id=as.character(client_id),iA5d=as.character(iA5d))\n\n# recode assessment type\n\nChYMH_3$iA8 <- gsub(\"1\", \"Initial\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"6First\", \"Initial\", ChYMH_3$iA8) \nChYMH_3$iA8 <- gsub(\"5First\", \"Initial\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"5\", \"Discharge\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"2\", \"Reassessment\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"6\", \"Discharge\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"4\", \"Reassessment\", ChYMH_3$iA8)\n\nChYMH_4 <- subset(ChYMH_3, !grepl(\"default\", program_name))\nChYMH_4$EMHID <- ChYMH_4$client_id\n\ndf <- ChYMH_4 %>%\n  dplyr::rename(\"Tool\" = \"type_cd\",\n         \"ref\"=\"iA9\", # date of assessment\n         \"ED_Screen\"=\"iW29\",\n         \"ID_Screen\"=\"iA47\",\n         \"ComorbidMedical_Screen\" = \"iA48\")\n```\n:::\n\n\n\n\n### Dummy Columns\n\nThese calculated columns are used in PowerBI queries to filter scores.\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n##------------------------------------------------------------------------\n##  1. Type of assessment (Initial, Reassessment, Monitoring, Discharge)   \n##------------------------------------------------------------------------\n\ndf <- df %>% mutate(Type = if_else(Tool ==\"chymh_monitoring_op\", \"Monitoring Assessment\",\n                                                       if_else(is.na(iA8), oA8, iA8))) \n\ndf$Type <- recode(df$Type,`S-INTL`=\"Initial\",\n          `2`= \"Reassessment\",\n        `S-SQNT`=\"Reassessment\",\n         `Readmission Initial`=\"Initial\")\n\n##---------------------------------\n##  2. Last assessment completed      \n##---------------------------------\n\ndf <- mutate(df, compl = if_else(is.na(iU2), iT1, iU2))\n\n##---------------------\n##  3. Calculate Age   \n##---------------------\n\n# calculate age in years at reference date (df$ref)\n\ndf$Age <- as.integer((df$ref - as.Date(paste0(df$iA3, \"-01-01\")))/365.25)\n\n##------------------------------------------\n##  4. Dummy FirstChYMH and last ChYMH  \n##------------------------------------------\n\ndf <- df %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(if_else(Tool != \"rscr\", ref, as.Date(Inf)), na.rm = FALSE),\n         MaxRef = max(if_else(Tool != \"rscr\", ref, as.Date(-Inf)), na.rm = FALSE),\n         FirstChYMH = as.integer(ref == MinRef),\n         LastChYMH = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n##--------------------------------------------\n##  5. Dummy FirstAx and last AX variable  \n##--------------------------------------------\n\ndf <- df %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(ref, na.rm = FALSE),\n         MaxRef = max(ref, na.rm = FALSE),\n         FirstAx = as.integer(ref == MinRef),\n         LastAx = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n##-----------------------------\n##  6. First & Last  Screener  \n##-----------------------------\n \ndf <- df %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(if_else(Tool == \"rscr\", ref, as.Date(Inf)), na.rm = FALSE),\n         MaxRef = max(if_else(Tool == \"rscr\", ref, as.Date(-Inf)), na.rm = FALSE),\n         FirstScreener = as.integer(ref == MinRef),\n         LastScreener = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n#test <- df %>% select(EMHID, Tool, ref, FirstChYMH, LastChYMH, FirstAx, LastAx, FirstScreener, LastScreener)\n```\n:::\n\n\n\n\n### Recode Variables {#vallabels}\n\nThis code will convert all multiple choice responses to their numerical equivalent (for scoring).\n\n\n\n\n::: {.cell}\n\n```{.r .fold-hide .cell-code}\n#Check value labels and variables with frq(df$__)\n\n# convert all true and false to 0 and 1\n# use the code below to subset all columns that contain the string (to double check not removing important text)\n#sub <- ChYMH_export[grep(\"true\", ChYMH_export)] \n\ndf[df == 'false'] <- 0\ndf[df == 'true'] <- 1\n\ndf[df == 'FALSE'] <- 0\ndf[df == 'TRUE'] <- 1\n\ndf <- df %>% set_labels(iE15a, iE15d, iE15e, iE6, iX16c, iX16a, iX1c, iX2a, iX2b,\n                        iX2c, iY1al, iY1am, iY1an, iY1ao, iY1aq, iY1au, iY1av,\n                        iY1ar, iY1at, iY1ak, iY1aj, iY1ap, iY1aa, iX18, iW3a, \n                        iW3b, iW3c, iW3e, iW3f,\n                        labels = c(\"Never\"= 0, \"More than 1 year ago\" = 1, \n                        \"31 days - 1 year ago\" = 2,\"8-30 days ago\" = 3,\n                        \"4-7 days ago\" = 4 ,\"In the last 3 days\" = 5))\n\ndf <- df %>% set_labels(iC7, labels = c(\"Adapts without difficulty\" = 0, \n                        \"Adapts with some difficulty\" = 1,\"Has difficulty adapting\n                        to even minor change\" = 2))\n\ndf <- df %>% set_labels(iJ3, labels = c(\"Absence of symptom\" = 0, \n                        \"Absent at rest, but present when performed moderate \n                        activities\" = 1, \"Absent at rest, but present when performed\n                        normal day-to-day acitivties\" = 2,\"Present at rest\" = 3))\n\ndf <- df %>% set_labels(iD3a, labels = c(\"Adequate\" = 0, \"Minimal difficulty\" = 1,\n                        \"Moderate difficulty\" = 2,\"Severe difficulty\" = 3, \"No \n                        hearing\" = 4))\n\ndf <- df %>% set_labels(iD4a, labels = c(\"Adequate\" = 0, \"Minimal difficulty\" = 1,\n                        \"Moderate difficulty\" = 2,\"Severe difficulty\" = 3, \"No \n                        vision\" = 4))\n\ndf <- df %>% set_labels(iBB14a, labels = c(\"Exceptionally higher ability\" = 0,\n                        \"Typical ability\" = 1, \"Exceptionally lower ability\" = 2,\n                        \"Minimal or no evidence of ability\" = 3, \n                        \"Not applicable\" = 8))\n\ndf <- df %>% set_labels(iE7, labels = c(\"Full\" = 0, \"Limited\" = 1, \"None\" = 2))\n\ndf <- df %>% set_labels(iG1aa, iG1ab, iG1ba, iG1bb, iG1ca, iG1cb, iG1da, iG1db, \n                        iG1ea, iG1eb, iG1fa, iG1fb, iG1ga, iG1gb, iG1ha, iG1hb, \n                        iG1na, iG1nb, iG1oa, iG1ob, iG1pa, iG1pb, iG2a, iG2b, \n                        iG2c, iG2d, iG2j, labels = c(\"Independent\" = 0,\n                        \"Set-up help only\" = 1, \"Supervision\" = 2, \n                        \"Limited assistance\" = 3, \"Extensive assistance\" = 4,\n                        \"Maximal assistance\" = 5, \"Total dependence\" = 6,\n                        \"Activity did not occur\" = 8))\n\ndf <- df %>% set_labels(iC1d, labels = c(\"Independent\" = 0, \n                       \"Modified independence\" = 1, \"Minimally independent\" = 2,\n                       \"Moderately dependent\" = 3, \"Severely dependent\" = 4, \n                       \"No discernible consciousness, coma\" = 5))\n\ndf <- df %>% set_labels(RS_I1d, RS_I1a, RS_I1b, labels = c(\"Minimal\" = 0,\n                        \"Mild\" = 1, \"Moderate\" = 2, \"Severe\" = 3, \n                        \"Very Severe\" = 4))\n\ndf <- df %>% set_labels(iP15a, iP15b, iP15c, iP15d, iP15e, iP15f, labels = c(\n                        \"Most of the time\" = 0, \"Occasionally\" = 1, \n                        \"Rarely or never\" = 2, \"No parent/ primary caregiver\" = 8))\n\ndf <- df %>% set_labels(iBB10, labels = c(\"No\" = 0, \"Child/youth only\" = 1,\n                        \"Parent/primary caregiver only\" = 2, \"Both\" = 3))\n\ndf <- df %>% set_labels(iB12, iB32a, iB32b, iB35, iB38a, iB38b, iE14d, iE18a, \n                        iE19a, iF13, iF15a, iF15c, iF15d, iF15e, iF15f, iF15g,\n                        iF8b, iJ10a, iK2i, iK2j, iK2k, iK8a, iK8b, iK8c, iM6, \n                        iP8, iQ4, iS11a, iS11b, iS11c, iS12, iW8, iX3, iY2a, \n                        iY2b, iY2c, iY2d, iZ12, RS_E3, RS_G3,iBB11a, iBB11b, \n                        iE14a, iE14b, iE14c, iF8a, iJ9a, iJ9b, iJ9c, iJ9d, iJ9e, \n                        iJ9f, iJ9g, iP24a, iP24b, iX1d, iX1e,\tRS_G6, \n                        labels = c(\"No\" = 0, \"Yes\" = 1))\n\ndf <- df %>% set_labels(iY1ab, labels = c(\"No\" = 0, \"Yes\" = 1, \"No attempt\" = 8))\n\ndf <- df %>% set_labels(iR16a, iR16b, labels = c(\"No\" = 0, \"Yes\" = 1, \"Refused\" = 2,\n                                                 \"Not needed\" = 8))\n\ndf <- df %>% set_labels(iBB5a, iBB5b, iBB5e, iBB5f, iP19b, iP19d, iP19e, iP19f, \n                        iP19h, iP16a, iP16b, iP19a, iP19c, iP19g, \n                        labels = c(\"No\" = 0, \"Yes\" = 1, \"Not applicable\" = 8))\n\ndf <- df %>% set_labels(iY8a, iY8b, iY9, labels = c(\"No\" = 0, \"Yes\" = 1, \n                                          \"Unknown or not applicable\" = 8))\n\ndf <- df %>% set_labels(iM12, labels = c(\"No\" = 0, \"Yes\" = 1, \"Not needed or no \n                                          parent/primary caregiver\" = 8))\n\ndf <- df %>% set_labels(iX4, labels = c(\"No\" = 0, \"Yes, but not exhibited in last 7\n                        days\" = 1, \"Yes, exhibited in last 7 days\" = 2))\n\ndf <- df %>% set_labels(iJ2dd, iJ2gg, iJ2k, iJ2ll, iJ2y, iJ2c, iJ2x, iJ2n,labels =\n                        c(\"Not present\" = 0,\"Present but not exhibited in last 3 \n                          days\" = 1, \"Exhibited on 1 of last 3 days\" = 2, \"Exhibited \n                          on 2 of last 3 days\" = 3, \"Exhibited daily in \n                          last 3 days\" = 4))\n\ndf <- df %>% set_labels(iE1aaa, iE1aaaa, iE1bbbb, iE1eee, iE1eeee, iE1fff, iE1ggg,\n                        iE1hhh, iE1iii, iE1kkk, iE1lll, iE1mmm, iE1nnn, iE1oo, \n                        iE1ooo, iE1pp, iE1ppp, iE1qq, iE1qqq, iE1rr, iE1rrr, iE1ss,\n                        iE1sss, iE1tt, iE1ttt, iE1uu, iE1vv, iE1ww, iE1xx, iE1yy,\n                        iE1yyy, iE1zzz, iE3aa, iE3l, iE3m, iE3n, iE3p, iE3q, iE3r,\n                        iE3s, iE3t, iE3w, cE3ab, cE3ac, iE1ccc, iE1ddd, iE1dddd, \n                        iE1jjj, iE1llll, iE1zz, iE3o, iE3y, iK21, \n                        labels = c(\"Not present\" = 0, \n                        \"Present but not exhibited in last 3 days\" = 1, \n                        \"Exhibited on 1-2 of last 3 days\" = 2, \n                        \"Exhibited daily in last 3 days, 1-2 episodes\" = 3, \n                        \"Exhibited daily in last 3 days, 3 or more episodes or \n                        continuously\" = 4))\n\ndf <- df %>% set_labels(iD1, labels = c(\"Understood\" = 0, \"Usually understood\" = 1, \n                        \"Often understood\" = 2, \"Sometimes understood\" = 3,\n                        \"Rarely or never understood\" = 4))\n\ndf <- df %>% set_labels(iD2, labels = c(\"Understands\" = 0, \"Usually understands\" = 1,\n                        \"Often understands\" = 2, \"Sometimes understands\" = 3,\n                        \"Rarely or never understands\" = 4))\n\ndf <- df %>% set_labels(iH1, labels = c(\"Continent—Complete control; DOES NOT USE \n                        any type of catheter or other urinary collection device\" = 0,\n                        \"Control with any catheter or ostomy over last 3 days\" = 1,\n                        \"Infrequently incontinent—Not incontinent over last 3 days, \n                        but does have incontinent episodes\" = 2, \"Occasionally\n                        incontinent—Less than daily\" = 3, \"Frequently incontinent—\n                        Daily, but some control present\" = 4, \"Incontinent—No control\n                        present\" = 5, \"Did not occur—No urine output from bladder in\n                        last 3 days\" = 8))\n\ndf <- df %>% set_labels(iH3, labels = c(\"Continent - Complete Control; DOES NOT\n                        USE any type of ostomy device\" = 0,\"Control with ostomy-\n                        Control with ostomy device over last 3 years\" = 1, \n                        \"Infrequently incontinent-Not incontinent over last 3 days, \n                        but does have incontinent episodes\" = 2, \"Occasionally\n                        incontinent-Less than daily\" = 3, \"Frequently \n                        incontinent-Daily, but some control present\" = 4,\n                        \"Incontinent-No control present\" = 5, \"Did not occur - \n                        No bowel movement in last 3 days\" = 8))\n\ndf <- df %>% set_labels(iC2a, iC2b, labels = c(\"Yes,memory okay\" = 0 ,\"Memory \n                                               problem\" = 1))\n\ndf <- df %>% set_labels(iC9a, iC9b, labels = c(\"Adequate or better\" = 0, \n                        \"Inadequate\" = 1, \"Minimal or no evidence thereof\" = 8))\n\ndf <- df %>% set_labels(iD28, iD29, labels = c(\"Adequate\" = 0, \"Minimal difficulty\"\n                        = 1, \"Moderate difficulty\" = 2,\"Severe difficulty\" = 3, \n                        \"No ability to move body (full paralysis)\" = 4))\n\ndf <- df %>% set_labels(iM3, labels = c(\"Always adherent\" = 0, \"Adherent 80% of \n                        the time or more\" = 1, \"Adherent less than 80% of the time,\n                        including failure to purchase prescribed medications\" = 2, \n                        \"No medications prescribed\" = 8))\n\ndf <- df %>% set_labels(iG2a, iG2b, iG2c, iG2d, iG2f, iG2h, iG2j, \n                  labels = c(\"Independent\" = 0, \"Independent, set-up only\"= 1, \n                             \"Supervision\" = 2, \"Limited assistance\"= 3, \n                             \"Extensive assistance\" = 4, \"Maximal assistance\" = 5, \n                             \"Total dependence\" = 6, \"Activity did not occur during \n                             entire period\"= 8))\n\ndf <- df %>% set_labels(iBB4b, labels = c(\"Never enrolled\" = 0, \"No, but previously\n                        enrolled\" = 1, \"Yes, part-time\" = 2, \"Yes, full-time\" = 3))\n\ndf <- df %>% set_labels(iS7b, iS7d, iY1b, labels = c(\"No or not applicable\" = 0, \n                        \"Yes\" = 1, \"Could not (would not) respond)\" = 8))\n\ndf <- df %>% set_labels(iJ5a, labels = c(\"No pain\" = 0, \"Present but not exhibited\n                        in last 3 days\" = 1, \"Exhibited on 1-2 of last 3 days\" = 2, \n                        \"Exhibited daily in last 3 days\" = 3))\n\ndf <- df %>% set_labels(iW20a, labels = c(\"No\" = 0, \"Not in the last 3 days, but\n                        smokes occassionally\" = 1, \"Not in the last 3 days, but is \n                        a usually daily smoker\" = 2, \"Yes\" = 3))\n\ndf <- df %>% set_labels(iW20b, labels = c(\"No\" = 0, \"Not in the last 3 days, but\n                        uses occassionally\" = 1, \"Not in the last 3 days, but is a \n                        usually daily user\" = 2, \"Yes\" = 3))\n\ndf <- df %>% set_labels(iR16a, iR16b, labels = c(\"No\" = 0, \"Yes\" = 1, \"Refused\" = 2,\n                                                 \"Not needed\" = 8))\n\ndf <- df %>% set_labels(iM4, labels = c(\"No, or no medications\" = 0, \"Yes\" = 1))\n\ndf <- df %>% set_labels(iM5, labels = c(\"No, or no psychotropic medications\" = 0,\n                                        \"Yes\" = 1))\n\ndf <- df %>% set_labels(iB15, labels = c(\"None\" = 0, \"Borderline\" = 1, \"Mild\" = 2,\n                        \"Moderate\" = 3, \"Severe\" = 4, \"Profound\" = 5, \"Not \n                        documented\" = 8))\n\ndf <- df %>% set_labels(iB34a, iB34b, iB34c, labels = c(\"None\" = 0, \"0-4 years\" = 1, \n                        \"5-11 years\" = 2,\"12-18 years\" = 3))\n\ndf <- df %>% set_labels(iW2, labels = c(\"None\" = 0, \"1 day\" = 1, \"2-8 days\" = 2,\n                       \"9 or more days, but not daily\" = 3, \"Daily\" = 4))\n\ndf <- df %>% set_labels(iB33, labels = c(\"None\" = 0, \"1 foster family\" = 1, \n                                         \"Multiple foster families\" = 2))\n\ndf <- df %>% set_labels(iV1, labels = c(\"None\" = 0, \"1-22\" = 1, \"3 or more\" = 2))\n\ndf <- df %>% set_labels(iW10, labels = c(\"None\" = 0, \"1-22\" = 1, \"3-56\" = 2, \n                                         \"6 or more\" = 3))\n\ndf <- df %>% set_labels(iG6a, labels = c(\"None\" = 0, \"Less than 1 hour\" = 1, \n                                         \"1-2 hours\" = 2, \"3-4 hours\" = 3,\n                                         \"More than 4 hours\" = 4))\n\ndf <- df %>% set_labels(iW21, labels = c(\"None\" = 0, \"Minimal\" = 1, \"Moderate\" = 2,\n                                         \"Severe\" = 3))\n\ndf <- df %>% set_labels(iJ4, labels = c(\"None\" = 0, \"Minimal\" = 1, \"Moderate\" = 2,\n                  \"Severe\" = 3, \"Unable to commence any normal day-to-day \n                  activities\" = 4))\n\ndf <- df %>% set_labels(iK3, labels = c(\"Normal\" = 0, \"Modified independent\" = 1, \n                    \"Requires diet modification to swallow solid food\" = 2, \n                    \"Requires modification to swallow liquids\" = 3, \"Can swallow \n                    only pureed solids and thickened liquids\" = 4, \"Combined oral\n                    and parenteral or tube feeding\" = 5, \"Nasogastric tube \n                    feeding\" = 6, \"Abdominal tube feeding\" = 7, \"Parenteral \n                    feeding only\" = 8, \"Activity did not occur\" = 9))\n\ndf <- df %>% set_labels(iP18a, iP18b, iP18c, iP18e, labels = c(\"Not needed\" = 0,\n                      \"Consistently available\" = 1, \"Occasionally available\" = 2,\n                      \"Not available\" = 3))\n\ndf <- df %>% set_labels(iF5a, iF5b, iF5e, iF5f, labels = c(\"Not present\" = 0, \n                      \"Present but not exhibited in the last 3 days\" = 1, \n                      \"Exhibited on 1-2 of last 3 days\" = 2, \"Exhibited daily\n                      in last 3 days\" = 3))\n                      \ndf <- df %>% set_labels(iAA1a, iAA1c, iAA1f, iN6c, labels = c(\"Not used\" = 0, \"Used\n                      less than daily\" = 1, \"Used daily-nights only\" = 2, \n                      \"Used daily-days only\" = 3, \"Used night and days, but not\n                      constant\" = 4))\n\ndf <- df %>% set_labels(iE5, labels = c(\"30 days or less(from this facility)\" = 1,\n                      \"30 days or less(from another facility)\" = 2, \"31 days -\n                      90 days\" = 3, \"91 days - 1 year\" = 4, \"More than 1 year\" = 5, \n                      \"Not applicable(no prior admission\" = 6))\n\ndf <- df %>% set_labels(iA12e, labels = c(\"Alone\" = 1, \"With parent(s) or primary\n                      caregiver(s)\" = 2, \"With sibling(s), no parent(s)/primary\n                      caregiver(s)\" = 3, \"With other relative(s)\" = 4, \"With \n                      foster family\" = 5, \"With non-relative(s), excluding foster\n                      family\" = 6 ))\n\ndf <- df %>% set_labels(iBB2, labels = c(\"Competitive employment\" = 1, \"Supported\n                      employment\" = 2, \"Vocational rehabilitation\" = 3, \"Not \n                      applicable\" = 8))\n\ndf <- df %>% set_labels(iR9, labels = c(\"Deterioration\" = 1, \"No change\" = 2, \n                      \"Improvement\" = 3, \"Marked improvement\" = 4))\n\ndf <- df %>% set_labels(iB31, labels = c(\"Never married\"  = 1, \"Married\" = 2, \n                      \"Partner/Significant other\" = 3, \"Widowed\" = 4, \"Separated\" = 5,\n                      \"Divorced\" = 6, \"Marital status unknown\" = 8))\n\ndf <- df %>% set_labels(iA11b, labels = c(\"Private home/apartment/rented room\" = 1, \n                      \"Board and care\" = 2, \"Assisted living or semi-independent\n                      living\" = 3, \"Mental health residence (e.g., psychiatric \n                      home)\" = 4, \"Group home for persons with a physical \n                      disability\" = 5, \" Setting for persons with intellectual\n                      disabilities\" = 6, \"Psychiatric hospital or unit\" = 7, \n                      \"Homeless (with or without shelter)\" = 8, \"Residential\n                      care facility (e.g., long-term care home, nursing home\" = 9,\n                      \"Rehabilitation hospital/unit\" = 10, \"Hospice facility/\n                      palliative care unit\" = 11, \"Acute care hospital\" = 12, \n                      \"Continuing care hospital/unit\" = 13, \"Residential treatment\n                      facility\" = 14, \"Other\" = 15))\n\ndf <- df %>% set_labels(iM7, labels = c(\"Actual number of acute control medications\n                      as per definition in the last 3 days\" > 0))\n\ndf <- type_convert(df) # auto-format variable columns\n```\n:::\n\n\n\n\n# Caps and Scales Summary Tables\n\nThe following tables include all scales, their coded name and description as well as possible values and intermediary variables (if necessary) needed to calculate their respective scores. Use the search function to look up a specific scale or CAP quickly.\n\n## Scales Summary Table\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-4b8d8ac1fc86d27e4f8d\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4b8d8ac1fc86d27e4f8d\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\"],[\"sCYABS\",\"sCYPS\",\"sCYPSS\",\"sEXTERN\",\"sCYDSI\",\"sCYMHANHEDO\",\"sCYDISTRACT\",\"sCYSLEEP\",\"DABSS\",\"sCYDABS\",\"sMANIA_OLD\",\"sCYANXS\",\"sCYPEER\",\"sANXIETY_OLD\",\"sDEPRESSION_OLD\",\"INTS\",\"sINTERN\",\"caregiverdistress\",\"sASSC\",\"sCYRIChY\",\"cognitivefunction\",\"sCYFAMILY\",\"sCYRHO\",\"sCYSOS\",\"sCYRelStren\",\"sCHAMHPS\",\"sCYRISSK\",\"sCYRIO\",\"ADLlesscomplex\",\"sCYYIADLC\",\"sCYYIADLP\",\"EXTS\",\"sCYADL\",\"sCOMM\",\"sCYSchDis\",\"sCYMHSDeS\",\"ADLcomplex\",\"iCCareD\",\"ALEIC\"],[\"Aggressive Behaviour Scale\",\"Parenting Strengths Scale\",\"Positive Symptoms Scale\",\"Externalizing Subscale\",\"Depressive Severity Index\",\"Anhedonia Scale (Social Disengagement)\",\"Distractibility/ Hyperactivity Scale\",\"Sleep Scale\",\"Disruptive and Aggressive Behaviour Scale - Short Version\",\"Disruptive and Aggressive Behaviour Scale\",\"Mania Old Scale\",\"Anxiety Scale\",\"Peer Relationship Scale\",\"Anxiety Old Scale\",\"Depression Old Scale\",\"Internalizing Subscale - Short Version\",\"Internalizing Subscale\",\"Caregiver Distress Scale\",\"Autism Spectrum Symtoms Checklist\",\"Resource Intensity Child Youth Algorithm\",\"Cognitive Functioning Scale\",\"Family Functioning Scale\",\"Risk of harm to Others Scale\",\"Severity of Self-Harm Scale\",\"Relational Strengths Scale\",\"Children's Algorithm For MH and Psychiatric Services (chAMhps)\",\"Risk of Suicide and Self-Harm in Kids\",\"Risk of Injury to Others\",\"Activities of Daily Living - Less Complex\",\"Instrument Activities of Daily Living Capacity Scale - Youth\",\"Instrument Activities of Daily Living Performance Scale - Youth\",\"Externalizing Scale - Short Version\",\"Activities of Daily Living Scale\",\"Communication Scale\",\"School Disruption Scale\",\"School Disengagement Scale\",\"Activities of Daily Living - More Complex\",\"interRAI ChYMH Caregiver Distress Algorithm\",\"Adverse Life Events Inventory for Children\"],[\"Measures the frequency and severity of aggressive behaviour\",\"Measures the degree of strengths that the parent is demonstrating in parenting activities\",\"Measures the frequency of positive symptoms of psychosis*\",\"Identifies children and youth with externalizing problem.\",\"Measures the frequency of  indicators of depression\",\"Measures the frequency of symptoms related to anhedonia\",\"Measures the frequency of hyperactivity and distractibility\",\"Measures the frequency of symptoms related to sleep difficulties\",\"Measures the frequency and severity of distruptive and aggressive behaviour short version.\",\"Measures the frequency and severity of distruptive and aggressive behaviour.\",null,\"Measures the frequency of symptoms of anxiety\",\"Measures the level of conflict with friends and peers\",null,null,\"Identifies children and youth with internalizing problem short version.\",\"Identifies children and youth with internalizing problem.\",\"Measures the degree and diversity of caregiver wellbeing factors\",\"Predicts risk for autism.\",\"A resource-intensity (case-mix) measurement system designed for use with children and youth accessing services.\",\"Assesses cognitive functioning by determining the presence of cognitive impairment.\",\"Measures the level of functioning present in the family\",\"Reflects risk of harm to others*\",\"Reflects risk of harm to self\",\"Measures the strength factors present in terms of how well the child/youth relates to others\",\"Decision support tool that is used to determine the need and urgency for a comprehensive face-to-face mental health assessment or service. (AGES 4-18)\",\"Classifies persons by risk of self injury and suicide.\",\"Classifies persons by risk of injury to others.\",\"Measures performance of \\\"less complex\\\" activities of daily living including locomotion, eating and toileting.\",\"Measures youth's higher-level functioning, reflected by others' perceptions of youth's ability to carry out IADLs (AGES 12-18)\",\"Measures youth's higher-level functioning, reflected by others' perceptions of youth's performance in carrying out IADLs (AGES 12-18)\",\"Identifies children and youth with externalizing problem short version.\",\"Measures the functional performance of ability to  carry out activities of daily living\",\"Measures the child/youth's level of communication\",\"Measures the risk of disruption in school\",\"Measures the intensity of school disengagement.\",\"Measures performance of \\\"more complex\\\" activities of daily living including dressing (upper and lower body), personal hygiene and bathing.\",\"Predicts new or ongoing caregiver distress and used by clinicians to inform their selection of supports and services for families.\",\"Identifies adveristy exposure rates in children and youth at clinic intake.\"],[\"0-12\",\"0-12\",\"0-12\",\"0-12\",\"0-15\",\"0-16\",\"0-16\",\"0-16\",\"0-16\",\"0-20\",\"0-22\",\"0-28\",\"0-3\",\"0-32\",\"0-36\",\"0-44\",\"0-48\",\"0-5\",\"0-5\",\"0-5\",\"0-5\",\"0-6\",\"0-6\",\"0-6\",\"0-6\",\"0-6\",\"0-6\",\"0-6\",\"0-6\",\"0-66\",\"0-66\",\"0-7\",\"0-8\",\"0-8\",\"0-8\",\"0-8\",\"0-8\",\"1-5\",\"0-16\"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,\"xsdsi\\r\\nxsSOS\\r\\nxparent\\r\\nxabuse\\r\\nxmedsym\\r\\nxsANXIETY\\r\\nxsFAMILY\\r\\nxcSSH\\r\\nxsRHO\\r\\nxcHARMOTH\\r\\n\\r\\n\\r\\n\",null,null,\"xrho1\\r\\nxrho2\",\"xcsp1\\r\\nxcsp2\",null,null,\"xdsi\",\"xrio\\r\\nxbeh\",null,null,null,null,null,null,null,null,null,\"ProactiveItem\\r\\ndevHsubst_Issues\\r\\nfamilyfunction\",null]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Coded_Name<\\/th>\\n      <th>Name<\\/th>\\n      <th>Description<\\/th>\\n      <th>Possible Values<\\/th>\\n      <th>Intermediary Variables<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-center\",\"targets\":4},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"Coded_Name\",\"targets\":1},{\"name\":\"Name\",\"targets\":2},{\"name\":\"Description\",\"targets\":3},{\"name\":\"Possible Values\",\"targets\":4},{\"name\":\"Intermediary Variables\",\"targets\":5}],\"pageLength\":5,\"lengthMenu\":[5,10,15,20],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n## CAPS Summary Table\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-f720790a137777e34ee3\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f720790a137777e34ee3\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"caption\":\"<caption>CAP name, description, accepted values and \\n                                              intermediary variables.<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\"],[\"cCYMHATTACH\",\"cCYMHCAFFE\",\"cCYMHCAREDIST\",\"cCYMHCOMM\",\"cCYMHCRIM\",\"cCYMHGAMB\",\"cCYMHINFSUPP\",\"cCYMHMEDADH\",\"cCYMHMEDREV\",\"cCYMHPARENT\",\"cCYMHPA\",\"cCYMHREAD\",\"cCYMHSEX\",\"cCYMHSLEEP\",\"cCYMHSTR\",\"cCYMHSUBUSE\",\"cCYMHSSDIS\",\"cCYMHTRANS\",\"cCYDDCONTI\",\"cCYDDEDU\",\"cCYDDINJUR\",\"cCYDDEAT\",\"cCYMHVG\",\"cCYMHFIRE\",\"cCYMHEDU\",\"cCYMHHARMOTH\",\"cCYMHSSH\",\"cCYDDSSH\",\"cCYMHWTMGT\",\"cCYMHLIFSKIL\",\"cCYDDAM\",\"cCYDDNUTRI\",\"cCYMHCTRLINT\",\"cCYDDSOCREL\",\"cCYMHIPCON\",\"cCYMHSOCREL\",\"cCYMHTOBAC\",\"cCYMHTRAUMA\",\"cCYDDPLAY\"],[\"CAP - Attachment\",\"CAP - Caffeine Use\",\"CAP - Caregiver Distress\",\"CAP - Communication\",\"CAP - Criminality Prevention\",\"CAP - Gambling\",\"CAP - Informal Support\",\"CAP - Medication Adherence\",\"CAP - Medication Review\",\"CAP - Parenting\",\"CAP - Physical Activity\",\"CAP - Readmission\",\"CAP - Sexual Behaviour\",\"CAP - Sleep Disturbance\",\"CAP - Strengths\",\"CAP - Substance Use\",\"CAP - Support Systems for Discharge\",\"CAP - Transitions\",\"CAP - Continence\",\"CAP - Education Support\",\"CAP - Injurious Behaviour\",\"CAP - Problematic Eating Behaviour\",\"CAP - Video Gaming\",\"CAP - Hazardous Fire Involvement\",\"CAP - Education\",\"CAP - Harm to Others\",\"CAP - Suicidality and Purposeful Self-Harm\",\"CAP - Suicidality and Purposeful Self-Harm\",\"CAP - Weight Management\",\"CAP - Life Skills\",\"CAP - Accessibility &amp; Mobility\",\"CAP - Modified Nutrition Intake\",\"CAP - Control Interventions\",\"CAP - Social Relations\",\"CAP - Interpersonal Conflict\",\"CAP - Social and Peer Relationships\",\"CAP - Tobacco and Nicotine Use\",\"CAP - Traumatic Life Events\",\"CAP - Play and Leisure\"],[\"Identifies children (under age 12 years) with a history of inconsistent or unreliable care and difficulty seeking comfort.\",\"Identifies children and youth who have recently used caffeine excessively.\",\"Identifies children and youth with caregivers who have indicators of severe stress that may interfere with caregiving capacity.\",\"Indentifies children and youth with considerable difficulties understanding others and/or expressing themselves.\",\"Identifies children and youth at risk for involvement in illegal activites.\",\"Offers guidelines to reduce problematic gambling anf addresses its impact in the young persons life.  Requires the completion of the adolescent supplement*\",\"Indentifies children and youth and their families that lack support from informal sources.\",\"Identifies children and youth who are potentially or actually non-adherent to prescribes medication.\",\"Identifies children and youth requiring a medication review due to experience of potential side effects or mental health deterioration while on medication.\",\"Provides guidelines to help caregivers effectively manage the behavioural symptoms of children and youth with mental health conditions.\",\"Identifies children and youth who have not engaged in an appropriate level of physical activity, and suggests interventions to increase physical activity to recommended levels with consideration for medical safety and social supports.\",\"Identifies children and youth at risk for psychiatric readmission. Requires the completion of the adolescent supplement*\",\"Provides guidelines to eliminate problematic and harmful sexual behaviours that are inappropriate for the young person's age, developmental level, or culture, while building on their strengths.\",\"Identifies children and youth with symptoms of sleep disturbance, bedtime resistance, or daytime fatigue.\",null,\"Identifies children and youth with alcohol or illicit drug use, or misue of prescription or OTC medication and offers guidelines for intervention.  Requires the completion of the adolescent supplement*\",\"Identifies children and youth who are at risk for difficulties post-discharge from inpatient or residential mental health settings.\",\"Identifies children and youth who require transition planning between life stages or settings.\",\"Identifies children and youth with developmental difficulties who are incontinent.\",\"Identifies children and youth with developmental difficulties who are experiencing difficulty reaching their academic potential.\",\"Identifies children and youth with developmental difficulties with aggressive or self-injurious behaviour.\",\"Identifies children and youth with developmental disabilities with problematic eating behaviour.\",\"The ChYMH Video Gaming CAP indentifies children and youth who engage in excessive video gaming.\",\"Provides risk minimization guidelines for youbg persons who engage in fire related behaviours.\",\"Identifies children and youth at risk for dropping out of school and those in need of support to return to school to gain employment.\",\"Identifies children and youth at risk to harm. Requires the completion of the adolescent supplement*\",\"Outlines clinical considerations for children and youth at risk of suicide or purposeful self-harm.\",\"Outlines clinical considerations for children and youth with developmental disabilities at risk of suicide or purposeful self-harm.\",\"Provides guidelines for assessment and intervention for children and youth with weight management issues and problematic eating behaviours.\",\"Promotes age- and developmentally- appropriate supports for children and youth to learn and practice life skills.\",\"Identifies children and youth with developmental difficulties with limited mobility requiring physical assistance.\",\"Identifies children and youth with developmental disabilities who require modified tubes or tube feeding.\",\"Provides guidance to minimize the use of control interventions for childrena and youth in psychiatric emergency and other circumstances.\",\"The CYDD Social Relations CAP identifies children and youth with developmental disabilities who have unsettled, unengaged, or difficult social relations.\",\"Identifies children and youth with problematic interpersonal relationships.\",\"Identifies children and youth at risk for social isolation or being involved in maladaptive or antisocial peer interactions.\",\"Identifies occasional and daily smoking and smokeless tobacco use by children and youth.\",\"Provides guideline to assist in immediate safety planning and intervention for children and youth with actual or suspected experience of trauma.\",\"Identifies children and youth with developmental disabilites who would benefit from additional or changed play and leisure opportunities.\"],[\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered\",\"0 - Not triggered\\r\\n1 - Triggered at low risk\\r\\n2 - Triggered at moderate risk\\r\\n3 - Triggered at high risk\",\"0 - Not triggered\\r\\n1 - Triggered due to current disrupted education\\r\\n2 - Triggered due to risk of dropping out of school\",\"0 - Not triggered\\r\\n1 - Triggered due to moderate risk of harm to others\\r\\n2 - Triggered due to high risk of harm to others\",\"0 - Not triggered\\r\\n1 - Triggered due to moderate risk of harm to self\\r\\n2 - Triggered due to high risk of harm to self\",\"0 - Not triggered\\r\\n1 - Triggered due to moderate risk of harm to self\\r\\n2 - Triggered due to high risk of harm to self\",\"0 - Not triggered\\r\\n1 - Triggered due to problematic eating behaviour\\r\\n2 - Triggered for weight concerns\",\"0 - Not triggered\\r\\n1 - Triggered for IADL assistance\\r\\n2 - Triggered for ADL assistance\",\"0 - Not triggered\\r\\n1 - Triggered for moderate dependence on others for mobility\\r\\n2 - Triggered for high dependence on others for mobility\",\"0 - Not triggered\\r\\n1 - Triggered for tube feeding\\r\\n2 - Triggered for modified foods\",\"0 - Not triggered\\r\\n1 - Triggered to minimize the need for control interventions (young persons not in a psychiatric emergency situation) \\r\\n2 - Triggered to minimize the need for control interventions (young persons in a psychiatric emergency situation)\",\"0 - Not triggered\\r\\n1 - Triggered to promote social involvement\\r\\n2 - Triggered to improve unsettled relationships\",\"0 - Not triggered\\r\\n1 - Triggered to reduce conflict within a specific domain\\r\\n2 - Triggered to reduce widespread conflict\",\"0 - Not triggered\\r\\n1 - Triggered to reduce maladaptive or antisocial peer interactions\\r\\n2 - Triggered to reduce social withdrawal or isolation\",\"0 - Not triggered\\r\\n1 - Triggered to reduce or cease daily tobacco use\\r\\n2 - Triggered to prevent long-term tobacco use\",\"0 - Not triggered\\r\\n1 - Triggered to reduce the impact of prior traumatic life events\\r\\n2 - Triggered to address immediate safety concerns\",\"0 - Not triggered\\r\\n1 - Triggered to respect activity preferences\\r\\n2 - Triggered to support participation in play and leisure\"],[null,null,null,null,null,null,null,null,\"xcymhmedrev\",\"xcymhparent\",null,\"xcymhread1\\r\\nxcymhread2\",null,\"xcymhsleep\",\"xcymhstr\",\"xcymhsubuse\",null,null,null,null,null,null,null,\"xcymhfire\",\"xcymhedu1\\r\\nxcymhedi2\",null,null,null,null,\"xcymhlifskil1\\r\\nxcymhlifskil2\",null,null,\"xcymhctrlint1\\r\\nxcymhctrlint2\",null,\"xcymhipcon\",\"xcymhsocrel1\\r\\nxcymhsocrel2\",null,\"xcymhtrauma1\\r\\nxcymhtrauma2\\r\\nxcymhtrauma3\\r\\nxcymhtrauma4\",\"xcyddplay\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Coded_Name<\\/th>\\n      <th>Name<\\/th>\\n      <th>Description<\\/th>\\n      <th>Possible Values<\\/th>\\n      <th>Intermediary Variables<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-center\",\"targets\":4},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"Coded_Name\",\"targets\":1},{\"name\":\"Name\",\"targets\":2},{\"name\":\"Description\",\"targets\":3},{\"name\":\"Possible Values\",\"targets\":4},{\"name\":\"Intermediary Variables\",\"targets\":5}],\"pageLength\":5,\"lengthMenu\":[5,10,15,20],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n# Calculating Scales {#scales}\n\nThe following code is used to score each scale and CAP included in the ChYMH screener, screener + and full ChYMH. R equations are based on the original SAS code provided by the scale developer. The original SAS code is referenced at the beginning of each scale calculation presented and hard copies can be found in the \"Codebook\" folder of this project.\n\n### sCYPSS: Positive Symptoms Scale (sCYPSS) {#sCYPSS}\n\n**Last Updated:** August 8, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for (sCYPSS)**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                          |\n|:--------------|:---------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYPSS_G1_V1.0_P_2017-07-04.txt   |\n|BY             |Jennifer Bucek, Jonathan Chen, Micaela Jantzi |\n|DATE           |07/04/2017                                    |\n|REVISION DATES |NA                                            |\n|PURPOSE        |CODE FOR CY Positive Symptoms Scale           |\n|BASED ON       |interRAI SUITE, VERSION 9                     |\n\n\n:::\n:::\n\n\n\n\n**sCYPSS Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYPSS variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1mmm </td>\n   <td style=\"text-align:left;\"> Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1nnn </td>\n   <td style=\"text-align:left;\"> Command Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ooo </td>\n   <td style=\"text-align:left;\"> Delusions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ppp </td>\n   <td style=\"text-align:left;\"> Abnormal Thought Process </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYPSS Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validpss = case_when(iE1mmm %in% c(0,1,2,3,4) & \n                                         iE1ooo %in% c(0,1,2,3,4) & \n                                         iE1nnn %in% c(0,1,2,3,4) & \n                                         iE1ppp %in% c(0,1,2,3,4) ~ 1,\n                                         TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYPSS Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYPSS = case_when(validpss == 1 ~ \n                (case_when(iE1mmm %in% c(0,1,2,3) ~ iE1mmm, iE1mmm == 4 ~ + 3)) + \n                (case_when(iE1ooo %in% c(0,1,2,3) ~ + iE1ooo, iE1ooo == 4 ~ + 3)) +\n                (case_when(iE1nnn %in% c(0,1,2,3) ~ + iE1nnn, iE1nnn == 4 ~ + 3)) +\n                (case_when(iE1ppp %in% c(0,1,2,3) ~ + iE1ppp, iE1ppp == 4 ~ + 3)))) \n```\n:::\n\n\n\n\n**sCYPSS Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYPSStest <- subset(df, select=c(\"iE1mmm\",\"iE1ppp\",\"iE1ooo\",\"iE1nnn\"))\nsCYPSSdf <- sCYPSStest[complete.cases(sCYPSStest),]\nsCYPSSdf <- sCYPSSdf %>% mutate(\n  iE1mmm = case_when(iE1mmm %in% c(0,1,2,3) ~ iE1mmm, iE1mmm == 4 ~ + 3), \n  iE1ooo = case_when(iE1ooo %in% c(0,1,2,3) ~ iE1ooo, iE1ooo == 4 ~ + 3), \n  iE1nnn = case_when(iE1nnn %in% c(0,1,2,3) ~ iE1nnn, iE1nnn == 4 ~ + 3), \n  iE1ppp = case_when(iE1ppp %in% c(0,1,2,3) ~ iE1ppp, iE1ppp == 4 ~ + 3))\nscypss_rel <- psych::reliability(sCYPSSdf)\n```\n:::\n\n\n\n\n### Aggressive Behaviour Severity Scale (sCYABS) {#sCYABS}\n\n**Last Updated:** Aug 4, 2023\n\n**Last Updated By:** Shauna Heron\n\nCalled ABS\\_\\_scale in original Compass system.\n\n*interRAI Repository Information for (sCYABS)*\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                             |\n|:--------------|:------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYABS_XWMH_G1_V1.0_P_2017-07-04.txt |\n|BY             |Jennifer Bucek, Jonathan Chen, Micaela Jantzi    |\n|DATE           |07/04/2017                                       |\n|REVISION DATES |NA                                               |\n|PURPOSE        |CODE FOR CY AGGRESSIVE BEHAVIOUR SCALE           |\n|BASED ON       |interRAI SUITE, VERSION 9                        |\n\n\n:::\n:::\n\n\n\n\n**sCYABS Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYABS variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3l </td>\n   <td style=\"text-align:left;\"> Verbal abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3m </td>\n   <td style=\"text-align:left;\"> Physical Abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> Socially Inappropriate or Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3p </td>\n   <td style=\"text-align:left;\"> Resists Care </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYABS Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validabs = case_when(\n                              iE3l %in% c(0,1,2,3,4) & \n                              iE3m %in% c(0,1,2,3,4) & \n                              iE3n %in% c(0,1,2,3,4) & \n                              iE3p %in% c(0,1,2,3,4) ~ 1,\n                              TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYABS Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYABS = case_when(validabs==1 ~ \n            (case_when(iE3l %in% c(0,1,2,3) ~ iE3l, iE3l == 4 ~ + 3)) + \n            (case_when(iE3m %in% c(0,1,2,3) ~ + iE3m, iE3m == 4 ~ + 3)) +\n            (case_when(iE3n %in% c(0,1,2,3) ~ + iE3n, iE3n == 4 ~ + 3)) + \n            (case_when(iE3p %in% c(0,1,2,3) ~ + iE3p, iE3p == 4 ~ + 3))))\n```\n:::\n\n\n\n\n**sCYABS Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYABStest <- subset(df, select=c(\"iE3l\",\"iE3m\",\"iE3n\",\"iE3p\"))\nsCYABSdf <- sCYABStest[complete.cases(sCYABStest),]\nsCYABSdf <- sCYABSdf %>% mutate(\n  iE3l = case_when(iE3l %in% c(0,1,2,3) ~ iE3l, iE3l == 4 ~ + 3), \n  iE3m = case_when(iE3m %in% c(0,1,2,3) ~ iE3m, iE3m == 4 ~ + 3), \n  iE3n = case_when(iE3n %in% c(0,1,2,3) ~ iE3n, iE3n == 4 ~ + 3), \n  iE3p = case_when(iE3p %in% c(0,1,2,3) ~ iE3p, iE3p == 4 ~ + 3))\n\nscyabs_rel <- psych::reliability(sCYABSdf)\n```\n:::\n\n\n\n\n**sCYABS Cut Points**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYABS_cut = case_when(sCYABS == 0 ~ 0,\n                                           sCYABS >= 1 & sCYABS <= 4 ~ 1,\n                                           sCYABS >= 5 ~ 2))\n\ndf$sCYABS_cut <- ordered(df$sCYABS_cut,\n                                  levels = c(0,1,2),\n                                  labels = c(\"No signs of Aggression\", \"Mild to\n                                             Moderate Aggression\", \"More Severe\n                                             Aggression\"))\n```\n:::\n\n\n\n\n## Risk of Harm to Others (sCYRHO & RHO scale) {#sCYRHO}\n\n**Last Updated:** August 8, 2023\n\n**Last Updated By:** Shauna Heron\n\nCalculating the Risk of Harm to Others Scale requires that the Positive Symptoms (\\@ref(sCYPSS)) and Aggressive Behaviours (\\@ref(sCYABS)) Scales have also been calculated.\n\n**interRAI Repository Information for (sCYRHO)**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                          |\n|:--------------|:---------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYRHO_G1_V1.0_P_2017-07-06.txt   |\n|BY             |Jennifer Bucek, Jonathan Chen, Micaela Jantzi |\n|DATE           |06/28/2017                                    |\n|REVISION DATES |07/06/2017                                    |\n|PURPOSE        |CODE FOR CY RISK OF HARM TO OTHERS SCALE      |\n|BASED ON       |interRAI SUITE, VERSION 9                     |\n\n\n:::\n:::\n\n\n\n\n**sCYRHO Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYRHO variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ooo </td>\n   <td style=\"text-align:left;\"> Delusions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yyy </td>\n   <td style=\"text-align:left;\"> Difficulty Falling Asleep or Staying Asleep </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE6 </td>\n   <td style=\"text-align:left;\"> Sleep Problems Related to Hypomania or Mania </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE7 </td>\n   <td style=\"text-align:left;\"> Degree of Insight into Mental Health Problem </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2b </td>\n   <td style=\"text-align:left;\"> Intimidation of Others or Threatened Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2c </td>\n   <td style=\"text-align:left;\"> Violent Ideation </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX4 </td>\n   <td style=\"text-align:left;\"> Extreme Behaviour Disturbance </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYRHO Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validrho = case_when(\n                                                  iE1ooo %in% c(0,1,2,3,4) & \n                                                  iE1yyy %in% c(0,1,2,3,4) & \n                                                  iE6 %in% c(0,1,2,3,4,5) & \n                                                  iE7 %in% c(0,1,2) & \n                                                  iX2a %in% c(0,1,2,3,4,5) & \n                                                  iX2b %in% c(0,1,2,3,4,5) & \n                                                  iX2c %in% c(0,1,2,3,4,5) &\n                                                  sCYABS %in% c(0:12) &\n                                                  sCYPSS %in% c(0:12) & \n                                                  iX4 %in% c(0,1,2) ~ 1,\n                                                  TRUE ~ 0))\n\n\ndf <- df %>% mutate(xrho1 = case_when(\n                                                  iX2a %in% c(4,5) | \n                                                  iX2b %in% c(4,5) | \n                                                  iX2c %in% c(4,5) | \n                                                  iX4 == 2 ~ 2,\n                                                  iX2a %in% c(1,2,3) |\n                                                  iX2b %in% c(1,2,3) | \n                                                  iX2c %in% c(1,2,3) | \n                                                  iX4 == 1 ~ 1,\n                                                  TRUE ~ 0),\n                                      xrho2 = iX2a + iX2b + iX2c)\n```\n:::\n\n\n\n\n**sCYRHO Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYRHO = case_when(validrho == 1 ~ case_when(\n            xrho1 == 2 ~ case_when(\n              xrho2 >= 10 ~ case_when(\n                iE1ooo %in% c(1,2,3,4) ~ 6, iE1ooo == 0 ~ 5),\n              xrho2 <10 ~ case_when(\n                iE7 == 2 ~ 5, iE7 == 1 & iE1yyy %in% c(1,2,3,4) ~ 4,\n                iE7 == 1 & iE1yyy == 0 ~ 2, iE7 == 0 ~ 3)),\n            xrho1 == 1 ~ case_when(sCYPSS >= 2 ~ 4, sCYPSS < 2 ~ 2),\n            xrho1 == 0 ~ case_when(sCYABS >= 3 ~ 3, sCYABS < 3 ~ case_when(\n                sCYPSS >= 4 ~ 1, sCYPSS < 4 & iE6 %in% c(2,3,4,5) ~ 1,\n                sCYPSS < 4 & iE6 %in% c(0,1) ~ 0)))))\n```\n:::\n\n\n\n\n**sCYRHO Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYRHOtest <- subset(df, select=c(\"iE1ooo\",\"iE6\",\"iX2b\",\"iX2a\",\"iE7\",\"iE1yyy\",\n                                  \"iX2c\",\"sCYABS\",\"sCYPSS\",\"iX4\"))\nsCYRHOdf <- sCYRHOtest[complete.cases(sCYRHOtest),]\nscyrho_rel <- psych::reliability(sCYRHOdf)\n```\n:::\n\n\n\n\n## Autism Spectrum Symptoms Checklist (sASSC) {#sASSC}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\ninterRAI Repository Information for Risk of Autism Prediction\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                             |\n|:--------------|:------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_AUTISM SSC_G1_V1.0_P_2021-03-01.txt |\n|BY             |Shannon Stewart                                  |\n|DATE           |NA                                               |\n|REVISION DATES |NA                                               |\n|PURPOSE        |CODE FOR THE PREDICTION OF RISK FOR AUTISM       |\n|BASED ON       |interRAI SUITE, VERSION 9                        |\n\n\n:::\n:::\n\n\n\n\n**sASSC Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sASSC variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iC7 </td>\n   <td style=\"text-align:left;\"> Adaptability to Change in Routine or Environment </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE14a </td>\n   <td style=\"text-align:left;\"> Narrowly Restricted Range of Interest </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE14b </td>\n   <td style=\"text-align:left;\"> Behaviour Pattern that Hinders Socialization - Excessive Pre-occupation with and Activity or Routine </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE14c </td>\n   <td style=\"text-align:left;\"> Behaviour Pattern that Hinders Socialization - Demonstrates Lack of Social and Emotional Conventions when Socializing </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3aa </td>\n   <td style=\"text-align:left;\"> Excessive or Unusual Reaction to Sensory Stimuli </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sASSC Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validssc = case_when(iC7 %in% c(0,1,2) &\n                                         iE3aa %in% c(0,1,2,3,4) &\n                                         iE14a %in% c(0,1) &  \n                                         iE14b %in% c(0,1) &                    \n                                         iE14c %in% c(0,1) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sASSC Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sASSC = case_when(validssc == 1 ~ \n                            (case_when(iE14a == 1 ~ 1, TRUE ~ 0)) + \n                            (case_when(iE14b == 1 ~ 1, TRUE ~ 0)) + \n                            (case_when(iE14c == 1 ~ 1, TRUE ~ 0)) + \n                            (case_when(iE3aa %in% c(1,2,3,4) ~ 1, TRUE ~ 0)) + \n                            (case_when(iC7== 2 ~ 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**sASSC Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYASSCtest <- subset(df, select=c(\"iE14b\",\"iE14c\",\"iC7\",\"iE3aa\",\"iE14a\"))\nsCYASSCdf <- sCYASSCtest[complete.cases(sCYASSCtest),]\nscyassc_rel <- psych::reliability(sCYASSCdf)\n```\n:::\n\n\n\n\n## Children's Algorithm for Mental Health and Psychiatric Services (sCHAMHPS) {#sCHAMHPS}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for ChAMhPS**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                           |\n|:--------------|:--------------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CHAMHPS_G1_V1.1_P_2019-07-21                      |\n|BY             |Jennifer Bucek                                                 |\n|DATE           |31/08/2017                                                     |\n|REVISION DATES |06/09/2017; 21/07/2019                                         |\n|PURPOSE        |CODES FOR INTERRAI CHILDREN's ALGORITHM FOR MH AND PSYCHIATRIC |\n|BASED ON       |interRAI SUITE, VERSION 9.3                                    |\n\n\n:::\n:::\n\n\n\n\n**sCHAMHPS Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sChAMhPS variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5f </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Expresses Intent to Quit School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1iii </td>\n   <td style=\"text-align:left;\"> Intrusive Thoughts or Flashbacks </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1lll </td>\n   <td style=\"text-align:left;\"> Nightmares </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1qq </td>\n   <td style=\"text-align:left;\"> Hyperactivity </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1qqq </td>\n   <td style=\"text-align:left;\"> Lack of Interest in Social Interaction </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1rrr </td>\n   <td style=\"text-align:left;\"> Lack of Motivation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1vv </td>\n   <td style=\"text-align:left;\"> Made Negative Statements </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1xx </td>\n   <td style=\"text-align:left;\"> Expressions of Guilt or Shame </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> Socially Inappropriate or Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1c </td>\n   <td style=\"text-align:left;\"> Considered Performing a Self Injurious Act </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1d </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concern that Child/Youth is at Risk for Self Injury </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ao </td>\n   <td style=\"text-align:left;\"> Victim of Emotional Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iEEE2 </td>\n   <td style=\"text-align:left;\"> Summary of Risk - Family/Placement Breakdown </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCHAMHPS Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validhps = case_when(\n                           iBB5f %in% c(0,1,8) &\n                           iE1iii %in% c(0,1,2,3,4) &  \n                           iE1lll %in% c(0,1,2,3,4) &  \n                           iE1qq %in% c(0,1,2,3,4) &   \n                           iE1qqq %in% c(0,1,2,3,4) &\n                           iE1rrr %in% c(0,1,2,3,4) & \n                           iE1vv %in% c(0,1,2,3,4) &  \n                           iE1xx %in% c(0,1,2,3,4) &   \n                           iE3n %in% c(0,1,2,3,4) &  \n                           iEEE2 %in% c(0,1,2,3,4) & \n                           iX1c %in% c(0,1,2,3,4,5) &  \n                           iX1d %in% c(0,1) & \n                           iX2a %in% c(0,1,2,3,4,5) &   \n                           iX14a %in% c(0,1,2,3,4) &   \n                           iX14b %in% c(0,1,2,3,4) &  \n                           iY1ao %in% c(0,1,2,3,4,5) &\n                           T_age > 0 & T_age < 130 ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCHAMHPS Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>%\n  mutate(sCHAMHPS =\n           ifelse(\n             T_age <= 7,\n             ifelse(\n               iX14a == 0,\n               ifelse(\n                 iX2a %in% c(0, 1, 2),\n                 ifelse(iE1rrr %in% c(0, 1), 0,\n                        ifelse(iE1rrr %in% c(2, 3, 4), 2, NA)),\n                 ifelse(iX2a %in% c(3, 4, 5), 2, NA)\n               ),\n               ifelse(\n                 iX14a == 1,\n                 ifelse(iX2a %in% c(0, 1), 1,\n                        ifelse(iX2a %in% c(2, 3, 4, 5), 3, NA)),\n                 ifelse(iX14a %in% c(2, 3, 4),\n                        ifelse(iE1lll == 0, 3,\n                               ifelse(\n                                 iE1lll %in% c(1, 2, 3, 4), 5, NA\n                               )), NA)\n               )\n             ),\n             ifelse(\n               T_age >= 8 & T_age <= 11,\n               ifelse(\n                 iX14a %in% c(0, 1),\n                 ifelse(\n                   iX14b %in% c(0, 1),\n                   ifelse(\n                     iE3n %in% c(0, 1, 2),\n                     ifelse(iEEE2 %in% c(0, 1), 0,\n                            ifelse(iEEE2 %in% c(2, 3, 4), 2, NA)),\n                     ifelse(iE3n %in% c(3, 4), 4, NA)\n                   ),\n                   ifelse(\n                     iX14b == 2,\n                     ifelse(iE1qq %in% c(0, 1, 2), 1,\n                            ifelse(iE1qq %in% c(3, 4), 3, NA)),\n                     ifelse(iX14b %in% c(3, 4), 4, NA)\n                   )\n                 ),\n                 ifelse(\n                   iX14a == 2,\n                   ifelse(iE1vv %in% c(0, 1, 2), 3,\n                          ifelse(iE1vv %in% c(3, 4), 5, NA)),\n                   ifelse(iX14a %in% c(3, 4), 5, NA)\n                 )\n               ),\n               ifelse(T_age >= 12,\n                      ifelse(\n                        iX14a %in% c(0, 1),\n                        ifelse(\n                          iX14b %in% c(0, 1),\n                          ifelse(\n                            iE1iii %in% c(0, 1, 2),\n                            ifelse(\n                              iE1xx %in% c(0, 1, 2),\n                              ifelse(\n                                iY1ao %in% c(0, 1, 2),\n                                ifelse(iX1d == 0, 1, 2),\n                                ifelse(iY1ao %in% c(3, 4, 5), 3, NA)\n                              ),\n                              ifelse(iE1xx %in% c(3, 4), 3, NA)\n                            ),\n                            ifelse(iE1iii %in% c(3, 4), 3, NA)\n                          ),\n                          ifelse(iX14b == 2,\n                                 3,\n                                 ifelse(iX14b %in% c(3, 4),\n                                        5,\n                                        NA))\n                        ),\n                        ifelse(\n                          iX14a == 2,\n                          ifelse(\n                            iX1c %in% c(0, 1, 2, 3, 4),\n                            ifelse(\n                              iBB5f %in% c(0, 8),\n                              ifelse(iX2a %in% c(0, 1),\n                                     3,\n                                     ifelse(iX2a %in% c(2, 3, 4, 5),\n                                            4,\n                                            NA)),\n                              ifelse(iBB5f == 1, 4, NA)\n                            ),\n                            ifelse(iX1c == 5, 4, NA)\n                          ),\n                          ifelse(iX14a %in% c(3, 4),\n                                 ifelse(\n                                   iEEE2 %in% c(0, 1),\n                                   ifelse(iE1qqq == 0,\n                                          5,\n                                          ifelse(iE1qqq %in% c(1, 2, 3, 4),\n                                                 6,\n                                                 NA)),\n                                   ifelse(iEEE2 %in% c(2, 3, 4),\n                                          6,\n                                          NA)\n                                 ),\n                                 NA)\n                        )\n                      ), NA)\n             )\n           ))\n\n# test <- df %>% filter(T_age >= 12 & iX14a >=3) %>% select(EMHID,T_age, iX14a, iBB5f, iEEE2, iE1qqq, sCHAMHPS)\n```\n:::\n\n\n\n\n## Distractibility/Hyperactivity Scale (sCYDISTRACT) {#sCYDISTRACT}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sCYDISTRACT**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                     |\n|:--------------|:--------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CY DISTRACTIBILITY_G1_V1.0_P_2017-09-15.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                   |\n|DATE           |01/16/2015                                               |\n|REVISION DATES |NA                                                       |\n|PURPOSE        |CODE FOR CY DISTRACTIBILITY/HYPERACTIVITY SCALE          |\n|BASED ON       |interRAI SUITE, VERSION 9                                |\n\n\n:::\n:::\n\n\n\n\n**sCYDISTRACT Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYDISTRACT variable label information\n                                               and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1pp </td>\n   <td style=\"text-align:left;\"> Easily Distracted </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1qq </td>\n   <td style=\"text-align:left;\"> Hyperactivity </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1rr </td>\n   <td style=\"text-align:left;\"> Disorganization </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYDISTRACT Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validact = case_when(\n    iE1oo %in% c(0,1,2,3,4) &\n    iE1pp %in% c(0,1,2,3,4)&\n    iE1qq %in% c(0,1,2,3,4)&\n    iE1rr %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYDISTRACT Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYDISTRACT = case_when(validact == 1 ~ (\n                    iE1oo +iE1pp +iE1qq + iE1rr)))\n```\n:::\n\n\n\n\n**sCYDISTRACT Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYDISTRACTtest <- subset(df, select=c(\"iE1oo\",\"iE1pp\",\"iE1qq\",\"iE1rr\"))\nsCYDISTRACTdf <- sCYDISTRACTtest[complete.cases(sCYDISTRACTtest),]\nscydistract_rel <- psych::reliability(sCYDISTRACTdf)\n```\n:::\n\n\n\n\n## Family Functioning Scale (sCYFAMILY) {#sCYFAMILY}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for Family Functioning Scale**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                        |\n|:--------------|:-----------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CY FAMILY FUNCTIONING_G1_V1.1_P_2019-05-08.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                      |\n|DATE           |04/26/2019                                                  |\n|REVISION DATES |05/08/2019                                                  |\n|PURPOSE        |CODE FOR CY FAMILY FUNCTIONING SCALE                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                   |\n\n\n:::\n:::\n\n\n\n\n**sCYFAMILY Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYFAMILY variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iF8a </td>\n   <td style=\"text-align:left;\"> Strong and Supportive Relationship with Family </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19d </td>\n   <td style=\"text-align:left;\"> Family are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19h </td>\n   <td style=\"text-align:left;\"> Family Members Report Feeling Overwhelmes by Child/Youth's Conditions </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP24a </td>\n   <td style=\"text-align:left;\"> Parent(s)/Caregiver(s) - Has (Have) Current Developmental, or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP24b </td>\n   <td style=\"text-align:left;\"> Sibling(s) - Has (Have) Current Developmental, or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver is Unable or Unwilling to Continue in Caring Activites </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8a </td>\n   <td style=\"text-align:left;\"> Strong and Supportive Relationship with Family </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYFAMILY Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validily = case_when(\n  iF8a %in% c(0,1) &\n  iP19d %in% c(0,1,8) &\n  iP19h %in% c(0,1,8) &\n  iY7a %in% c(0,1) &\n  iY7b %in% c(0,1) &\n  iY8a %in% c(0,1,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYFAMILY Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYFAMILY = case_when(validily == 1 ~ \n      case_when(iP19d %in% c(0,1) & iP19h %in% c(0,1) & iY8a %in% c(0,1) ~\n      case_when(iF8a == 0 ~ (1 + iP19d + iP19h + iY7a + iY7b + iY8a), \n                iF8a == 1 ~ (iP19d + iP19h + iY7a + iY7b + iY8a)))))\n```\n:::\n\n\n\n\n**sCYFAMILY Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYFAMILYtest <- df %>% subset( \n      select=c(\"iF8a\",\"iP19d\",\"iP19h\",\"iY7a\",\"iY7b\",\"iY8a\"))# %>% drop_na(iF8a)\n\nsCYFAMILYtest<- sCYFAMILYtest %>% filter(iP19h!=8&iP19d!=8&iY8a!=8 )\n\n#sCYFAMILYtest$comb <- sCYFAMILYtest$iF8a\n\nsCYFAMILYtest$iF8a<-ifelse(sCYFAMILYtest$iF8a==1, 0, ifelse(sCYFAMILYtest$iF8a==0 ,1, NA))\n\nsCYFAMILYdf <- sCYFAMILYtest[complete.cases(sCYFAMILYtest),]\n\nscyfamily_rel <- psych::reliability(sCYFAMILYdf)\n```\n:::\n\n\n\n\n## Sleep Scale (sCYSLEEP) {#sCYSLEEP}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for the Sleep Scale**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                           |\n|:--------------|:----------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CY SLEEP_G1_V1.0_P_2017-09-15.txt |\n|BY             |Chenyu Liu, Kim Arbeau                         |\n|DATE           |01/16/2015                                     |\n|REVISION DATES |NA                                             |\n|PURPOSE        |CODE FOR CY SLEEP SCALE                        |\n|BASED ON       |interRAI SUITE, VERSION 9                      |\n\n\n:::\n:::\n\n\n\n\n**sCYSLEEP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYSLEEP variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1aaaa </td>\n   <td style=\"text-align:left;\"> Falls Asleep During the Dat </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1bbbb </td>\n   <td style=\"text-align:left;\"> Resists Bedtime </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yyy </td>\n   <td style=\"text-align:left;\"> Difficulty Falling Asleep or Staying Asleep </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1zzz </td>\n   <td style=\"text-align:left;\"> Wakes Up Multiple Time at Night </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYSLEEP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(valideep = case_when(\n  iE1yyy %in% c(0,1,2,3,4) &\n  iE1zzz %in% c(0,1,2,3,4)&\n  iE1aaaa %in% c(0,1,2,3,4)&\n  iE1bbbb %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYSLEEP Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYSLEEP = case_when(valideep == 1 ~ (iE1yyy +iE1zzz +iE1aaaa +\n                                                            iE1bbbb)))\n```\n:::\n\n\n\n\n**sCYSLEEP Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYSLEEPtest <- subset(df, select=c(\"iE1yyy\",\"iE1zzz\",\"iE1aaaa\",\"iE1bbbb\"))\nsCYSLEEPdf <- sCYSLEEPtest[complete.cases(sCYSLEEPtest),]\nscysleep_rel <- psych::reliability(sCYSLEEPdf)\n```\n:::\n\n\n\n\n## Activities of Daily Living Scale (sCYADL & ADL scale) {#sCYADL}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for Activities of Daily Living Scale**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                         |\n|:--------------|:--------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYADL_G1_V1.0_P_2019-02-05.txt  |\n|BY             |Janell Klassen                               |\n|DATE           |02/05/2019                                   |\n|REVISION DATES |NA                                           |\n|PURPOSE        |CODE FOR CY ACTIVITIES OF DAILY LIVING SCALE |\n|BASED ON       |interRAI SUITE, VERSION 9                    |\n\n\n:::\n:::\n\n\n\n\n**sCYADL Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYADL variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iG2a </td>\n   <td style=\"text-align:left;\"> Bathing - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2b </td>\n   <td style=\"text-align:left;\"> Personal Hygiene - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2c </td>\n   <td style=\"text-align:left;\"> Dressing Upper Body - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2d </td>\n   <td style=\"text-align:left;\"> Dressing Lower Body - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYADL Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validadl = case_when(\n  iG2a %in% c(0,1,2,3,4,5,6,8) & \n  iG2b %in% c(0,1,2,3,4,5,6,8) & \n  iG2c %in% c(0,1,2,3,4,5,6,8) &\n  iG2d %in% c(0,1,2,3,4,5,6,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYADL Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYADL = case_when(validadl == 1 ~ \n        (case_when(iG2a == 0 ~ 0, iG2a %in% c(1,2,3,4,5) ~ 1, iG2a %in% c(6,8) ~ 2))+ \n        (case_when(iG2b == 0 ~ 0, iG2b %in% c(1,2,3,4,5) ~ 1, iG2b %in% c(6,8) ~ 2))+\n        (case_when(iG2c == 0 ~ 0, iG2c %in% c(1,2,3,4,5) ~ 1, iG2c %in% c(6,8) ~ 2))+\n        (case_when(iG2d == 0 ~ 0, iG2d %in% c(1,2,3,4,5) ~ 1, iG2d %in% c(6,8) ~ 2))))\n```\n:::\n\n\n\n\n**sCYADL Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYADLtest <- subset(df, select=c(\"iG2a\",\"iG2b\",\"iG2c\",\"iG2d\"))\nsCYADLdf <- sCYADLtest[complete.cases(sCYADLtest),]\nsCYADLdf <- sCYADLdf %>% mutate(\n  iG2a = case_when(iG2a == 0 ~ 0, iG2a %in% c(1,2,3,4,5) ~ 1, iG2a %in% c(6,8) ~ 2),\n  iG2b = case_when(iG2b == 0 ~ 0, iG2b %in% c(1,2,3,4,5) ~ 1, iG2b %in% c(6,8) ~ 2),\n  iG2c = case_when(iG2c == 0 ~ 0, iG2c %in% c(1,2,3,4,5) ~ 1, iG2c %in% c(6,8) ~ 2),\n  iG2d = case_when(iG2d == 0 ~ 0, iG2d %in% c(1,2,3,4,5) ~ 1, iG2d %in% c(6,8) ~ 2))\nscyadl_rel <- psych::reliability(sCYADLdf)\n```\n:::\n\n\n\n\n## Anxiety Scale (sCYANXS) {#sCYANXS}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for the Anxiety Scale**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                          |\n|:--------------|:---------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYANXS_G1_V1.0_P_2017-06-28.txt  |\n|BY             |Jennifer Bucek, Jonathan Chen, Micaela Jantzi |\n|DATE           |06/28/2017                                    |\n|REVISION DATES |NA                                            |\n|PURPOSE        |CODE FOR CY ANXIETY SCALE                     |\n|BASED ON       |interRAI SUITE, VERSION 9                     |\n\n\n:::\n:::\n\n\n\n\n**sCYANXS Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYANXS variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eee </td>\n   <td style=\"text-align:left;\"> Repetitive Anxious Complaints/Concerns (non-health realted) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eeee </td>\n   <td style=\"text-align:left;\"> Hypervigilance </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1fff </td>\n   <td style=\"text-align:left;\"> Expressions, Including Non-verbal of Unrealistic Fears </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ggg </td>\n   <td style=\"text-align:left;\"> Obssessive Thoughts </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1iii </td>\n   <td style=\"text-align:left;\"> Intrusive Thoughts or Flashbacks </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1kkk </td>\n   <td style=\"text-align:left;\"> Episodes of Panic </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1lll </td>\n   <td style=\"text-align:left;\"> Nightmares </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYANXS Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validnxs = case_when(\n  iE1eee %in% c(0,1,2,3,4) & \n  iE1fff %in% c(0,1,2,3,4) & \n  iE1ggg %in% c(0,1,2,3,4) & \n  iE1iii %in% c(0,1,2,3,4) & \n  iE1kkk %in% c(0,1,2,3,4) & \n  iE1lll %in% c(0,1,2,3,4) & \n  iE1eeee %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYANXS Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYANXS = case_when(validnxs == 1 ~ \n  iE1eee + iE1fff + iE1ggg + iE1iii + iE1kkk + iE1lll + iE1eeee))\n```\n:::\n\n\n\n\n**sCYANXS Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYANXStest <- subset(df, select=c(\"iE1eee\",\"iE1fff\",\"iE1ggg\",\"iE1iii\",\n                                   \"iE1kkk\",\"iE1lll\",\"iE1eeee\"))\nsCYANXSdf <- sCYANXStest[complete.cases(sCYANXStest),]\nscyanxs_rel <- psych::reliability(sCYANXSdf)\n```\n:::\n\n\n\n\n## Disruptive and Aggressive Behaviour Scale (sCYDABS) {#sCYDABS}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for the Distruptive and Agressive Behaviour Scale**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                              |\n|:--------------|:-------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYDABS_G1_V1.0_P_2017-06-28.txt      |\n|BY             |Jennifer Bucek, Jonathan Chen, Micaela Jantzi     |\n|DATE           |06/28/2017                                        |\n|REVISION DATES |NA                                                |\n|PURPOSE        |CODE FOR CY DISRUPTIVE AGGRESSIVE BEHAVIOUR SCALE |\n|BASED ON       |interRAI SUITE, VERSION 9                         |\n\n\n:::\n:::\n\n\n\n\n**sCYDABS Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYDABS variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3l </td>\n   <td style=\"text-align:left;\"> Verbal abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3m </td>\n   <td style=\"text-align:left;\"> Physical Abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> Socially Inappropriate or Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3q </td>\n   <td style=\"text-align:left;\"> Destructive Behaviour Towards Property </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3r </td>\n   <td style=\"text-align:left;\"> Outburst of Anger </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYDABS Itermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validdabs = case_when( \n  iE3l %in% c(0,1,2,3,4) &\n  iE3m %in% c(0,1,2,3,4) &\n  iE3n %in% c(0,1,2,3,4) &\n  iE3q %in% c(0,1,2,3,4) &\n  iE3r %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYDABS Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYDABS = case_when(validdabs == 1 ~\n                                          iE3l + iE3m + iE3n + iE3q + iE3r))\n```\n:::\n\n\n\n\n**sCYDABS Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYDABStest <- subset(df, select=c(\"iE3l\",\"iE3m\",\"iE3n\",\"iE3q\",\"iE3r\"))\nsCYDABSdf <- sCYDABStest[complete.cases(sCYDABStest),]\nscydabs_rel <- psych::reliability(sCYDABSdf)\n```\n:::\n\n\n\n\n## Depressive Severity Index (sCYDSI) {#sCYDSI}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for Depressive Severity Index**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                          |\n|:--------------|:---------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYDSI_G1_V1.0_P_2017-07-04.txt   |\n|BY             |Jennifer Bucek, Jonathan Chen, Micaela Jantzi |\n|DATE           |07/04/2017                                    |\n|REVISION DATES |NA                                            |\n|PURPOSE        |CODE FOR CY Depressive Severity Index         |\n|BASED ON       |interRAI SUITE, VERSION 9                     |\n\n\n:::\n:::\n\n\n\n\nsCYDSI Variable Summary Table\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYDSI variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ss </td>\n   <td style=\"text-align:left;\"> Sad, Pained or Worried Facial Expressions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1vv </td>\n   <td style=\"text-align:left;\"> Made Negative Statements </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ww </td>\n   <td style=\"text-align:left;\"> Self-Deprecation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1xx </td>\n   <td style=\"text-align:left;\"> Expressions of Guilt or Shame </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yy </td>\n   <td style=\"text-align:left;\"> Expressions of Hopelessness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYDSI Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validdsi = case_when(\n  iE1ss %in% c(0,1,2,3,4) &\n  iE1vv %in% c(0,1,2,3,4) &\n  iE1ww %in% c(0,1,2,3,4) &\n  iE1xx %in% c(0,1,2,3,4) &\n  iE1yy %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYDSI Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYDSI = case_when(validdsi == 1 ~ \n        (case_when(iE1ss %in% c(0,1,2,3) ~ + iE1ss, iE1ss == 4 ~ + 3)) +\n        (case_when(iE1vv %in% c(0,1,2,3) ~ + iE1vv, iE1vv == 4 ~ + 3)) +\n        (case_when(iE1ww %in% c(0,1,2,3) ~ + iE1ww, iE1ww == 4 ~ + 3)) +\n        (case_when(iE1xx %in% c(0,1,2,3) ~ + iE1xx, iE1xx == 4 ~ + 3)) +\n        (case_when(iE1yy %in% c(0,1,2,3) ~ + iE1yy, iE1yy == 4 ~ + 3))))\n```\n:::\n\n\n\n\n**sCYDSI Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYDSItest <- subset(df, select=c(\"iE1ss\",\"iE1vv\",\"iE1ww\",\"iE1xx\",\"iE1yy\"))\nsCYDSIdf <- sCYDSItest[complete.cases(sCYDSItest),]\nsCYDSIdf <- sCYDSIdf %>% mutate(\n  iE1ss = case_when(iE1ss == 4 ~ 3, iE1ss %in% c(0,1,2,3) ~ as.numeric(iE1ss)), \n  iE1vv = case_when(iE1vv == 4 ~ 3, iE1vv %in% c(0,1,2,3) ~ as.numeric(iE1vv)), \n  iE1ww = case_when(iE1ww == 4 ~ 3, iE1ww %in% c(0,1,2,3) ~ as.numeric(iE1ww)),\n  iE1xx = case_when(iE1xx == 4 ~ 3, iE1xx %in% c(0,1,2,3) ~ as.numeric(iE1xx)),\n  iE1yy = case_when(iE1yy == 4 ~ 3, iE1yy %in% c(0,1,2,3) ~ as.numeric(iE1yy)))\nscydsi_rel <- psych::reliability(sCYDSIdf)\n```\n:::\n\n\n\n\n## Anhedonia Scale (sCYMHANHEDO & SOCDIS\\_\\_scale) {#sCYMHANHEDO}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information Anhedonia Scale**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                            |\n|:--------------|:---------------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYMH SOCIAL DISENGAGEMENT_G1_V1.0_P_2017-09-15.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                          |\n|DATE           |01/16/2015                                                      |\n|REVISION DATES |FILE NAME CHANGED FROM \"ANHEDONIA\" ON 4/24/18                   |\n|PURPOSE        |CODE FOR CYMH ANHEDONIA SCALE                                   |\n|BASED ON       |interRAI SUITE, VERSION 9                                       |\n\n\n:::\n:::\n\n\n\n\n**sCYMHANHEDO Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYMHANHEDO variable label information\n                                              and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1qqq </td>\n   <td style=\"text-align:left;\"> Lack of Interest in Social Interaction </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1rrr </td>\n   <td style=\"text-align:left;\"> Lack of Motivation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1sss </td>\n   <td style=\"text-align:left;\"> Expressions, Including Non-verbal, of a Lack of Pleasure in Life </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ttt </td>\n   <td style=\"text-align:left;\"> Withdrawal from Activities of Interest </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYMHANHEDO Scale Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validedo = case_when(\n  iE1qqq %in% c(0,1,2,3,4) &                                            \n  iE1rrr %in% c(0,1,2,3,4) &                                                 \n  iE1sss %in% c(0,1,2,3,4) &                                              \n  iE1ttt %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYMHANHEDO Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYMHANHEDO = case_when(validedo == 1 ~\n                              iE1qqq + iE1rrr + iE1sss + iE1ttt))\n```\n:::\n\n\n\n\n**sCYMHANHEDO Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYMHANHEDOtest <- subset(df, select=c(\"iE1qqq\",\"iE1rrr\",\"iE1sss\",\"iE1ttt\"))\nsCYMHANHEDOdf <- sCYMHANHEDOtest[complete.cases(sCYMHANHEDOtest),]\nscymhanhedo_rel <- psych::reliability(sCYMHANHEDOdf)\n```\n:::\n\n\n\n\n## Peer Conflict Scale (sCYPEER) {#sCYPEEr, warning=FALSE, message=FALSE}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for the Peer Conflict Scale**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                          |\n|:--------------|:---------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYPEER_G1_V1.0_P_2017-06-28.txt  |\n|BY             |Jennifer Bucek, Jonathan Chen, Micaela Jantzi |\n|DATE           |06/28/2017                                    |\n|REVISION DATES |NA                                            |\n|PURPOSE        |CODE FOR CY PEER CONFLICT SCALE               |\n|BASED ON       |interRAI SUITE, VERSION 9                     |\n\n\n:::\n:::\n\n\n\n\n**sCYPEER Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYPEER variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iP19b </td>\n   <td style=\"text-align:left;\"> Conflict with or Repeated Criticism of Close Friends </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19e </td>\n   <td style=\"text-align:left;\"> Friends are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19f </td>\n   <td style=\"text-align:left;\"> Pervasive Conflict with Peers </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYPEER Scale Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(valideer = case_when(\n  iP19b %in% c(0,1,8) &\n  iP19e %in% c(0,1,8) &\n  iP19f %in% c(0,1,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYPEER Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYPEER = case_when(valideer == 1 ~ \n            (case_when(iP19b == 1 ~ + 1, TRUE ~ 0) +\n            case_when(iP19f == 1 ~ + 1, TRUE ~ 0) +\n            case_when(iP19e == 1 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**sCYPEER Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYPEERtest <- subset(df, select=c(\"iP19b\",\"iP19e\",\"iP19f\"))\nsCYPEERdf <- sCYPEERtest[complete.cases(sCYPEERtest),]\nscypeer_rel <- psych::reliability(sCYPEERdf)\n```\n:::\n\n\n\n\n## Externalizing Subscale (sEXTERN) {#sEXTERN}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for Externalizing Subscale**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                     |\n|:--------------|:----------------------------------------|\n|PROGRAM        |SUITE9_SCALE_EXTERN_G1_V1.0_P_2017-08-31 |\n|BY             |Rahman Shiri                             |\n|DATE           |22/08/2017                               |\n|REVISION DATES |31/08/2017                               |\n|PURPOSE        |CODES FOR CYMH EXTERNALIZING SUBSCALE    |\n|BASED ON       |interRAI SUITE, VERSION 9.3              |\n\n\n:::\n:::\n\n\n\n\n**sEXTERN Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sEXTERN variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE15a </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Stealing </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE15d </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Elopement attempts/threats </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE15e </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Bullying peers </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3m </td>\n   <td style=\"text-align:left;\"> Physical Abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3r </td>\n   <td style=\"text-align:left;\"> Outburst of Anger </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3s </td>\n   <td style=\"text-align:left;\"> Defiant Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3t </td>\n   <td style=\"text-align:left;\"> Argumentativeness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX16c </td>\n   <td style=\"text-align:left;\"> Preoccupation with Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2b </td>\n   <td style=\"text-align:left;\"> Intimidation of Others or Threatened Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2c </td>\n   <td style=\"text-align:left;\"> Violent Ideation </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sEXTERN Scale Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validext = case_when(\n  iE15a %in% c(0,1,2,3,4,5) &\n  iE15d %in% c(0,1,2,3,4,5) &\n  iE15e %in% c(0,1,2,3,4,5) &\n  iE1oo %in% c(0,1,2,3,4) & \n  iE3m %in% c(0,1,2,3,4) &\n  iE3r %in% c(0,1,2,3,4) &\n  iE3s %in% c(0,1,2,3,4) &\n  iE3t %in% c(0,1,2,3,4) &\n  iX16c %in% c(0,1,2,3,4,5) &\n  iX2a %in% c(0,1,2,3,4,5) &\n  iX2b %in% c(0,1,2,3,4,5) &\n  iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sEXTERN Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sEXTERN = case_when\n(validext == 1 ~ \n  (case_when(iE15a == 0 ~ + 0, iE15a %in% c(1,2,3,4,5) ~ + 1)) + \n  (case_when(iE15d == 0 ~ + 0, iE15d %in% c(1,2,3,4,5) ~ + 1)) +\n  (case_when(iE15e == 0 ~ + 0, iE15e %in% c(1,2,3,4,5) ~ + 1)) +\n  (case_when(iE1oo == 0 ~ + 0, iE1oo %in% c(1,2,3,4) ~ + 1)) +  \n  (case_when(iE3m == 0 ~ + 0, iE3m %in% c(1,2,3,4) ~ + 1)) +      \n  (case_when(iE3r == 0 ~ + 0, iE3r %in% c(1,2,3,4) ~ + 1)) +   \n  (case_when(iE3s == 0 ~ + 0, iE3s %in% c(1,2,3,4) ~ + 1)) +\n  (case_when(iE3t == 0 ~ + 0, iE3t %in% c(1,2,3,4) ~ + 1)) +\n  (case_when(iX16c == 0 ~ + 0, iX16c %in% c(1,2,3,4,5) ~ + 1)) +\n  (case_when(iX2a == 0 ~ + 0, iX2a %in% c(1,2,3,4,5) ~ + 1)) +\n  (case_when(iX2b == 0 ~ + 0, iX2b %in% c(1,2,3,4,5) ~ + 1)) +\n  (case_when(iX2c == 0 ~ + 0, iX2c %in% c(1,2,3,4,5) ~ + 1))))\n```\n:::\n\n\n\n\n**sEXTERN Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsEXTERNtest <- subset(df, select=c(\"iE15a\",\"iE15d\",\"iE15e\",\"iE1oo\",\"iE3m\",\"iE3r\",\n                                   \"iE3s\",\"iE3t\",\"iX16c\",\"iX2a\",\"iX2b\",\"iX2c\"))\nsEXTERNdf <- sEXTERNtest[complete.cases(sEXTERNtest),]\nsEXTERNdf <- sEXTERNdf %>% mutate(\n  iE15a = case_when(iE15a %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\n  iE15d = case_when(iE15d %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\n  iE15e = case_when(iE15e %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\n  iE1oo = case_when(iE1oo %in% c(1,2,3,4) ~ 1, TRUE ~ 0),  \n  iE3m = case_when(iE3m %in% c(1,2,3,4) ~ 1, TRUE ~ 0),       \n  iE3r = case_when(iE3r %in% c(1,2,3,4) ~ 1, TRUE ~ 0),   \n  iE3s = case_when(iE3s %in% c(1,2,3,4) ~ 1, TRUE ~ 0), \n  iE3t = case_when(iE3t %in% c(1,2,3,4) ~ 1, TRUE ~ 0),\n  iX16c = case_when(iX16c %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0), \n  iX2a = case_when(iX2a %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0), \n  iX2b = case_when(iX2b %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0), \n  iX2c = case_when(iX2c %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0))\nextern_rel <- psych::reliability(sEXTERNdf)\n```\n:::\n\n\n\n\n## Internalizing Subscale (sINTERN) {#sINTERN}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sINTERN**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                     |\n|:--------------|:----------------------------------------|\n|PROGRAM        |SUITE9_SCALE_INTERN_G1_V1.0_P_2017-08-31 |\n|BY             |Rahman Shiri                             |\n|DATE           |22/08/2017                               |\n|REVISION DATES |31/08/2017                               |\n|PURPOSE        |CODES FOR CYMH INTERNALIZING SUBSCALE    |\n|BASED ON       |interRAI SUITE, VERSION 9.3              |\n\n\n:::\n:::\n\n\n\n\n**sINTERN Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sINTERN variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eee </td>\n   <td style=\"text-align:left;\"> Repetitive Anxious Complaints/Concerns (non-health realted) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eeee </td>\n   <td style=\"text-align:left;\"> Hypervigilance </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1rrr </td>\n   <td style=\"text-align:left;\"> Lack of Motivation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1sss </td>\n   <td style=\"text-align:left;\"> Expressions, Including Non-verbal, of a Lack of Pleasure in Life </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ttt </td>\n   <td style=\"text-align:left;\"> Withdrawal from Activities of Interest </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1uu </td>\n   <td style=\"text-align:left;\"> Decreased Energy/Statements of Decreases Energy </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1vv </td>\n   <td style=\"text-align:left;\"> Made Negative Statements </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ww </td>\n   <td style=\"text-align:left;\"> Self-Deprecation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1xx </td>\n   <td style=\"text-align:left;\"> Expressions of Guilt or Shame </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yy </td>\n   <td style=\"text-align:left;\"> Expressions of Hopelessness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sINTERN Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validint = case_when(\n    iE1eee %in% c(0,1,2,3,4) &\n    iE1eeee %in% c(0,1,2,3,4) &\n    iE1fff %in% c(0,1,2,3,4) &\n    iE1kkk %in% c(0,1,2,3,4) &\n    iE1rrr %in% c(0,1,2,3,4) &\n    iE1sss %in% c(0,1,2,3,4) &\n    iE1ttt %in% c(0,1,2,3,4) &\n    iE1uu %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0)) \n```\n:::\n\n\n\n\n**sINTERN Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sINTERN = case_when(validint == 1 ~ \n                                      iE1eee + iE1eeee + iE1fff +\n                                      iE1kkk + iE1rrr + iE1sss + iE1ttt +\n                                      iE1uu + iE1vv + iE1ww + iE1xx + iE1yy))\n```\n:::\n\n\n\n\n**sINTERN Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsINTERNtest <- subset(df, select=c(\"iE1eee\", \"iE1eeee\", \"iE1fff\", \"iE1kkk\", \n                                  \"iE1rrr\", \"iE1sss\", \"iE1ttt\", \"iE1uu\", \"iE1vv\",\n                                  \"iE1ww\", \"iE1xx\", \"iE1yy\"))\nsINTERNdf <- sINTERNtest[complete.cases(sINTERNtest),]\nintern_rel <- psych::reliability(sINTERNdf)\n```\n:::\n\n\n\n\n## Risk of Suicide and Self Harm in Kids (sCYRISSK) {#sCYRISSK}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for CYRISSK**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                            |\n|:--------------|:---------------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYRISSK_G1_V1.2_P_2020-09-01.txt                   |\n|BY             |Jeff Poss                                                       |\n|DATE           |06/18/2019                                                      |\n|REVISION DATES |07/28/2020; 09/01/2020                                          |\n|PURPOSE        |CODE FOR RISSK ALGORITHM(Risk of Suicide and Self-Harm in Kids) |\n|BASED ON       |interRAI SUITE, VERSION 9                                       |\n\n\n:::\n:::\n\n\n\n\n**sCYRISSK Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYRISSK variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1aaa </td>\n   <td style=\"text-align:left;\"> Irritability </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1rrr </td>\n   <td style=\"text-align:left;\"> Lack of Motivation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ss </td>\n   <td style=\"text-align:left;\"> Sad, Pained or Worried Facial Expressions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1tt </td>\n   <td style=\"text-align:left;\"> Crying, Tearfulness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ttt </td>\n   <td style=\"text-align:left;\"> Withdrawal from Activities of Interest </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1xx </td>\n   <td style=\"text-align:left;\"> Expressions of Guilt or Shame </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yy </td>\n   <td style=\"text-align:left;\"> Expressions of Hopelessness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3w </td>\n   <td style=\"text-align:left;\"> Self-Injurious Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19h </td>\n   <td style=\"text-align:left;\"> Family Members Report Feeling Overwhelmes by Child/Youth's Conditions </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1c </td>\n   <td style=\"text-align:left;\"> Considered Performing a Self Injurious Act </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1d </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concern that Child/Youth is at Risk for Self Injury </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1a </td>\n   <td style=\"text-align:left;\"> Most Recent Self Injurious Attempt </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1b </td>\n   <td style=\"text-align:left;\"> Intent of Self Injurious Attempt was to Kill Self </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYRISSK Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validssk = case_when(\n  iE1ss %in% c(0,1,2,3,4) &\n  iE1tt %in% c(0,1,2,3,4) &\n  iE1vv %in% c(0,1,2,3,4) &\n  iE1ww %in% c(0,1,2,3,4) &\n  iE1xx %in% c(0,1,2,3,4) &\n  iE1yy %in% c(0,1,2,3,4) &\n  iE1aaa %in% c(0,1,2,3,4) &\n  iE1rrr %in% c(0,1,2,3,4) &\n  iE1ttt %in% c(0,1,2,3,4) &\n  iE3w %in% c(0,1,2,3,4) &\n  iP19h %in% c(0,1,8) &\n  iX1a %in% c(0,1,2,3,4,5) &\n  iX1b %in% c(0,1,8) & \n  iX1c %in% c(0,1,2,3,4,5) &\n  iX1d %in% c(0,1) ~ 1, TRUE ~ 0),\n  xdsi = iE1ss + iE1tt + iE1vv + iE1ww + iE1xx +iE1yy + iE1aaa + iE1rrr + iE1ttt)\n```\n:::\n\n\n\n\n**sCYRISSK Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYRISSK = case_when(validssk == 1 ~ \n                                           (case_when(iX1c == 0 ~\n                                                        case_when(iX1d == 0 ~ \n                                                                    case_when(iX1a == 0 ~ \n                                                                                case_when(iE3w == 0 ~ \n                                                                                            case_when (xdsi >= 0 & xdsi <= 17 ~ 0,TRUE ~ 1),TRUE ~ 1),TRUE ~ 3)),\n                                                      iX1c %in% c(1,2,3) ~ \n                                                        case_when(iX1a %in% c(0,1,2) ~ \n                                                                    case_when(iX1b %in% c(0,8) ~ \n                                                                                case_when(xdsi %in% c(0,1) ~ 1, \n                                                                                          xdsi >= 2 & xdsi <= 12 ~ 2, \n                                                                                          xdsi >= 13 & xdsi <= 36 ~ 3),TRUE ~ \n                                                                                case_when(iX1d == 0 ~ 2),TRUE ~ 4)),\n                                                      iX1c == 4 ~ \n                                                        case_when(iX1d == 0 ~ 3,TRUE ~ \n                                                                    case_when(iX1b == 0 ~ \n                                                                                case_when(iP19h == 0 ~ 4, TRUE ~ 5),TRUE ~ 5)),\n                                                      iX1c == 5 ~ \n                                                        case_when(iX1b %in% c(0,8) ~ \n                                                                    case_when (iX1d == 0 ~ 3,TRUE ~ 5),iX1a %in% c(0,1,2,3) ~ 5,TRUE ~ 6)))))\n```\n:::\n\n\n\n\n## Risk of Injury to Others (sCYRIO) {#sCYRIO}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sCYRIO**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                           |\n|:--------------|:----------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYRIO_G1_V1.0_P_2019-06-28.txt    |\n|BY             |Jeff Poss                                      |\n|DATE           |06/28/2019                                     |\n|REVISION DATES |NA                                             |\n|PURPOSE        |CODE FOR CY RISK OF INJURY TO OTHERS ALGORITHM |\n|BASED ON       |interRAI SUITE, VERSION 9                      |\n\n\n:::\n:::\n\n\n\n\n**sCYRIO Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYRIO variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3l </td>\n   <td style=\"text-align:left;\"> Verbal abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3m </td>\n   <td style=\"text-align:left;\"> Physical Abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> Socially Inappropriate or Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3q </td>\n   <td style=\"text-align:left;\"> Destructive Behaviour Towards Property </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19h </td>\n   <td style=\"text-align:left;\"> Family Members Report Feeling Overwhelmes by Child/Youth's Conditions </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2b </td>\n   <td style=\"text-align:left;\"> Intimidation of Others or Threatened Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2c </td>\n   <td style=\"text-align:left;\"> Violent Ideation </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYRIO Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validrio = case_when(\n    iE1oo %in% c(0,1,2,3,4) &\n    iE3l %in% c(0,1,2,3,4) &\n    iE3m %in% c(0,1,2,3,4) & \n    iE3n %in% c(0,1,2,3,4) & \n    iE3q %in% c(0,1,2,3,4) &\n    iP19h %in% c(0,1,8) &\n    iX2a %in% c(0,1,2,3,4,5) &\n    iX2b %in% c(0,1,2,3,4,5) &\n    iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xrio = case_when(validrio == 1 ~ iX2a + iX2b + iX2c))\n```\n:::\n\n\n\n\n**sCYRIO Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(xbeh = case_when(validrio ==1 ~ \n                    (case_when(iE3l %in% c(2,3,4) ~ iE3l-1) +\n                     case_when(iE3n %in% c(2,3,4) ~ iE3n-1))))\n\ndf <- df %>% mutate(sCYRIO = case_when(validrio == 1 ~ \n                                         (case_when(iE3m == 0 ~ \n                                                      (case_when(xrio == 0 ~ \n                                                                   case_when(iE3q & iE3n %in% c(1,2,3,4) ~ 1,TRUE ~ 0))) +\n                                                      (case_when(xrio %in% c(1,2) ~ 1, TRUE ~ 0)) +\n                                                      (case_when(xrio %in% c(3,4) ~ 3, TRUE ~ 0)) +\n                                                      (case_when(xrio >= 5 ~ 3, TRUE ~ 0)), TRUE ~ 0) +\n                                            case_when(iE3m == 1 ~ \n                                                        (case_when(xrio %in% c(0,1) ~ \n                                                                     ((case_when(iE3q == 0 ~ 1, TRUE ~ 0)) +\n                                                                        case_when(iE3q >= 1 ~ \n                                                                                    (case_when(iE1oo == 0 ~ 1, TRUE ~ 0) +\n                                                                                       (case_when(iE1oo %in% c(1,2,3) ~ 2, TRUE ~ 0)) +\n                                                                                       (case_when(iE1oo == 4 ~ 3, TRUE ~ 0))))), TRUE ~ 0) +\n                                                           case_when(xrio %in% c(2,3,4,5) ~ 3, TRUE ~ 0) +\n                                                           case_when(xrio >= 6 ~ case_when(iE3q & iE3n %in%\n                                                                                            c(1,2,3,4) ~ 5,TRUE ~ 4), TRUE ~ 0)),\n                                                      TRUE ~ 0) +\n                                            case_when(iE3m == 2 ~\n                                                        (case_when(xrio >= 0 & xrio <= 6 ~ \n                                                                     (case_when(xbeh %in% c(0,1) ~ 3, TRUE ~ 0) +\n                                                                        case_when(xbeh >= 2 ~ 4,TRUE ~ 5)), TRUE ~ 0)), TRUE ~ 0) +\n                                            case_when(iE3m == 3 ~ \n                                                        (case_when(xrio %in% c(0,1,2,3,4) ~ 3, TRUE ~ 0) +\n                                                           case_when(xrio >= 5 ~ case_when(iP19h %in% c(0,8) ~ 4,TRUE ~ 5))), \n                                                      TRUE ~ 0) +\n                                            case_when(iE3m == 4 ~ \n                                                        (case_when(xrio %in% c(0,1,2) ~ 4, TRUE ~ 0) +\n                                                           case_when(xrio >= 3 & xrio <= 8 ~ 5, TRUE ~ 0)+ \n                                                           case_when(xrio >= 9 ~ 6, TRUE ~ 0)), TRUE ~ 0))))\n```\n:::\n\n\n\n\n## Deafblind Severity Index (sDbSI) {#sDbSI}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sDbSI**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                           |\n|:--------------|:--------------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_DEAFBLIND SEVERITY INDEX_G1_V1.2_P_2015-03-18.TXT |\n|BY             |Jeff Poss, John Hirdes                                         |\n|DATE           |10/02/12                                                       |\n|REVISION DATES |03/18/15                                                       |\n|PURPOSE        |CODE FOR DEAFBLIND SEVERITY INDEX ON NEW INTERRAI SUITE        |\n|BASED ON       |interRAI SUITE, VERSION 9                                      |\n\n\n:::\n:::\n\n\n\n\n**sDbSI Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sDbSI variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iD3a </td>\n   <td style=\"text-align:left;\"> Hearing </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iD4a </td>\n   <td style=\"text-align:left;\"> Vision </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sDbSI Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validdbsi = case_when(\n  iD3a %in% c(0,1,2,3,4) &\n  iD4a %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sDbSI Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sDbSI = case_when(validdbsi == 1 ~ \n                    (case_when(iD3a == 0 & iD4a == 0 ~  0, TRUE ~ 0) +\n                    case_when(iD3a == 0 & iD4a %in% c(1,2) ~  1, TRUE ~ 0) +\n                    case_when(iD3a %in% c(1,2) & iD4a == 0 ~  1, TRUE ~ 0) +\n                    case_when(iD3a == 0 & iD4a %in% c(3,4) ~  2, TRUE ~ 0) +\n                    case_when(iD3a %in% c(3,4) & iD4a == 0 ~  2, TRUE ~ 0) +\n                    case_when(iD3a %in% c(1,2) & iD4a %in% c(1,2) ~  3, TRUE ~ 0) +\n                    case_when(iD3a %in% c(1,2) & iD4a %in% c(3,4) ~  4, TRUE ~ 0) +\n                    case_when(iD3a %in% c(3,4) & iD4a %in% c(1,2) ~  4, TRUE ~ 0) +\n                    case_when(iD3a %in% c(3,4) & iD4a %in% c(3,4) ~  5, TRUE ~ 0))))\n```\n:::\n\n\n\n\n## Parenting Strengths Scale (sCYPS) {#sCYPS}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sCYPS**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                         |\n|:--------------|:------------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CY PARENTING STRENGTHS_G1_V1.1_P_2020-04-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                       |\n|DATE           |01/16/2015                                                   |\n|REVISION DATES |04/02/2020                                                   |\n|PURPOSE        |CODE FOR CY PARENTING STRENGTHS SCALE                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                    |\n\n\n:::\n:::\n\n\n\n\n**sCYPS Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYPS variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iP15a </td>\n   <td style=\"text-align:left;\"> Parent - Communicates Effectively with Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15b </td>\n   <td style=\"text-align:left;\"> Parent - Assists Child/Youth with Regulation of Emotions </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15c </td>\n   <td style=\"text-align:left;\"> Parent - Uses Appropriate Disciplinary Practices </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15d </td>\n   <td style=\"text-align:left;\"> Parent - Demonstrates Warmth and Support </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15e </td>\n   <td style=\"text-align:left;\"> Parent - Appropriate Supervision and Monitoring </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15f </td>\n   <td style=\"text-align:left;\"> Parent - Appropriate Limit Setting or Expectations </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYPS Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validps = case_when(\n    iP15a %in% c(0,1,2) &\n    iP15b %in% c(0,1,2) &\n    iP15c %in% c(0,1,2) &\n    iP15d %in% c(0,1,2) &\n    iP15e %in% c(0,1,2) &\n    iP15f %in% c(0,1,2) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYPS Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYPS = case_when(validps == 1 ~\n                (case_when(iP15a == 0 ~ + 2, iP15a == 1 ~ + 1, iP15a == 2 ~ + 0)) +\n                (case_when(iP15b == 0 ~ + 2, iP15b == 1 ~ + 1, iP15b == 2 ~ + 0)) +\n                (case_when(iP15c == 0 ~ + 2, iP15c == 1 ~ + 1, iP15c == 2 ~ + 0)) +\n                (case_when(iP15d == 0 ~ + 2, iP15d == 1 ~ + 1, iP15d == 2 ~ + 0)) +\n                (case_when(iP15e == 0 ~ + 2, iP15e == 1 ~ + 1, iP15e == 2 ~ + 0)) +\n                (case_when(iP15f == 0 ~ + 2, iP15f == 1 ~ + 1, iP15f == 2 ~ + 0))))\n```\n:::\n\n\n\n\n**sCYPS Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYPStest <- subset(df, select=c(\"iP15a\",\"iP15b\",\"iP15c\",\"iP15d\",\"iP15e\",\"iP15f\"))\nsCYPSdf <- sCYPStest[complete.cases(sCYPStest),]\nsCYPSdf <- sCYPSdf %>% mutate(\n  iP15a = case_when(iP15a == 0 ~ 2, iP15a == 1 ~ 1, iP15a == 2 ~ 0),\n  iP15b = case_when(iP15b == 0 ~ 2, iP15b == 1 ~ 1, iP15b == 2 ~ 0),\n  iP15c = case_when(iP15c == 0 ~ 2, iP15c == 1 ~ 1, iP15c == 2 ~ 0),\n  iP15d = case_when(iP15d == 0 ~ 2, iP15d == 1 ~ 1, iP15d == 2 ~ 0),\n  iP15e = case_when(iP15e == 0 ~ 2, iP15e == 1 ~ 1, iP15e == 2 ~ 0),\n  iP15f = case_when(iP15f == 0 ~ 2, iP15f == 1 ~ 1, iP15f == 2 ~ 0))\nscyps_rel <- psych::reliability(sCYPSdf)\n```\n:::\n\n\n\n\n## Severity of Self Harm Scale (sCYSOS) {#sCYSOS}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sCYSOS**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                          |\n|:--------------|:---------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CYSOS_G1_V1.1_P_2021-09-27.txt   |\n|BY             |Jennifer Bucek, Jonathan Chen, Micaela Jantzi |\n|DATE           |07/04/2017                                    |\n|REVISION DATES |09/27/2021                                    |\n|PURPOSE        |CODE FOR CY SEVERITY OF SELF-HARM SCALE       |\n|BASED ON       |interRAI SUITE, VERSION 9                     |\n\n\n:::\n:::\n\n\n\n\n**sCYSOS Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYSOS variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iC1d </td>\n   <td style=\"text-align:left;\"> Cognitive Skills for Daily Decision-Making </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iC2a </td>\n   <td style=\"text-align:left;\"> Short-Term Memory Ok </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iD1 </td>\n   <td style=\"text-align:left;\"> Making Self Understood (Expression) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1mmm </td>\n   <td style=\"text-align:left;\"> Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1nnn </td>\n   <td style=\"text-align:left;\"> Command Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ooo </td>\n   <td style=\"text-align:left;\"> Delusions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ppp </td>\n   <td style=\"text-align:left;\"> Abnormal Thought Process </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ss </td>\n   <td style=\"text-align:left;\"> Sad, Pained or Worried Facial Expressions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1vv </td>\n   <td style=\"text-align:left;\"> Made Negative Statements </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ww </td>\n   <td style=\"text-align:left;\"> Self-Deprecation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1xx </td>\n   <td style=\"text-align:left;\"> Expressions of Guilt or Shame </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yy </td>\n   <td style=\"text-align:left;\"> Expressions of Hopelessness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2j </td>\n   <td style=\"text-align:left;\"> Eating - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1c </td>\n   <td style=\"text-align:left;\"> Considered Performing a Self Injurious Act </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1d </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concern that Child/Youth is at Risk for Self Injury </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1e </td>\n   <td style=\"text-align:left;\"> Suicide Plan </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1b </td>\n   <td style=\"text-align:left;\"> Intent of Self Injurious Attempt was to Kill Self </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYSOS Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validsos = case_when(\n    iC1d %in% c(0,1,2,3,4,5) & \n    iC2a %in% c(0,1) & \n    iD1 %in% c(0,1,2,3,4) & \n    iE1mmm %in% c(0,1,2,3,4) & \n    iE1nnn %in% c(0,1,2,3,4) &\n    iE1ooo %in% c(0,1,2,3,4) &\n    iE1ppp %in% c(0,1,2,3,4) &\n    iE1ss %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) &\n    iG2j %in% c(0,1,2,3,4,5,6,8) &\n    iX1b %in% c(0,1,8) &\n    iX1c %in% c(0,1,2,3,4,5) &\n    iX1d %in% c(0,1) &\n    iX1e %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcsp1 = case_when(\n  iC1d %in% c(0,1,2,3,4,5) &\n  iD1 %in% c(0,1,2,3,4) &\n  iC2a %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcps2 = case_when(\n  iC1d %in% c(0,1,2,3,4,5) &\n   iD1 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0)) \n```\n:::\n\n\n\n\n**sCYSOS Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n# Impairment count\n\ndf <- df %>% mutate(xcps1 = case_when(validsos == 1 ~ \n          (case_when(iC1d %in% c(1,2,3) ~ 1, TRUE ~ 0) +\n           case_when(iD1 %in% c(1,2,3,4) ~ 1, TRUE ~ 0) +\n           case_when(iC2a == 1 ~ + 1, TRUE ~ 0))))\n\n# Severe imp count\n\ndf <- df %>% mutate(xcps2 = case_when(validsos == 1 ~ \n          (case_when(iC1d == 3 ~ 1, TRUE ~ 0) + \n           case_when(iD1 %in% c(3,4) ~ + 1, TRUE ~ 0))))\n\n# Cog performance count\n\ndf <- df %>% mutate(xcps = \n                      case_when(validsos == 1 ~ (case_when(iC1d ==  5 ~ 6, TRUE ~ 0) +\n                                                       case_when(iC1d == 4 ~ (\n                                                         case_when(iC1d %in% c(6, 8) ~ 6, TRUE ~ 0) +\n                                                           case_when(iG2j %in% c(0, 1, 2, 3, 4, 5) ~ 5, TRUE ~ 0)\n                                                       ), TRUE ~ 0) +\n                                                       case_when(iC1d >= 0 &\n                                                                   iC1d < 4 ~ (\n                                                                     case_when(xcps1 %in% c(2, 3) ~\n                                                                                 (case_when(xcps2 == 2 ~ 4, TRUE ~ 0) +\n                                                                                     case_when(xcps2 == 1 ~ 3, TRUE ~ 0) +\n                                                                                     case_when(xcps2 == 0 ~ 2, TRUE ~ 0)\n                                                                                 ), TRUE ~ 0) +\n                                                                       case_when(xcps1 == 1 ~ 1, TRUE ~ 0) +\n                                                                       case_when(xcps1 == 0 ~ 0, TRUE ~ 0)\n                                                                   )))))\n# Depressive Severity Count\n\ndf <- df %>% mutate(xdsi = case_when(validsos == 1 ~ \n  (case_when(iE1vv == 0 ~ 0, iE1vv %in% c(1,2) ~ 1, iE1vv %in% c(3,4) ~ 2) + \n   case_when(iE1ss == 0 ~ 0, iE1ss %in% c(1,2) ~ 1, iE1ss %in% c(3,4) ~ 2) +\n   case_when(iE1ww == 0 ~ 0, iE1ww %in% c(1,2) ~ 1, iE1ww %in% c(3,4) ~ 2) +\n   case_when(iE1xx == 0 ~ 0, iE1xx %in% c(1,2) ~ 1, iE1xx %in% c(3,4) ~ 2) +\n   case_when(iE1yy == 0 ~ 0, iE1yy %in% c(1,2) ~ 1, iE1yy %in% c(3,4) ~ 2))))\n\n# Positive Symptoms Count\n\ndf <- df %>% mutate(xpss = case_when(validsos == 1 ~ \n  (case_when(iE1mmm == 0 ~ + 0, iE1mmm %in% c(1,2) ~ + 1, iE1mmm %in% c(3,4) ~ + 2) +\n   case_when(iE1nnn == 0 ~ + 0, iE1nnn %in% c(1,2) ~ + 1, iE1nnn %in% c(3,4) ~ + 2) +\n   case_when(iE1ooo == 0 ~ + 0, iE1ooo %in% c(1,2) ~ + 1, iE1ooo %in% c(3,4) ~ + 2) +\n   case_when(iE1ppp == 0 ~ + 0, iE1ppp %in% c(1,2) ~ + 1, iE1ppp %in% c(3,4) ~ + 2))))\n\n## CY Severity of Self Harm Scale\n\ndf <-\n  df %>% mutate(sCYSOS = \n                  case_when(validsos == 1 ~ (case_when(iX1c == 5 ~\n                                                             (case_when(iX1b == 1 ~\n                                                                           (case_when(xdsi >= 6 ~ 6, TRUE ~ 0) +\n                                                                               case_when(xdsi < 6 ~ 5, TRUE ~ 0)), TRUE ~ 0) +\n                                                                 case_when(iX1b %in% c(0, 8) ~(\n                                                                       case_when(xdsi >= 6 & iX1e == 1 ~ 5, TRUE ~ 0) +\n                                                                         case_when(xdsi >= 6 &\n                                                                                     iX1e == 0 ~ 3, TRUE ~ 0) +\n                                                                         case_when(xdsi < 6 &\n                                                                                     iX1d == 1 ~ 4, TRUE ~ 0) +\n                                                                         case_when(xdsi < 6 &\n                                                                                     iX1d == 0 ~ 2, TRUE ~ 0)),\n                                                                   TRUE ~ 0)), TRUE ~ 0) +\n                                                   case_when(iX1c %in% c(3, 4) ~ (\n                                                                 case_when(iX1b == 1 ~ 4, TRUE ~ 0) +\n                                                                   case_when(iX1b %in% c(0, 8) ~ 3, TRUE ~ 0)\n                                                               ), TRUE ~ 0) +\n                                                   case_when(iX1c %in% c(0, 1, 2) ~(\n                                                                 case_when(iX1b == 1 ~\n                                                                             (case_when(xdsi >= 4 ~ 4, TRUE ~ 0) +\n                                                                                 case_when(xdsi < 4 ~ 1, TRUE ~ 0)), TRUE ~ 0) +\n                                                                   case_when(\n                                                                     iX1b %in% c(0, 8) ~(\n                                                                         case_when(xpss >= 3 & xcps >= 3 ~ 3, TRUE ~ 0) +\n                                                                           case_when(xpss >= 3 & xcps < 3 ~ 2, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 & iX1d == 1 ~ 2, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 &\n                                                                                       iX1d == 0 &\n                                                                                       xcps >= 1 ~ 1, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 &\n                                                                                       iX1d == 0 &\n                                                                                       xcps == 0 ~ 0, TRUE ~ 0)),TRUE ~ 0)), TRUE ~ 0))))\n```\n:::\n\n\n\n\n**sCYSOS Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYSOStest <- subset(df, select=c(\"iC2a\",\"iC1d\",\"iD1\",\"iE1mmm\",\"iE1nnn\",\"iE1ooo\",\n                                 \"iE1ppp\",\"iE1ss\",\"iE1vv\",\"iE1ww\",\"iE1xx\",\"iE1yy\",\n                                  \"iG2j\",\"iX1b\",\"iX1c\",\"iX1d\",\"iX1e\"))\nsCYSOSdf <- sCYSOStest[complete.cases(sCYSOStest),]\nscysos_rel <- psych::reliability(sCYSOSdf)\n```\n:::\n\n\n\n\n## Resource Intensity Child Youth Algorithm (sCYRIChY) {#sCYRIChY}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\nCalculating the Resource Intensity Child Youth Algorithm requires that the Parenting Strengths Scale (\\@ref(sCYPS)) has been calculated.\n\n**interRAI Repository Information for sCYRIChY**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                 |\n|:--------------|:----------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_RIChY_G1_V1.2_P_2020-12-10.txt          |\n|BY             |Jeff Poss                                            |\n|DATE           |10/22/2018                                           |\n|REVISION DATES |8/7/2019; 12/10/2020                                 |\n|PURPOSE        |CODE FOR CY RESOURCE INTENSITY CHILD YOUTH ALGORITHM |\n|BASED ON       |interRAI SUITE, VERSION 9                            |\n\n\n:::\n:::\n\n\n\n\n**sCYRIChY Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYRIChY variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE15e </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Bullying peers </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1aaa </td>\n   <td style=\"text-align:left;\"> Irritability </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eee </td>\n   <td style=\"text-align:left;\"> Repetitive Anxious Complaints/Concerns (non-health realted) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eeee </td>\n   <td style=\"text-align:left;\"> Hypervigilance </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1fff </td>\n   <td style=\"text-align:left;\"> Expressions, Including Non-verbal of Unrealistic Fears </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ggg </td>\n   <td style=\"text-align:left;\"> Obssessive Thoughts </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1hhh </td>\n   <td style=\"text-align:left;\"> Compulsive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1iii </td>\n   <td style=\"text-align:left;\"> Intrusive Thoughts or Flashbacks </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1kkk </td>\n   <td style=\"text-align:left;\"> Episodes of Panic </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1lll </td>\n   <td style=\"text-align:left;\"> Nightmares </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1mmm </td>\n   <td style=\"text-align:left;\"> Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1nnn </td>\n   <td style=\"text-align:left;\"> Command Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ooo </td>\n   <td style=\"text-align:left;\"> Delusions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ppp </td>\n   <td style=\"text-align:left;\"> Abnormal Thought Process </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1rrr </td>\n   <td style=\"text-align:left;\"> Lack of Motivation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ss </td>\n   <td style=\"text-align:left;\"> Sad, Pained or Worried Facial Expressions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1tt </td>\n   <td style=\"text-align:left;\"> Crying, Tearfulness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ttt </td>\n   <td style=\"text-align:left;\"> Withdrawal from Activities of Interest </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1vv </td>\n   <td style=\"text-align:left;\"> Made Negative Statements </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ww </td>\n   <td style=\"text-align:left;\"> Self-Deprecation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1xx </td>\n   <td style=\"text-align:left;\"> Expressions of Guilt or Shame </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yy </td>\n   <td style=\"text-align:left;\"> Expressions of Hopelessness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yyy </td>\n   <td style=\"text-align:left;\"> Difficulty Falling Asleep or Staying Asleep </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3q </td>\n   <td style=\"text-align:left;\"> Destructive Behaviour Towards Property </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8a </td>\n   <td style=\"text-align:left;\"> Strong and Supportive Relationship with Family </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2dd </td>\n   <td style=\"text-align:left;\"> Seuizures </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2gg </td>\n   <td style=\"text-align:left;\"> Hypersalivation or Drooling </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2k </td>\n   <td style=\"text-align:left;\"> Constipation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2ll </td>\n   <td style=\"text-align:left;\"> Other Emergent Conditions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2y </td>\n   <td style=\"text-align:left;\"> Dry Mouth </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ3 </td>\n   <td style=\"text-align:left;\"> Dyspnea (Shortness of Breath) </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9a </td>\n   <td style=\"text-align:left;\"> Akathisia - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9b </td>\n   <td style=\"text-align:left;\"> Dyskinesia - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9c </td>\n   <td style=\"text-align:left;\"> Tremor - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9d </td>\n   <td style=\"text-align:left;\"> Bradykinesia - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9e </td>\n   <td style=\"text-align:left;\"> Rigidity - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9f </td>\n   <td style=\"text-align:left;\"> Dystonia - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9g </td>\n   <td style=\"text-align:left;\"> Slow Shuffling Gait - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15a </td>\n   <td style=\"text-align:left;\"> Parent - Communicates Effectively with Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15b </td>\n   <td style=\"text-align:left;\"> Parent - Assists Child/Youth with Regulation of Emotions </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15c </td>\n   <td style=\"text-align:left;\"> Parent - Uses Appropriate Disciplinary Practices </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15d </td>\n   <td style=\"text-align:left;\"> Parent - Demonstrates Warmth and Support </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15e </td>\n   <td style=\"text-align:left;\"> Parent - Appropriate Supervision and Monitoring </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15f </td>\n   <td style=\"text-align:left;\"> Parent - Appropriate Limit Setting or Expectations </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19b </td>\n   <td style=\"text-align:left;\"> Conflict with or Repeated Criticism of Close Friends </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19d </td>\n   <td style=\"text-align:left;\"> Family are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19e </td>\n   <td style=\"text-align:left;\"> Friends are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19h </td>\n   <td style=\"text-align:left;\"> Family Members Report Feeling Overwhelmes by Child/Youth's Conditions </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP24a </td>\n   <td style=\"text-align:left;\"> Parent(s)/Caregiver(s) - Has (Have) Current Developmental, or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP24b </td>\n   <td style=\"text-align:left;\"> Sibling(s) - Has (Have) Current Developmental, or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX16c </td>\n   <td style=\"text-align:left;\"> Preoccupation with Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1c </td>\n   <td style=\"text-align:left;\"> Considered Performing a Self Injurious Act </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1d </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concern that Child/Youth is at Risk for Self Injury </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX1e </td>\n   <td style=\"text-align:left;\"> Suicide Plan </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2b </td>\n   <td style=\"text-align:left;\"> Intimidation of Others or Threatened Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2c </td>\n   <td style=\"text-align:left;\"> Violent Ideation </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ab </td>\n   <td style=\"text-align:left;\"> Intent of Self Injurious Attempt was to Kill Self </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1al </td>\n   <td style=\"text-align:left;\"> Victim of Crime </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1am </td>\n   <td style=\"text-align:left;\"> Victim of Sexual Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1an </td>\n   <td style=\"text-align:left;\"> Victim of Physical Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ao </td>\n   <td style=\"text-align:left;\"> Victim of Emotional Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aq </td>\n   <td style=\"text-align:left;\"> Victim of Bullying </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1au </td>\n   <td style=\"text-align:left;\"> Witnessed Domestic Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver is Unable or Unwilling to Continue in Caring Activites </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8a </td>\n   <td style=\"text-align:left;\"> Strong and Supportive Relationship with Family </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYRIChY Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validrichy = case_when(\n  iE1yyy %in% c(0,1,2,3,4) & \n    iE3q %in% c(0,1,2,3,4) & \n    iE15e %in% c(0,1,2,3,4,5) &\n    iJ2k %in% c(0,1,2,3,4) & \n    iJ2y %in% c(0,1,2,3,4) & \n    iJ2dd %in% c(0,1,2,3,4) & \n    iJ2gg %in% c(0,1,2,3,4) & \n    iJ2ll %in% c(0,1,2,3,4) &\n    iJ3 %in% c(0,1,2,3) & \n    iJ9a %in% c(0,1) & \n    iJ9b %in% c(0,1) & \n    iJ9c %in% c(0,1) & \n    iJ9d %in% c(0,1) & \n    iJ9e %in% c(0,1) & \n    iJ9f %in% c(0,1) & \n    iJ9g %in% c(0,1) & \n    iP15a %in% c(0,1,2,8) &\n    iP15b %in% c(0,1,2,8) &\n    iP15c %in% c(0,1,2,8) &\n    iP15d %in% c(0,1,2,8) &\n    iP15e %in% c(0,1,2,8) &\n    iP15f %in% c(0,1,2,8) &\n    iP19b %in% c(0,1,8) &\n    iP19e %in% c(0,1,8) &\n    iX2b %in% c(0,1,2,3,4,5) &\n    iX16c %in% c(0,1,2,3,4,5) &\n    iY1al %in% c(0,1,2,3,4,5) &\n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) &\n    iY1aq %in% c(0,1,2,3,4,5) &\n    iY1ao %in% c(0,1,2,3,4,5) &\n    iY1au %in% c(0,1,2,3,4,5) &\n    iE1eee %in% c(0,1,2,3,4) & \n    iE1fff %in% c(0,1,2,3,4) & \n    iE1ggg %in% c(0,1,2,3,4) & \n    iE1hhh %in% c(0,1,2,3,4) & \n    iE1iii %in% c(0,1,2,3,4) & \n    iE1kkk %in% c(0,1,2,3,4) & \n    iE1lll %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) & \n    iF8a %in% c(0,1) &\n    iP19d %in% c(0,1,8) &\n    iP19h %in% c(0,1,8) & \n    iY7a %in% c(0,1) &\n    iY7b %in% c(0,1) &\n    iY8a %in% c(0,1,8) & \n    iE1oo %in% c(0,1,2,3,4) &\n    iE1nnn %in% c(0,1,2,3,4) & \n    iX1b %in% c(0,1,8) & \n    iX1c %in% c(0,1,2,3,4,5) & \n    iX1d %in% c(0,1) &\n    iX1e %in% c(0,1) & \n    iE1ss %in% c(0,1,2,3,4) & \n    iE1tt %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) &\n    iE1aaa %in% c(0,1,2,3,4) &\n    iE1rrr %in% c(0,1,2,3,4) &\n    iE1ttt %in% c(0,1,2,3,4) &\n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) &\n    T_age > 0 & T_age < 130 &\n    sCYPSS %in% c(0:12) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xsdsi =\n                      iE1ss + iE1tt + iE1vv + iE1ww + iE1xx + iE1yy + \n                      iE1aaa + iE1rrr + iE1ttt)\n\ndf <- df %>% mutate(xsSOS =  case_when(\n  iX1c == 5 ~ case_when(iX1b == 1 ~ 6, iX1b %in% c(0,8) ~ case_when(\n    iX1e == 1 ~ 6, iX1e == 0 ~ case_when(xsdsi >= 9 ~ 5, xsdsi < 9 ~ case_when(\n      iX1d == 1 ~ 4, iX1d == 0 ~ case_when(iE1nnn %in% c(1,2,3,4) ~ 5, \n                                           iE1nnn == 0 ~ 3))))),\n  iX1c %in% c(3,4) ~ case_when(iX1b == 1 ~ 4, iX1b %in% c(0,8) ~ 3),\n  \n  iX1c %in% c(1,2) ~ case_when(iX1b == 1 ~ case_when(xsdsi >= 6 ~ 4,\n                                                     xsdsi < 6 ~ case_when(\n                                                       iX1d == 1 ~ case_when(\n                                                         iE1nnn %in% c(1,2,3,4) ~ 5,\n                                                         iE1nnn == 0 ~ 3), \n                                                       iX1d == 0 ~ case_when(\n                                                         iE1nnn %in% c(1,2,3,4) ~ 4,\n                                                         iE1nnn == 0 ~ 3))),\n                               iX1b %in% c(0,8) ~ case_when(iE1nnn %in% \n                                                              c(1,2,3,4) ~ 3,\n                                                            iE1nnn == 0 ~ \n                                                              case_when(\n                                                                iX1d == 1 ~ 2,\n                                                                iX1d == 0 ~ 1))),\n  iX1c == 0 ~ 0))\n\ndf <- df %>% mutate(validSSH = case_when(\n    iE1oo %in% c(0,1,2,3,4) & \n    xsSOS %in% c(0,1,2,3,4,5,6) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYRIChY Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(xparent = case_when(  ## added ip15e and iP15f (as per SAS)\n  iP15a == 8 | iP15b == 8 | iP15c == 8 | iP15d == 8 | iP15e == 8 | iP15f ==8 ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xabuse = case_when(\n  iY1al %in% c(1,2,3,4,5) ~ + 1, iY1am %in% c(1,2,3,4,5) ~ + 1, \n  iY1an %in% c(1,2,3,4,5) ~ + 1, iY1aq %in% c(1,2,3,4,5) ~ + 1, \n  iY1ao %in% c(1,2,3,4,5) ~ + 1, iY1au %in% c(1,2,3,4,5) ~ + 1))\n\ndf <- df %>% mutate(xmedsym = case_when(\n  iJ2k %in% c(1,2,3,4) ~ + 1, iJ2y %in% c(1,2,3,4) ~ + 1, \n  iJ2dd %in% c(1,2,3,4) ~ + 1, iJ2gg %in% c(1,2,3,4) ~ + 1, \n  iJ2ll %in% c(1,2,3,4) ~ + 1, iJ3 %in% c(1,2,3) ~ + 1, iJ9a == 1 ~ + 1,\n  iJ9b == 1 ~ + 1, iJ9c == 1 ~ + 1, iJ9d == 1 ~ + 1, iJ9e == 1 ~ + 1, \n  iJ9f == 1 ~ + 1, iJ9g == 1 ~ + 1))\n\ndf <- df %>% mutate(xsANXIETY =  \n  iE1eee + iE1fff + iE1ggg + iE1hhh + iE1iii + iE1kkk + iE1lll + iE1eeee)\n\ndf <- df %>% mutate(xsFAMILY = case_when(\n  iP18d != 8 & iP19h !=8 & iY8a != 8 ~ case_when(\n    iF8a == 0 ~ 1 + iP19d + iP19h + iY7a + iY7b + iY8a,\n    iF8a == 1 ~ iP19d + iP19h + iY7a + iY7b + iY8a)))\n\ndf <- df %>% mutate(xcSSH = case_when(\n  xsSOS %in% c(5,6) ~ 2, xsSOS %in% c(3,4) ~ case_when(\n    iE1oo >= 2 ~ 2, iE1oo < 2 ~ 1), xsSOS < 3 ~ 0))\n\ndf <- df %>% mutate(xsRHO = case_when(\n  iX2a %in% c(4,5) ~ 6, iX2a %in% c(2,3) ~ case_when( \n    iX2c %in% c(4,5) | iX2b %in% c(4,5) | iX16c %in% c(4,5) ~ 6, iE1mmm %in%\n      c(2,3,4) | iE1nnn %in% c(2,3,4) | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n      c(2,3,4) ~ 5, TRUE ~ 4),\n  iX2a %in% c(0,1) ~ case_when(iX2c %in% c(4,5) | iX2b %in% c(4,5) | \n                                 iX16c %in% c(4,5) ~ case_when(\n                                   iE1mmm %in% c(2,3,4) | iE1nnn %in% c(2,3,4) \n                                   | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n                                     c(2,3,4) ~ 3, TRUE ~ 2), TRUE ~\n                                 case_when(\n                                   iE1mmm %in% c(2,3,4) | iE1nnn %in% c(2,3,4) \n                                   | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n                                     c(2,3,4) ~ 1, TRUE ~ 0))))\n \n df <- df %>% mutate(xcHARMOTH = case_when(\n   xsRHO %in% c(5,6) ~ 2, xsRHO %in% c(3,4) ~ case_when(\n     iE1oo %in% c(2,3,4) ~ 2, iE1oo < 2 ~ 1), xsRHO < 2 ~ 0))\n\ndf <- df %>% mutate(sCYRIChY = case_when(\n  T_age <= 7 ~ case_when(\n    iX2b %in% c(3,4,5) ~ 3, iX2b %in% c(0,1,2) ~ case_when(\n      iE3q %in% c(2,3,4) ~ 1, iE3q %in% c(0,1) ~ 0)),\n  \n  T_age %in% c(8,9,10,11) ~ case_when(\n    iP19b == 8 | iP19e == 8 ~ case_when(\n      xsANXIETY >= 7 ~ 5, xsANXIETY %in% c(0,1,2,3,4,5,6) ~ 3),\n    iP19b != 8 & iP19e != 8 ~ case_when(\n      iE15e %in% c(2,3,4,5) | iP19b == 1 ~ case_when(\n        sCYPS >= 3 | xparent == 1 ~ 4, \n        sCYPS %in% c(0,1,2) ~ case_when(\n          iE1yyy %in% c(2,3,4) ~ 3, iE1yyy %in% c(0,1) ~ 2)), ## FOUND ERROR should iE1yyy %in% c(2, 3, 4) ~ 3???\n      iE15e %in% c(0,1) & iP19b %in% c(0, 8) ~ case_when( # 0 or 8\n        xsFAMILY >= 3 | iY8a == 8 ~ 3, xsFAMILY %in% c(0,1,2) ~ case_when(\n          xabuse >= 1 | xmedsym >= 1 ~ 1, xabuse == 0 & xmedsym == 0 ~ 0)))), \n    T_age >= 12 ~ case_when(\n    iE15e %in% c(2,3,4,5) | iP19b == 1 ~ case_when(\n      xsANXIETY >= 10 ~ 3, xsANXIETY <= 9 ~ 5), \n    iE15e %in% c(0,1) & iP19b %in% c(0,8) ~ case_when( ## this one too\n      xcSSH %in% c(1,2) ~ 4, xcSSH == 0 ~ case_when(\n        xcHARMOTH %in% c(1,2) ~ 4, xcHARMOTH == 0 ~ case_when(\n          xsFAMILY >= 1 | iY8a == 8 ~ case_when(\n            xparent == 1 ~ 3, xparent == 0 ~ 2), xsFAMILY == 0 ~ 0))))))    \n```\n:::\n\n\n\n\n## School Disengagement Scale (sCYMHSDeS) {#sCYMHSDeS}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sCYMHSDeS**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                            |\n|:--------------|:-----------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_sCYMHSDES_G1_V1.0_P_2019-02-05.txt |\n|BY             |Janell Klassen                                  |\n|DATE           |02/05/2019                                      |\n|REVISION DATES |NA                                              |\n|PURPOSE        |CODE FOR CYMH SCHOOL DISENGAGEMENT SCALE        |\n|BASED ON       |interRAI SUITE, VERSION 9                       |\n\n\n:::\n:::\n\n\n\n\n**sCYMHSDeS Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYMHSDeS variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iBB10 </td>\n   <td style=\"text-align:left;\"> Strong, Persistent Dissatisfaction with School </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11a </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Refuse to Attend School </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11b </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Removed Due to Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB14a </td>\n   <td style=\"text-align:left;\"> Overall Academic Ability - Performance </td>\n   <td style=\"text-align:left;\"> 0-3,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5a </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Increase in Lateness or Absenteeism </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5b </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Poor Productivity or Distruptiveness at School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5e </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Conflict with School Staff </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5f </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Expresses Intent to Quit School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYMHSDeS Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validsdes = case_when(\n    iBB5a %in% c(0,1,8) & \n    iBB5b %in% c(0,1,8) & \n    iBB5e %in% c(0,1,8) & \n    iBB5f %in% c(0,1,8) & \n    iBB11a %in% c(0,1) & \n    iBB11b %in% c(0,1) & \n    iBB10 %in% c(0,1,2,3) & \n    iBB14a %in% c(0,1,2,3,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYMHSDeS Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYMHSDeS = case_when(validsdes == 1 ~ \n             (case_when(iBB5a == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iBB5b == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iBB5e == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iBB5f == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iBB10 %in% c(1,2,3) ~ + 1, TRUE ~ 0) +\n             case_when(iBB11a == 1 ~ + 1, TRUE ~ 0) + \n             case_when(iBB11b == 1 ~ + 1, TRUE ~ 0) + \n             case_when(iBB14a %in% c(2,3) ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**sCYMHSDeS Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYMHSDeStest <- subset(df, select=c(\"iBB5a\",\"iBB5b\",\"iBB5e\",\"iBB5f\", \"iBB11a\",\n                                     \"iBB11b\", \"iBB10\",\"iBB14a\"))\nsCYMHSDeSdf <- sCYMHSDeStest[complete.cases(sCYMHSDeStest),]\nsCYMHSDeSdf <- sCYMHSDeSdf %>% mutate(\n  iBB5a = case_when(iBB5a == 1 ~ 1, TRUE ~ 0), \n  iBB5b = case_when(iBB5b == 1 ~ 1, TRUE ~ 0), \n  iBB5e = case_when(iBB5e == 1 ~ 1, TRUE ~ 0), \n  iBB5f = case_when(iBB5f == 1 ~ 1, TRUE ~ 0), \n  iBB11a = case_when(iBB11a == 1 ~ 1, TRUE ~ 0), \n  iBB11b = case_when(iBB11b == 1 ~ 1, TRUE ~ 0), \n  iBB10 = case_when(iBB10 %in% c(1,2,3) ~ 1, TRUE ~ 0),\n  iBB14a = case_when(iBB14a %in% c(2,3) ~ 1, TRUE ~ 0))\nscymhsdes_rel <- psych::reliability(sCYMHSDeSdf)\n```\n:::\n\n\n\n\n## Youth IADL Capacity Scale (sCYYIADLC) {#sCYYIADLC}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sCYYIADLC**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                         |\n|:--------------|:------------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CY YOUTH IADL CAPACITY_G1_V1.0_P_2015-01-16.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                       |\n|DATE           |01/16/2015                                                   |\n|REVISION DATES |NA                                                           |\n|PURPOSE        |CODE FOR CY YOUTH IADL CAPACITY SCALE                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                    |\n\n\n:::\n:::\n\n\n\n\n**sCYYIADLC Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYYIADLC variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ab </td>\n   <td style=\"text-align:left;\"> Meal Preparation - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1bb </td>\n   <td style=\"text-align:left;\"> Ordinary Housework - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1cb </td>\n   <td style=\"text-align:left;\"> Managing Money - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1db </td>\n   <td style=\"text-align:left;\"> Managing Medications - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1eb </td>\n   <td style=\"text-align:left;\"> Phone Use - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1fb </td>\n   <td style=\"text-align:left;\"> Stairs - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1gb </td>\n   <td style=\"text-align:left;\"> Shopping - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1hb </td>\n   <td style=\"text-align:left;\"> Transportation - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1nb </td>\n   <td style=\"text-align:left;\"> Use of Technology - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ob </td>\n   <td style=\"text-align:left;\"> School Tasks - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1pb </td>\n   <td style=\"text-align:left;\"> Orientation in Familiar Indoor Environment - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYYIADLC Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validiadlc = case_when(\n    iG1ab %in% c(0,1,2,3,4,5,6) & \n    iG1bb %in% c(0,1,2,3,4,5,6) & \n    iG1cb %in% c(0,1,2,3,4,5,6) & \n    iG1db %in% c(0,1,2,3,4,5,6) & \n    iG1eb %in% c(0,1,2,3,4,5,6) & \n    iG1fb %in% c(0,1,2,3,4,5,6) & \n    iG1gb %in% c(0,1,2,3,4,5,6) & \n    iG1hb %in% c(0,1,2,3,4,5,6) & \n    iG1nb %in% c(0,1,2,3,4,5,6) & \n    iG1ob %in% c(0,1,2,3,4,5,6) & \n    iZZ1ab %in% c(0,1,2,3,4,5,6) &\n    T_age > 0 & T_age < 130 ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYYIADLC Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(IADLC__scale = case_when(validiadlc == 1 ~ case_when(\n  T_age >= 12 & T_age < 19 ~ \n    iG1ab + iG1bb + iG1cb + iG1db + iG1eb + iG1fb + iG1gb + iG1hb + iG1nb + iG1ob\n  + iZZ1ab)))\n```\n:::\n\n\n\n\n**sCYYIADLC Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYYIADLCtest <- subset(df, select=c(\"iG1ab\",\"iG1bb\",\"iG1cb\",\"iG1db\",\"iG1eb\",\n                                     \"iG1fb\",\"iG1gb\",\"iG1hb\",\"iG1nb\",\"iG1ob\",\n                                     \"iZZ1ab\"))\nsCYYIADLCdf <- sCYYIADLCtest[complete.cases(sCYYIADLCtest),]\nscyyiadlc_rel <- psych::reliability(sCYYIADLCdf)\n```\n:::\n\n\n\n\n## Youth IADL Performance Scale (sCYYIADLP) {#sCYYIADLP}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information for sCYYIADLP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                            |\n|:--------------|:---------------------------------------------------------------|\n|PROGRAM        |SUITE9_SCALE_CY YOUTH IADL PERFORMANCE_G1_V1.0_P_2015-01-16.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                          |\n|DATE           |01/16/2015                                                      |\n|REVISION DATES |NA                                                              |\n|PURPOSE        |CODE FOR CY YOUTH IADL PERFORMANCE SCALE                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                       |\n\n\n:::\n:::\n\n\n\n\n**sCYYIADLP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYYIADLP variable label information and\n                                          accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iG1aa </td>\n   <td style=\"text-align:left;\"> Meal Preparation - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ba </td>\n   <td style=\"text-align:left;\"> Ordinary Housework - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ca </td>\n   <td style=\"text-align:left;\"> Managing Money - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1da </td>\n   <td style=\"text-align:left;\"> Managing Medications - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ea </td>\n   <td style=\"text-align:left;\"> Phone Use - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1fa </td>\n   <td style=\"text-align:left;\"> Stairs - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ga </td>\n   <td style=\"text-align:left;\"> Shopping - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ha </td>\n   <td style=\"text-align:left;\"> Transportation - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1na </td>\n   <td style=\"text-align:left;\"> Use of Technology - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1oa </td>\n   <td style=\"text-align:left;\"> School Tasks - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1pa </td>\n   <td style=\"text-align:left;\"> Orientation in Familiar Indoor Environment - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYYIADLP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validiadlp = case_when(\n    iG1aa %in% c(0,1,2,3,4,5,6,8) & \n    iG1ba %in% c(0,1,2,3,4,5,6,8) & \n    iG1ca %in% c(0,1,2,3,4,5,6,8) & \n    iG1da %in% c(0,1,2,3,4,5,6,8) & \n    iG1ea %in% c(0,1,2,3,4,5,6,8) & \n    iG1fa %in% c(0,1,2,3,4,5,6,8) & \n    iG1ga %in% c(0,1,2,3,4,5,6,8) & \n    iG1ha %in% c(0,1,2,3,4,5,6,8) & \n    iG1na %in% c(0,1,2,3,4,5,6,8) & \n    iG1oa %in% c(0,1,2,3,4,5,6,8) & \n    iZZ1aa %in% c(0,1,2,3,4,5,6,8) &\n    T_age > 0 & T_age < 130 ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYYIADLP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYYIADLP = case_when(validiadlp == 1 ~ case_when(\n  T_age > 12 & T_age < 19 ~ \n    ((case_when(iG1aa %in% c(0,1,2,3,4,5,6) ~ + iG1aa, iG1aa == 8 ~ + 6)) + \n    (case_when(iG1ba %in% c(0,1,2,3,4,5,6) ~ + iG1ba, iG1ba == 8 ~ + 6)) + \n    (case_when(iG1ca %in% c(0,1,2,3,4,5,6) ~ + iG1ca, iG1ca == 8 ~ + 6)) + \n    (case_when(iG1da %in% c(0,1,2,3,4,5,6) ~ + iG1da, iG1da == 8 ~ + 6)) + \n    (case_when(iG1ea %in% c(0,1,2,3,4,5,6) ~ + iG1ea, iG1ea == 8 ~ + 6)) +\n    (case_when(iG1fa %in% c(0,1,2,3,4,5,6) ~ + iG1fa, iG1fa == 8 ~ + 6)) +\n    (case_when(iG1ga %in% c(0,1,2,3,4,5,6) ~ + iG1ga, iG1ga == 8 ~ + 6)) +\n    (case_when(iG1ha %in% c(0,1,2,3,4,5,6) ~ + iG1ha, iG1ha == 8 ~ + 6)) +\n    (case_when(iG1na %in% c(0,1,2,3,4,5,6) ~ + iG1na, iG1na == 8 ~ + 6)) +\n    (case_when(iG1oa %in% c(0,1,2,3,4,5,6) ~ + iG1oa, iG1oa == 8 ~ + 6)) + \n    (case_when(iZZ1aa %in% c(0,1,2,3,4,5,6) ~ + iZZ1aa, iZZ1aa == 8 ~ + 6))))))\n```\n:::\n\n\n\n\n**sCYYIADLP Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYYIADLPtest <- subset(df, select=c(\"iG1aa\",\"iG1ba\",\"iG1ca\",\"iG1da\",\"iG1ea\"\n                                     ,\"iG1fa\",\"iG1ga\",\"iG1ha\",\"iG1na\",\"iG1oa\",\n                                     \"iZZ1aa\"))\nsCYYIADLPdf <- sCYYIADLPtest[complete.cases(sCYYIADLPtest),]\nsCYYIADLPdf <- sCYYIADLPdf %>% mutate(\n  iG1aa = case_when(iG1aa == 8 ~ 6, TRUE ~ as.numeric(iG1aa)),\n  iG1ba = case_when(iG1ba == 8 ~ 6, TRUE ~ as.numeric(iG1ba)),\n  iG1ca = case_when(iG1ca == 8 ~ 6, TRUE ~ as.numeric(iG1ca)), \n  iG1da = case_when(iG1da == 8 ~ 6, TRUE ~ as.numeric(iG1da)), \n  iG1ea = case_when(iG1ea == 8 ~ 6, TRUE ~ as.numeric(iG1ea)), \n  iG1fa = case_when(iG1fa == 8 ~ 6, TRUE ~ as.numeric(iG1fa)),\n  iG1ga = case_when(iG1ga == 8 ~ 6, TRUE ~ as.numeric(iG1ga)),\n  iG1ha = case_when(iG1ha == 8 ~ 6, TRUE ~ as.numeric(iG1ha)), \n  iG1na = case_when(iG1na == 8 ~ 6, TRUE ~ as.numeric(iG1na)), \n  iG1oa = case_when(iG1oa == 8 ~ 6, TRUE ~ as.numeric(iG1oa)), \n  iZZ1aa = case_when(iG1da == 8 ~ 6, TRUE ~ as.numeric(iG1da)))\nscyyiadlp_rel <- psych::reliability(sCYYIADLPdf)\n```\n:::\n\n\n\n\n## Caregiver Distress Algorithm (iCCareD)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\nCalculating the Caregiver Distress Algorithm requires that the Parenting Strengths Scale (\\@ref(sCYPS)), Aggressive Behaviours Scale (\\@ref(sCYABS)) and the Disruptive and Aggressive Behaviour Scales (\\@ref(sCYDABS)) have also been calculated.\n\n**Caregiver Distress Algorithm Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>Caregiver Distress Algorithm variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iC9b </td>\n   <td style=\"text-align:left;\"> Task Initiation </td>\n   <td style=\"text-align:left;\"> 0,1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE15a </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Stealing </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE15d </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Elopement attempts/threats </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE15e </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Bullying peers </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE18a </td>\n   <td style=\"text-align:left;\"> Child/Youth with Behaviour Problems can be Redirected </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ccc </td>\n   <td style=\"text-align:left;\"> Labile Affect </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1hhh </td>\n   <td style=\"text-align:left;\"> Compulsive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ss </td>\n   <td style=\"text-align:left;\"> Sad, Pained or Worried Facial Expressions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1tt </td>\n   <td style=\"text-align:left;\"> Crying, Tearfulness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1zzz </td>\n   <td style=\"text-align:left;\"> Wakes Up Multiple Time at Night </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE6 </td>\n   <td style=\"text-align:left;\"> Sleep Problems Related to Hypomania or Mania </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8a </td>\n   <td style=\"text-align:left;\"> Strong and Supportive Relationship with Family </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ5a </td>\n   <td style=\"text-align:left;\"> Frequency that child/Youth Complains or shows Evidence of Pain </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19a </td>\n   <td style=\"text-align:left;\"> Conflict with or Repeated Criticism of Family </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19d </td>\n   <td style=\"text-align:left;\"> Family are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19e </td>\n   <td style=\"text-align:left;\"> Friends are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX16a </td>\n   <td style=\"text-align:left;\"> Most Recent Self Injurious Attempt </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX16c </td>\n   <td style=\"text-align:left;\"> Preoccupation with Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2b </td>\n   <td style=\"text-align:left;\"> Intimidation of Others or Threatened Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2c </td>\n   <td style=\"text-align:left;\"> Violent Ideation </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ap </td>\n   <td style=\"text-align:left;\"> Parental Addiction or Substance Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1au </td>\n   <td style=\"text-align:left;\"> Witnessed Domestic Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY9 </td>\n   <td style=\"text-align:left;\"> Major Life Stressors for Parent(s)/Primary Caregiver(s) - Last 90 Days </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY7b </td>\n   <td style=\"text-align:left;\"> Sibling(s) - Has (Have) Current Developmental, or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8a </td>\n   <td style=\"text-align:left;\"> Strong and Supportive Relationship with Family </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY7a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver has Current Development or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Caregiver Distress Algorithm Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(ProactiveItem = \n            (case_when(iE15a== 0 ~ + 0, iE15a %in% c(1,2,3,4,5) ~ + 1)) +\n            (case_when(iE15d== 0 ~ + 0, iE15d %in% c(1,2,3,4,5) ~ + 1)) + \n            (case_when(iE15e== 0 ~ + 0, iE15e %in% c(1,2,3,4,5) ~ + 1)) + \n            (case_when(iX16c== 0 ~ + 0, iX16c %in% c(1,2,3,4,5) ~ + 1)) +        \n            (case_when(iX2a== 0 ~ + 0, iX2a %in% c(1,2,3,4,5) ~ + 1)) +           \n            (case_when(iX2b== 0 ~ + 0, iX2b %in% c(1,2,3,4,5) ~ + 1)) +           \n            (case_when(iX2c== 0 ~ + 0, iX2c %in% c(1,2,3,4,5) ~ + 1)))\n\ndf <- df %>% mutate(devMHsubst_Issues = \n              (case_when(iY7a & iY1ap == 0 ~ 0, TRUE ~ 0) +\n              case_when(iY7a == 1 ~ 1, TRUE ~ 0) +\n              case_when(iY1ap %in% c(1,2,3,4,5) ~ 1)))\n\ndf <- df %>% mutate(familyfunction = \n              (case_when(iF8a == 1 ~ 1, TRUE ~ 0) +\n              case_when(iF8a == 0 ~  0, TRUE ~ 0) + \n              case_when(iP19d | iP19e == 1 ~  1, TRUE ~ 0) + \n              case_when(iP19d & iP19e == 0 ~  0, TRUE ~ 0) + \n              case_when(iY7a & iY1ap == 0 ~  0, TRUE ~ 0) + \n              case_when(iY7a == 1 | iY1ap %in% c(1,2,3,4,5) ~  1, TRUE ~ 0) + \n              case_when(iY7b == 1 ~  1, TRUE ~ 0) + \n              case_when(iY7b == 0 ~  0, TRUE ~ 0)))\n                      \ndf <- df %>% mutate(validiccared = case_when(\n    iJ5a %in% c(0,1,2,3) & \n    iE1zzz %in% c(0,1,2,3,4) & \n    iE1ccc %in% c(0,1,2,3,4) & \n    iY9 %in% c(0,1) & \n    iX1a %in% c(0,1,2,3,4,5) & \n    iE1hhh %in% c(0,1,2,3,4) & \n    iP19a %in% c(0,1,8) & \n    iE1tt %in% c(0,1,2,3,4) & \n    iY1au %in% c(0,1,2,3,4,5) & \n    iE1ss %in% c(0,1,2,3,4) & \n    iE6 %in% c(0,1,2,3,4,5) & \n    iC9b %in% c(0,1,8) & \n    iE18a %in% c(0,1) &\n    sCYPS %in% c(0:12) & # parenting scale\n    sCYPSS %in% c(0:12) & # positive symptom scale\n    sCYDABS %in% c(0:20) ~ 1, TRUE ~ 0)) # agressive behaviour scale\n```\n:::\n\n\n\n\n**iCCareD Algorithm Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(iCCareD = case_when(validiccared == 1 ~ \n      \n    (case_when(ProactiveItem == 0 ~ case_when(\n    sCYPS == 12 ~ case_when(\n      sCYABS == 0 ~ case_when(\n        devMHsubst_Issues == 0 ~ case_when(\n          iE1ccc == 0 ~ 1, iE1ccc %in% c(1,2,3,4) ~ 2),\n        devMHsubst_Issues == 1 ~ 2),\n      sCYABS >= 1 ~ case_when(\n        iC9a == 0 ~ case_when(\n          iY9 == 0 ~ 1, iY9 == 1 ~ 2),\n        iC9a %in% c(1,8) ~ case_when(\n          iX1a == 0 ~ 2, iX1a %in% c(1,2,3,4,5) ~ 3))),\n    sCYPS %in% c(10,11) ~ case_when(\n      devMHsubst_Issues == 0 ~ 1, \n      devMHsubst_Issues == 1 ~ 3),\n    sCYPS %in% c(0,1,2,3,4,5,6,7,8,9) ~ case_when(\n      iJ5a == 0 ~ case_when(\n        iE1zzz == 0 ~ 2, iE1zzz %in% c(1,2,3,4) ~ 3),\n      iJ5a %in% c(1,2,3) ~ 4)), TRUE ~ 0) +\n  \n    case_when(ProactiveItem %in% c(1,2) ~ case_when(\n    familyfunction == 0 ~ case_when(\n      sCYDABS %in% c(0,1,2,3,4,5,6,7) ~ case_when(\n        iY1au == 0 ~ 1, iY1au %in% c(1,2,3,4,5) ~ 3),\n      sCYDABS >= 8 ~ case_when(\n        iE1ss == 0 ~ 1, iE1ss %in% c(1,2,3,4) ~ 3)),\n    familyfunction == 1 ~ case_when(\n      iE1hhh == 0 ~ case_when(\n        iY9 == 0 ~ 2, iY9 == 1 ~ 4),\n      iE1hhh %in% c(1,2,3,4) ~ 4),\n    familyfunction >= 2 ~ case_when(\n      iP19a == 0 ~ case_when(\n        iE1ttt == 0 ~ 2, iE1ttt %in% c(1,2,3,4) ~ 3),\n      iP19a == 1 ~ 4)), TRUE ~ 0) + \n  \n    case_when(ProactiveItem %in% c(3,4,5,6,7) ~ case_when(\n    sCYPS %in% c(7,8,9,10,11,12) ~ case_when(\n      iE6 %in% c(1,2,3,4,5) ~ 5, \n      iE6 == 0 ~ case_when(\n        devMHsubst_Issues == 0 ~ case_when(\n          iX1a %in% c(0,1) ~ case_when(\n            sCYDABS %in% c(0,1,2,3,4,5,6,7,8,9,10) ~ 2, \n            sCYDABS >= 11 ~ 4),\n          iX1a %in% c(2,3,4,5) ~ 4),\n        devMHsubst_Issues == 1 ~ case_when(\n          iE18a == 1 ~ 3, \n          iE18a == 0 ~ 5))),\n    sCYPS %in% c(0,1,2,3,4,5,6) ~ case_when(\n      iC9b == 0 ~ 4, iC9b %in% c(1,8) ~ 5)), TRUE ~ 0))))\n```\n:::\n\n\n\n\n## Disruptive and Aggressive Behaviour Scale - Short Version (DABS-S)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**DABS-S Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>DABS-S scale variable label information and \n                              accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3l </td>\n   <td style=\"text-align:left;\"> Verbal abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3m </td>\n   <td style=\"text-align:left;\"> Physical Abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3n </td>\n   <td style=\"text-align:left;\"> Socially Inappropriate or Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3q </td>\n   <td style=\"text-align:left;\"> Destructive Behaviour Towards Property </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**DABS-S Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validdabss = case_when(\n  iE3l %in% c(0,1,2,3,4) &\n  iE3m %in% c(0,1,2,3,4) &\n  iE3n %in% c(0,1,2,3,4) &\n  iE3q %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**DABS-S Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(DABSS = case_when(validdabss == 1 ~\n                                          iE3l + iE3m + iE3n + iE3q))\n```\n:::\n\n\n\n\n**DABS-S Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nDABSStest <- subset(df, select=c(\"iE3l\",\"iE3m\",\"iE3n\",\"iE3q\"))\nDABSSdf <- DABSStest[complete.cases(DABSStest),]\ndabss_rel <- psych::reliability(DABSSdf)\n```\n:::\n\n\n\n\n## Externalizing Scale - Short Version (EXTS)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**Externalizing Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>Externalizing scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE15a </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Stealing </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE15e </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Bullying peers </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3l </td>\n   <td style=\"text-align:left;\"> Verbal abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2b </td>\n   <td style=\"text-align:left;\"> Intimidation of Others or Threatened Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2c </td>\n   <td style=\"text-align:left;\"> Violent Ideation </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Externalizing Scale Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validexts = case_when(\n    iE15a %in% c(0,1,2,3,4,5) &\n    iE15e %in% c(0,1,2,3,4,5) &\n    iE1oo %in% c(0,1,2,3,4) &\n    iE3l %in% c(0,1,2,3,4) &\n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2b %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Externalizing Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(EXTS = case_when(validexts == 1 ~ \n   (case_when(iE15a == 0 ~ 0, iE15a %in% c(1,2,3,4,5) ~ 1)) + \n   (case_when(iE15e == 0 ~ 0, iE15e %in% c(1,2,3,4,5) ~ 1)) + \n   (case_when(iE1oo == 0 ~ 0, iE1oo %in% c(1,2,3,4) ~ 1)) + \n   (case_when(iE3l == 0 ~ 0, iE3l %in% c(1,2,3,4) ~ 1)) +\n   (case_when(iX2a == 0 ~ 0, iX2a %in% c(1,2,3,4,5) ~ 1)) +\n   (case_when(iX2b == 0 ~ 0, iX2b %in% c(1,2,3,4,5) ~ 1)) +\n   (case_when(iX2c == 0 ~ 0, iX2c %in% c(1,2,3,4,5) ~ 1))))\n```\n:::\n\n\n\n\n**Externalizing Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nEXTStest <- subset(df, select=c(\"iE15a\",\"iE15e\",\"iE1oo\",\"iE3l\",\"iX2a\",\"iX2b\",\n                                \"iX2c\"))\nEXTSdf <- EXTStest[complete.cases(EXTStest),]\nEXTSdf <- EXTSdf %>% mutate(\n  iE15a = case_when(iE15a %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\n  iE15e = case_when(iE15e %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\n  iE1oo = case_when(iE1oo %in% c(1,2,3,4) ~ 1, TRUE ~ 0),  \n  iE3l = case_when(iE3l %in% c(1,2,3,4) ~ 1, TRUE ~ 0), \n  iX2a = case_when(iX2a %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0), \n  iX2b = case_when(iX2b %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0), \n  iX2c = case_when(iX2c %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0))\nexts_rel <- psych::reliability(EXTSdf)\n```\n:::\n\n\n\n\n## Internalizing Scale - Short Version (INTS)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**Internalizing Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>Internalizing scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eee </td>\n   <td style=\"text-align:left;\"> Repetitive Anxious Complaints/Concerns (non-health realted) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eeee </td>\n   <td style=\"text-align:left;\"> Hypervigilance </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1fff </td>\n   <td style=\"text-align:left;\"> Expressions, Including Non-verbal of Unrealistic Fears </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1kkk </td>\n   <td style=\"text-align:left;\"> Episodes of Panic </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1rrr </td>\n   <td style=\"text-align:left;\"> Lack of Motivation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1sss </td>\n   <td style=\"text-align:left;\"> Expressions, Including Non-verbal, of a Lack of Pleasure in Life </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ttt </td>\n   <td style=\"text-align:left;\"> Withdrawal from Activities of Interest </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1vv </td>\n   <td style=\"text-align:left;\"> Made Negative Statements </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ww </td>\n   <td style=\"text-align:left;\"> Self-Deprecation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1xx </td>\n   <td style=\"text-align:left;\"> Expressions of Guilt or Shame </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yy </td>\n   <td style=\"text-align:left;\"> Expressions of Hopelessness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Internalizing Scale Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validints = case_when(\n    iE1eee %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) &\n    iE1fff %in% c(0,1,2,3,4) &\n    iE1kkk %in% c(0,1,2,3,4) &\n    iE1rrr %in% c(0,1,2,3,4) &\n    iE1sss %in% c(0,1,2,3,4) &\n    iE1ttt %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Internalizing Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(INTS = case_when(validints == 1 ~ \n                                       iE1eee + iE1eeee + iE1fff + iE1kkk +\n                                       iE1rrr + iE1sss + iE1ttt + iE1vv +\n                                       iE1ww + iE1xx + iE1yy))\n```\n:::\n\n\n\n\n**Internalizing Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nINTStest <- subset(df, select=c(\"iE1eee\",\"iE1eeee\",\"iE1fff\",\"iE1kkk\",\"iE1rrr\",\n                                \"iE1sss\",\"iE1ttt\",\"iE1vv\",\"iE1ww\",\"iE1xx\",\n                                \"iE1yy\"))\nINTSdf <- INTStest[complete.cases(INTStest),]\nints_rel <- psych::reliability(INTSdf)\n```\n:::\n\n\n\n\n## Activites of Daily Living - More Complex (ADLcomplex)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**ADL More Complex Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>ADL More Complex scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iG2a </td>\n   <td style=\"text-align:left;\"> Bathing - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2b </td>\n   <td style=\"text-align:left;\"> Personal Hygiene - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2c </td>\n   <td style=\"text-align:left;\"> Dressing Upper Body - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2d </td>\n   <td style=\"text-align:left;\"> Dressing Lower Body - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**ADL More Complex Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validadlcomplex = case_when(\n    iG2a %in% c(0,1,2,3,4,5,6,8) & \n    iG2b %in% c(0,1,2,3,4,5,6,8) & \n    iG2c %in% c(0,1,2,3,4,5,6,8) & \n    iG2d %in% c(0,1,2,3,4,5,6,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**ADL More Complex Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(ADLcomplex = case_when(validadlcomplex == 1 ~ \n      (case_when(iG2a == 0 ~ 0, iG2a %in% c(1,2,3,4,5) ~ 1, iG2a == 6 ~ 2)) + \n      (case_when(iG2b == 0 ~ 0, iG2b %in% c(1,2,3,4,5) ~ 1, iG2b == 6 ~ 2)) +\n      (case_when(iG2c == 0 ~ 0, iG2c %in% c(1,2,3,4,5) ~ 1, iG2c == 6 ~ 2)) +\n      (case_when(iG2d == 0 ~ 0, iG2d %in% c(1,2,3,4,5) ~ 1, iG2d == 6 ~ 2))))\n```\n:::\n\n\n\n\n**ADL More Complex Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nADLcomplextest <- subset(df, select=c(\"iG2a\",\"iG2b\",\"iG2c\",\"iG2d\"))\n                                      \nADLcomplexdf <- ADLcomplextest[complete.cases(ADLcomplextest),]\nADLcomplexdf <- ADLcomplexdf %>% mutate(\n  iG2a = case_when(iG2a == 0 ~ 0, iG2a %in% c(1,2,3,4,5) ~ 1, iG2a == 6 ~ 2), \n  iG2b = case_when(iG2b == 0 ~ 0, iG2b %in% c(1,2,3,4,5) ~ 1, iG2b == 6 ~ 2),\n  iG2c = case_when(iG2c == 0 ~ 0, iG2c %in% c(1,2,3,4,5) ~ 1, iG2c == 6 ~ 2), \n  iG2d = case_when(iG2d == 0 ~ 0, iG2d %in% c(1,2,3,4,5) ~ 1, iG2d == 6 ~ 2))\nadlcomplex_rel <- psych::reliability(ADLcomplexdf)\n```\n:::\n\n\n\n\n## Activities of Daily Living - Less Complex (ADLlesscomplex)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**ADL Less Complex Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>ADL Less Complex scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iG2f </td>\n   <td style=\"text-align:left;\"> Locomotion - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2h </td>\n   <td style=\"text-align:left;\"> Toilet Use - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2j </td>\n   <td style=\"text-align:left;\"> Eating - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**ADL Less Complex Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validadlless = case_when(\n  iG2f %in% c(0,1,2,3,4,5,6,8) & \n  iG2h %in% c(0,1,2,3,4,5,6,8) &\n  iG2j %in% c(0,1,2,3,4,5,6,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**ADL Less Complex Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(ADLlesscomplex = case_when(validadlless == 1 ~ \n  (case_when(iG2f == 0 ~ 0, iG2f %in% c(1,2,3,4,5) ~ 1, iG2f == 6 ~ 2))+\n  (case_when(iG2h == 0 ~ 0, iG2h %in% c(1,2,3,4,5) ~ 1, iG2h == 6 ~ 2))+\n  (case_when(iG2j == 0 ~ 0, iG2j %in% c(1,2,3,4,5) ~ 1, iG2j == 6 ~ 2))))\n```\n:::\n\n\n\n\n**ADL Less Complex Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nADLlesstest <- subset(df, select=c(\"iG2f\",\"iG2h\",\"iG2j\"))\nADLlessdf <- ADLlesstest[complete.cases(ADLlesstest),]\nADLlessdf <- ADLlessdf %>% mutate(\n  iG2f = case_when(iG2f == 0 ~ 0, iG2f %in% c(1,2,3,4,5) ~ 1, iG2f == 6 ~ 2), \n  iG2h = case_when(iG2h == 0 ~ 0, iG2h %in% c(1,2,3,4,5) ~ 1, iG2h == 6 ~ 2),\n  iG2j = case_when(iG2j == 0 ~ 0, iG2j %in% c(1,2,3,4,5) ~ 1, iG2j == 6 ~ 2))\nadlless_rel <- psych::reliability(ADLlessdf)\n```\n:::\n\n\n\n\n## Cognitive Functioning Scale\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**Cognitive Functioning Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>Cognitive Functioning scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iC1d </td>\n   <td style=\"text-align:left;\"> Cognitive Skills for Daily Decision-Making </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iC2a </td>\n   <td style=\"text-align:left;\"> Short-Term Memory Ok </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iC2b </td>\n   <td style=\"text-align:left;\"> Procedural Memory Ok </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iD1 </td>\n   <td style=\"text-align:left;\"> Making Self Understood (Expression) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iD2 </td>\n   <td style=\"text-align:left;\"> Ability to Understand Others (Comprehension) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Cognitive Functioning Scale Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcognitive = case_when(\n    iC1d %in% c(0,1,2,3,4,5) &\n    iC2a %in% c(0,10) &\n    iC2b %in% c(0,1) & \n    iD1 %in% c(0,1,2,3,4) & \n    iD2 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Cognitive Functioning Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cognitivefunction = case_when(validcognitive == 1 ~ \n        (case_when(iC1d == 0 ~ 0, iC1d %in% c(1,2,3,4,5) ~ 1)) +\n        (case_when(iC2a == 0 ~ 0, iC2a == 1 ~ 1)) +\n        (case_when(iC2b == 0 ~ 0, iC2b == 1 ~ 1)) +\n        (case_when(iD1 == 0 ~ 0, iD1 %in% c(1,2,3,4) ~ 1)) +\n        (case_when(iD2 == 0 ~ 0, iD2 %in% c(1,2,3,4) ~ 1))))\n```\n:::\n\n\n\n\n**Cognitive Functioning Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ncognitivefunctiontest <- subset(df, select=c(\"iC1d\",\"iC2a\",\"iC2b\",\"iD1\",\"iD2\"))\ncognitivefunctiondf <- cognitivefunctiontest[complete.cases(cognitivefunctiontest),]\ncognitivefunctiondf <- cognitivefunctiondf %>% mutate(\n  iC1d = case_when(iC1d %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0), \n  iD1 = case_when(iD1 %in% c(1,2,3,4) ~ 1, TRUE ~ 0), \n  iD2 = case_when(iD2 %in% c(1,2,3,4) ~ 1, TRUE ~ 0))\ncognitivefunc_rel <- psych::reliability(cognitivefunctiondf)\n```\n:::\n\n\n\n\n## Caregiver Distress Scale\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**Caregiver Distress Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>Caregiver Distress scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iQ4 </td>\n   <td style=\"text-align:left;\"> Finances (economic trade-offs) </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver is Unable or Unwilling to Continue in Caring Activites </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8b </td>\n   <td style=\"text-align:left;\"> Parent/ Primary Caregiver Expresses Feelings of Distress, Anger or Depression </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY9 </td>\n   <td style=\"text-align:left;\"> Major Life Stressors for Parent(s)/Primary Caregiver(s) - Last 90 Days </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY7a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver has Current Development or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Caregiver Distress Scale Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcaregiver = case_when(\n    iY9 %in% c(0,1,8) & \n    iY8a %in% c(0,1) & \n    iY8b %in% c(0,1) & \n    iQ4 %in% c(0,1) & \n    iY7a %in% c(0,1) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Caregiver Distress Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(caregiverdistress = case_when(validcaregiver == 1 ~ case_when(\n  iY9 == 8 ~ 0, iY9 == 0 ~ 0, iY9 == 1 ~ 1) + iY8a + iY8b + iQ4 + iY7a))\n```\n:::\n\n\n\n\n**Caregiver Distress Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ncaregiverdistresstest <- subset(df, select=c(\"iY9\",\"iY8a\",\"iY8b\",\"iQ4\",\"iY7a\"))\n                                      \ncaregiverdistressdf <- caregiverdistresstest[complete.cases(caregiverdistresstest),]\ncaregiverdistressdf <- caregiverdistressdf %>% mutate(\n  iY9 = case_when(iY9 == 1 ~ 1, TRUE ~ 0))\ncaregiverdist_rel <- psych::reliability(caregiverdistressdf)\n```\n:::\n\n\n\n\n## CY Risk of School Distruption Scale (sCYSchDis)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**sCYSchDis Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYSchDis scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iBB4c </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB10 </td>\n   <td style=\"text-align:left;\"> Strong, Persistent Dissatisfaction with School </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11a </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Refuse to Attend School </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11b </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Removed Due to Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5a </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Increase in Lateness or Absenteeism </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5b </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Poor Productivity or Distruptiveness at School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5e </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Conflict with School Staff </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5f </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Expresses Intent to Quit School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYSchDis Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validSchDis = case_when(\n      iBB5a %in% c(0,1) & \n      iBB5b %in% c(0,1) &\n      iBB5f %in% c(0,1) &\n      iBB5e %in% c(0,1) & \n      iBB10 %in% c(0,1,2,3) & \n      iBB11a %in% c(0,1) & \n      iBB11b %in% c(0,1) &\n      iBB4c != 0 | 1 ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYSchDis Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYSchDis = case_when(validSchDis == 1 ~ case_when(\n  iBB10 == 0 ~ 0, iBB10 %in% c(1,2) ~ 1, iBB10 == 3 ~ 2) + iBB5a + iBB5b +\n    iBB5f + iBB5e + iBB11a + iBB11b))\n```\n:::\n\n\n\n\n**sCYSchDis Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYSchDistest <- subset(df, select=c(\"iBB5a\",\"iBB5b\",\"iBB5f\",\"iBB5e\",\n                                     \"iBB10\",\"iBB11a\",\"iBB11b\"))\nsCYSchDisdf <- sCYSchDistest[complete.cases(sCYSchDistest),]\nsCYSchDisdf <- sCYSchDisdf %>% mutate(\n  iBB10 = case_when(iBB10 == 3 ~ 2, iBB10 %in% c(1,2) ~ 1, TRUE ~ 0))\nscyschdis_rel <- psych::reliability(sCYSchDisdf)\n```\n:::\n\n\n\n\n## Sensory Processing Difficulties (sCYSensDiff)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**sCYSensDiff Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYSensDiff scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> cE3ab </td>\n   <td style=\"text-align:left;\"> Sensory Seeking Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> cE3ac </td>\n   <td style=\"text-align:left;\"> Sensory Avoiding Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iD28 </td>\n   <td style=\"text-align:left;\"> Gross Motor Skills </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iD29 </td>\n   <td style=\"text-align:left;\"> Fine Motor Skills </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3aa </td>\n   <td style=\"text-align:left;\"> Excessive or Unusual Reaction to Sensory Stimuli </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYSensDiff Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validSensDiff = case_when( \n    iD28 %in% c(0,1,2,3,4) &\n    iD29 %in% c(0,1,2,3,4) &\n    iE3aa %in% c(0,1,2,3,4) &\n    oE3ab %in% c(0,1,2,3,4) & \n    oE3ac %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYSensDiff Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYSensDiff = case_when(validSensDiff == 1 ~ \n            iD28 + iD29 + iE3aa + oE3ab + oE3ac))\n```\n:::\n\n\n\n\n**sCYSensDiff Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYSensDifftest <- subset(df, select=c(\"iD28\",\"iD29\",\"iE3aa\",\"oE3ab\",\"oE3ac\"))\nsCYSensDiffdf <- sCYSensDifftest[complete.cases(sCYSensDifftest),]\nscysensdiff_rel <- psych::reliability(sCYSensDiffdf)\n```\n:::\n\n\n\n\n## CY Relational Strenghts Scale (sCYRelStren)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**sCYRelStren Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>sCYRelStren scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iF15c </td>\n   <td style=\"text-align:left;\"> School Engagement </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF15d </td>\n   <td style=\"text-align:left;\"> Strong and supportive Relationship with Friends/Peers </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF15e </td>\n   <td style=\"text-align:left;\"> Has at Least One Friend with whom Visits/Plays/Socializes Regularly </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF15f </td>\n   <td style=\"text-align:left;\"> Social Inclusion by Peers </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8a </td>\n   <td style=\"text-align:left;\"> Strong and Supportive Relationship with Family </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP8 </td>\n   <td style=\"text-align:left;\"> Strengths - Reports having a confidant </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8a </td>\n   <td style=\"text-align:left;\"> Strong and Supportive Relationship with Family </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**sCYRelStren Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validrelstren = case_when(\n    iP8 %in% c(0,1) & \n    iF15c %in% c(0,1) &\n    iF8a %in% c(0,1) &\n    iF15d %in% c(0,1) &\n    iF15e %in% c(0,1) &\n    iF15f %in% c(0,1) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**sCYRelStren Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCYRelStren = case_when(validrelstren == 1 ~ \n        (case_when(iP8 == 0 ~ 1, iP8 == 1 ~ 0)) +\n        (case_when(iF15c == 0 ~ 1, iF15c == 1 ~ 0)) +\n        (case_when(iF8a == 0 ~ 1, iF8a == 1 ~ 0)) +\n        (case_when(iF15d == 0 ~ 1, iF15d == 1 ~ 0)) +\n        (case_when(iF15e == 0 ~ 1, iF15e == 1 ~ 0)) +\n        (case_when(iF15f == 0 ~ 1, iF15f == 1 ~ 0))))\n```\n:::\n\n\n\n\n**sCYRelStren Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCYRelStrentest <- subset(df, select=c(\"iP8\",\"iF15c\",\"iF8a\",\"iF15d\",\"iF15e\",\n                                       \"iF15f\"))\nsCYRelStrendf <- sCYRelStrentest[complete.cases(sCYRelStrentest),]\nsCYRelStrendf <- sCYRelStrendf %>% mutate(\n  iP8 = case_when(iP8 == 1 ~ 0, TRUE ~ 1), \n  iF15c = case_when(iF15c == 1 ~ 0, TRUE ~ 1), \n  iF8a = case_when(iF8a == 1 ~ 0, TRUE ~ 1), \n  iF15d = case_when(iF15d == 1 ~ 0, TRUE ~ 1), \n  iF15e = case_when(iF15e == 1 ~ 0, TRUE ~ 1), \n  iP8 = case_when(iF15f == 1 ~ 0, TRUE ~ 1))\nscyrelstren_rel <- psych::reliability(sCYRelStrendf)\n```\n:::\n\n\n\n\n## Adverse Life Events Inventory for Children (ALEIC)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**ALEIC Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>ALEIC variable label information and \n                                         accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iB12 </td>\n   <td style=\"text-align:left;\"> Residential Instability Over Last 2 Years </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34a </td>\n   <td style=\"text-align:left;\"> History of Care - Emotional Neglect </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34b </td>\n   <td style=\"text-align:left;\"> History of Care - Physical Needs </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34c </td>\n   <td style=\"text-align:left;\"> History of Care - Safety Needs </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB35 </td>\n   <td style=\"text-align:left;\"> Child Raised with Frequent Distruptions in Care </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11b </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Removed Due to Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19d </td>\n   <td style=\"text-align:left;\"> Family are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19g </td>\n   <td style=\"text-align:left;\"> Conflict or Repeated Criticism Between Parents/Primary Caregivers </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iQ5a </td>\n   <td style=\"text-align:left;\"> Home Environment - Disrepair of the Home </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iQ5b </td>\n   <td style=\"text-align:left;\"> Home Environment - Squalid Condition </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aa </td>\n   <td style=\"text-align:left;\"> Serious Accident or Physical Impariment </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ac </td>\n   <td style=\"text-align:left;\"> Death or Loss of Other Close Family Member </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ai </td>\n   <td style=\"text-align:left;\"> Immigration, Including Refugee Status </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aj </td>\n   <td style=\"text-align:left;\"> Lived in War Zone or Area of Violent Conflict (Combatant or Civilian) </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ak </td>\n   <td style=\"text-align:left;\"> Witnessed Severe Accident, Disaster, Terrorism, Violence or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1al </td>\n   <td style=\"text-align:left;\"> Victim of Crime </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1am </td>\n   <td style=\"text-align:left;\"> Victim of Sexual Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1an </td>\n   <td style=\"text-align:left;\"> Victim of Physical Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ao </td>\n   <td style=\"text-align:left;\"> Victim of Emotional Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ap </td>\n   <td style=\"text-align:left;\"> Parental Addiction or Substance Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aq </td>\n   <td style=\"text-align:left;\"> Victim of Bullying </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ar </td>\n   <td style=\"text-align:left;\"> Death or Loss of Parent or Primary Caregiver </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1at </td>\n   <td style=\"text-align:left;\"> Abandoned by Parent(s)/Caregiver(s) </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1au </td>\n   <td style=\"text-align:left;\"> Witnessed Domestic Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver is Unable or Unwilling to Continue in Caring Activites </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY9 </td>\n   <td style=\"text-align:left;\"> Major Life Stressors for Parent(s)/Primary Caregiver(s) - Last 90 Days </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY7b </td>\n   <td style=\"text-align:left;\"> Sibling(s) - Has (Have) Current Developmental, or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**ALEIC Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validALEIC = case_when( \n      iY1an %in% c(0,1,2,3,4,5) & \n      iP19d %in% c(0,1,8) &\n      iY1ao %in% c(0,1,2,3,4,5) &\n      iY1am %in% c(0,1,2,3,4,5) &\n      iP19g %in% c(0,1,8) &\n      iY1au %in% c(0,1,2,3,4,5) &\n      iB34a %in% c(0,1,2,3) &\n      iB34b %in% c(0,1,2,3) &\n      iB34c %in% c(0,1,2,3) &\n      iQ5a %in% c(0,1,8) & \n      iQ5b %in% c(0,1,8) & \n      iY1at %in% c(0,1,2,3,4,5) & \n      iY9 %in% c(0,1,8) & \n      iY8a %in% c(0,1,8) & \n      iY1ap %in% c(0,1,2,3,4,5) & \n      iF8a %in% c(0,1) & \n      iB35 %in% c(0,1) &\n      iB12 %in% c(0,1) & \n      iY1aq %in% c(0,1,2,3,4,5) & \n      iY7b %in% c(0,1) & \n      iBB11b %in% c(0,1) & \n      iY1ac %in% c(0,1,2,3,4,5) & \n      iY1ar %in% c(0,1,2,3,4,5) & \n      iY1aa %in% c(0,1,2,3,4,5) & \n      iY1ak %in% c(0,1,2,3,4,5) & \n      iY1al %in% c(0,1,2,3,4,5) & \n      iY1aj %in% c(0,1,2,3,4,5) & \n      iY1ai %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**ALEIC Recoded Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(\nxiY1an = case_when(iY1an %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),  \nxiP19d = case_when(iP19d %in% c(0,8) ~ 0, TRUE ~ 1),\nxiY1ao = case_when(iY1ao %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0), \nxiY1am = case_when(iY1am %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0), \nxiY1au = case_when( iY1au %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiP19g = case_when(iP19g %in% c(0,8) ~ 0, TRUE ~ 1), \nxiB34a = case_when(iB34a %in% c(1,2,3) ~ 1, TRUE ~ 0), \nxiB34b = case_when(iB34b %in% c(1,2,3) ~ 1, TRUE ~ 0), \nxiB34c = case_when(iB34c %in% c(1,2,3) ~ 1, TRUE ~ 0), \nxiQ5a = case_when(iQ5a %in% c(0,8) ~ 0, TRUE ~ 1), \nxiQ5b = case_when(iQ5b %in% c(0,8) ~ 0, TRUE ~ 1), \nxiY1at = case_when(iY1at %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY9 = case_when(iY9 %in% c(0,8) ~ 0, TRUE ~ 1), \nxiY8a = case_when(iY8a %in% c(0,8) ~ 0, TRUE ~ 1), \nxiY1ap = case_when(iY1ap %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY1aq = case_when(iY1aq %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY1ac = case_when(iY1ac %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY1ar = case_when(iY1ar %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY1aa = case_when(iY1aa %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY1ak = case_when(iY1ak %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY1al = case_when(iY1al %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY1aj = case_when(iY1aj %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0),\nxiY1ai = case_when(iY1ai %in% c(1,2,3,4,5) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**ALEIC Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(ALEIC = case_when(validALEIC == 1 ~ \n        (case_when(xiY1an == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiP19d & xiY1ao == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiY1am == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiP19g & xiY1au == 0 ~ 0, TRUE ~ 1) +\n         case_when(xiB34b & xiB34c & xiQ5a & xiQ5b == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiB34a == 0 ~ + 0,  TRUE ~ 1) +\n         case_when(xiY1at & xiY9 & xiY8a == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiY1ap & iF8a == 0 ~ + 0, TRUE ~ 1) +\n         case_when(iB35 & iB12 == 0 ~ 0, TRUE ~ 1) +\n         case_when(xiY1aq == 0 ~ 0, TRUE ~ 1) +\n         case_when(iY7b & iBB11b == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiY1ac & xiY1ar == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiY1aa == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiY1ak & xiY1al == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiY1aj == 0 ~ + 0, TRUE ~ 1) +\n         case_when(xiY1ai == 0 ~ + 0, TRUE ~ 1))))\n\ndf <- df %>% \n    mutate(ALEIC__scale = rowSums(\n    data.frame(\n      PhysAbuse = ifelse(iY1an %in% c(1,2,3,4,5), 1, 0),\n      EmoAbuse = ifelse(iP19d == 1 | iY1ao %in% c(1, 2, 3, 4, 5), 1, 0),\n      SexAbuse = ifelse(iY1am %in% c(1,2,3,4,5), 1, 0),\n      WitnessViolence = ifelse(iP19g == 1 | iY1au %in% c(1, 2, 3, 4, 5), 1, 0),\n      PhysNeglect = ifelse(iB34b %in% c(1,2,3) | iB34c%in% c(1,2,3) | iQ5a ==1 | iQ5b ==1, 1, 0),\n      EmoNeglect = ifelse(iB34a %in% c(1, 2, 3), 1, 0),\n      Neglect = ifelse(iY1at %in% c(1, 2, 3, 4, 5) | iY9 ==1 | iY8a %in% c(1, 2, 3, 4, 5), 1, 0),\n      Parental = ifelse(iY1ap %in% c(1, 2, 3, 4, 5)| iY7a ==1, 1, 0),\n      Placement = ifelse(iB35 ==1 | iB12 ==1, 1, 0),\n      Bullying = ifelse(iY1aq %in% c(1, 2, 3, 4, 5), 1, 0),\n      MHStressors = ifelse(iY7b ==1| iBB11b ==1, 1, 0),\n      DeathLoss = ifelse(iY1ac %in% c(1, 2, 3, 4, 5)| iY1ar %in% c(1, 2, 3, 4, 5), 1, 0),\n      Accident = ifelse(iY1aa %in% c(1, 2, 3, 4, 5), 1, 0),\n      Disaster = ifelse(iY1ak %in% c(1,2,3,4,5)| iY1al %in% c(1,2,3,4,5), 1, 0),\n      WarZone = ifelse(iY1aj %in% c(1,2,3,4,5), 1, 0),\n      Migration = ifelse(iY1ai %in% c(1,2,3,4,5), 1, 0)\n    ), na.rm=TRUE))\n```\n:::\n\n\n\n\n**ALEIC Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nALEICtest <- subset(df, select=c(\"xiY1an\",\"xiP19d\",\"xiY1au\",\"xiY1ao\",\"xiP19g\",\n                                 \"xiY1am\",\"xiB34a\",\"xiB34b\",\"xiB34c\",\"xiQ5a\",\"xiQ5b\",\n                                 \"xiY1at\",\"xiY9\",\"xiY8a\", \"xiY1ap\",\"iB35\",\"iF8a\",\n                                 \"iB12\",\"xiY1aq\",\"iY7a\",\"iBB11b\",\"xiY1ac\",\"xiY1ar\",\n                                 \"xiY1aa\",\"xiY1ak\",\"xiY1al\",\"xiY1aj\",\"xiY1ai\"))\nALEICdf <- ALEICtest[complete.cases(ALEICtest),]\naleic_rel <- psych::reliability(ALEICdf)\n```\n:::\n\n\n\n\n## Communication Scale (sCOMM)\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**Communication Scale Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>Communication scale variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iD1 </td>\n   <td style=\"text-align:left;\"> Making Self Understood (Expression) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iD2 </td>\n   <td style=\"text-align:left;\"> Ability to Understand Others (Comprehension) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Communication Scale Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcomm = case_when(\n  iD1 %in% c(0,1,2,3,4) & \n  iD2 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Communication Scale Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(sCOMM = case_when(validcomm == 1 ~ iD1 + iD2))\n```\n:::\n\n\n\n\n**Communication Scale Reliability**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nsCOMMtest <- subset(df, select=c(\"iD1\",\"iD2\"))\nsCOMMdf <- sCOMMtest[complete.cases(sCOMMtest),]\nscomm_rel <- psych::reliability(sCOMMdf)\n```\n:::\n\n\n\n\n## Scale Summary Table and Scale Reliability Metrics Table\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\nscales <- as.data.frame(subset(df, select = \n                    c(\"sCYPSS\",\"sCYRHO\",\"sCHAMHPS\",\"sCYFAMILY\",\"sCYSLEEP\",\n                     \"sCYANXS\",\"sCYDSI\",\"sCYPEER\",\"sINTERN\",\"sCYPS\",\n                     \"sCYRIChY\",\"sCYYIADLC\",\n                     \"DABSS\",\"INTS\",\"ADLlesscomplex\",\"caregiverdistress\",\n                     \"sCYSensDiff\",\"ALEIC\",\"sCYABS\",\"sASSC\",\"sCYDISTRACT\",\n                     \"sCYADL\",\"sCYDABS\",\"sCYMHANHEDO\",\"sEXTERN\",\n                     \"sCYRISSK\",\"sDbSI\",\n                     \"sCYMHSDeS\",\"sCYYIADLP\",\n                     \"EXTS\",\"ADLcomplex\",\n                     \"cognitivefunction\",\"sCYSchDis\",\"sCYRelStren\",\"sCOMM\")))\n\napply(scales, 2, max)\n\n#Summary Statistics Table\nst_options(plain.ascii = FALSE,       \n           style = \"rmarkdown\", \n           subtitle.emphasis = FALSE,\n           dfSummary.labels.col = FALSE)\nst_options(dfSummary.custom.1 = \n             expression(\n               paste(\"Q1 - Q3 :\",\n                     round(quantile(column_data, probs = .25, type = 2, \n                   names = FALSE, na.rm = TRUE), digits = 1), \" - \",\n                     round(quantile(column_data, probs = .75, type = 2, \n                   names = FALSE, na.rm = TRUE), digits = 1))))\nstats_tbl <- dfSummary(scales, \n            varnumbers   = FALSE,\n            na.col       = FALSE,\n            style        = \"grid\",\n            plain.ascii  = FALSE,\n            headings     = FALSE,\n            graph.magnif = .75, \n            max.distinct.values = 1)\nstats_tbl$Variable <- sub(\"\\\\[.+\\\\]\", \"\", stats_tbl$Variable)\nview(stats_tbl, method = \"viewer\")\n#Reliability Metrics Table \n\nScale <- c(\"sCYPSS\",\"sCYABS\",\"sCYRHO\",\"sASSC\",\"sCYDISTRACT\",\"sCYFAMILY\",\n           \"sCYSLEEP\",\"sCYADL\",\"sCYANXS\",\"sCYDABS\",\"sCYDSI\",\"sCYMHANHEDO\",\n           \"sCYPEER\",\"sEXTERN\",\"sINTERN\",\"sCYPS\",\"sCYSOS\",\"sCYMHSDeS\",\"sCYYIADLC\",\n           \"sCYYIADLP\",\"sDEPRESSION_OLD\",\"sANXIETY_OLD\",\"sMANIA_OLD\",\"DABSS\",\"EXTS\",\n           \"INTS\",\"ADLcomplex\",\"ADLlesscomplex\",\"cognitivefunction\",\"caregiverdistress\",\n           \"sCYSchDis\",\"sCYSensDiff\",\"sCYRelStren\",\"ALEIC\",\"sCOMM\")\nscales_reliability <- rbind(scypss_rel[[\"result.df\"]], scyabs_rel[[\"result.df\"]], \n                        scyrho_rel[[\"result.df\"]], scyassc_rel[[\"result.df\"]], \n                        scydistract_rel[[\"result.df\"]], scyfamily_rel[[\"result.df\"]],\n                        scysleep_rel[[\"result.df\"]], scyadl_rel[[\"result.df\"]],\n                        scyanxs_rel[[\"result.df\"]], scydabs_rel[[\"result.df\"]],\n                        scydsi_rel[[\"result.df\"]], scymhanhedo_rel[[\"result.df\"]], \n                        scypeer_rel[[\"result.df\"]], extern_rel[[\"result.df\"]],\n                        intern_rel[[\"result.df\"]], scyps_rel[[\"result.df\"]], \n                        scysos_rel[[\"result.df\"]],scymhsdes_rel[[\"result.df\"]],\n                        scyyiadlc_rel[[\"result.df\"]], scyyiadlp_rel[[\"result.df\"]],\n                        dabss_rel[[\"result.df\"]],\n                        exts_rel[[\"result.df\"]], ints_rel[[\"result.df\"]],\n                        adlcomplex_rel[[\"result.df\"]], adlless_rel[[\"result.df\"]],\n                        cognitivefunc_rel[[\"result.df\"]],\n                        caregiverdist_rel[[\"result.df\"]],\n                        scyschdis_rel[[\"result.df\"]], scysensdiff_rel[[\"result.df\"]],\n                        scyrelstren_rel[[\"result.df\"]], aleic_rel[[\"result.df\"]],\n                        scomm_rel[[\"result.df\"]])\n\nrownames(scales_reliability) <- Scale[1:32]\n\n#Creating the table with reliability metrics\nrel_metrics <- scales_reliability %>% kbl(caption = \"Reliability metrics for scales \n                                          using the psych::reliability function.\", \n                                          digits = 2)\nrel_metrics %>% kable_styling(bootstrap_options = c(\"hover\",\"condensed\",\"bordered\"),\n                           full_width = F)\n```\n:::\n\n\n\n\n# Calculating CAPs {#CAPs}\n\n## CYMH Attachment CAP (cCYMHATTACH) {#cCYMHATTACH}\n\n**Last Updated:** August 4, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information CYMH Attachment CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                |\n|:--------------|:---------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH ATTACHMENT_G1_V1.0_P_2017-07-05.txt |\n|BY             |Chenyu Liu, Kim Arbeau                              |\n|DATE           |12/02/2014                                          |\n|REVISION DATES |07/05/2017                                          |\n|PURPOSE        |CODE FOR CYMH ATTACHMENT CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                           |\n\n\n:::\n:::\n\n\n\n\n**CYMH Attachment CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Attachment CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iB33 </td>\n   <td style=\"text-align:left;\"> History of Foster Family Placement </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34a </td>\n   <td style=\"text-align:left;\"> History of Care - Emotional Neglect </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34b </td>\n   <td style=\"text-align:left;\"> History of Care - Physical Needs </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB35 </td>\n   <td style=\"text-align:left;\"> Child Raised with Frequent Distruptions in Care </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP16a </td>\n   <td style=\"text-align:left;\"> Seeking Comfort - Severe Reluctance to Accept Comfort from Primary Caregiver when Distressed </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP16b </td>\n   <td style=\"text-align:left;\"> Seeking Comfort - Demonstrates Anger and Ambivalence Towards Caregiver </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP24a </td>\n   <td style=\"text-align:left;\"> Parent(s)/Caregiver(s) - Has (Have) Current Developmental, or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1am </td>\n   <td style=\"text-align:left;\"> Victim of Sexual Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1an </td>\n   <td style=\"text-align:left;\"> Victim of Physical Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ao </td>\n   <td style=\"text-align:left;\"> Victim of Emotional Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ar </td>\n   <td style=\"text-align:left;\"> Death or Loss of Parent or Primary Caregiver </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1at </td>\n   <td style=\"text-align:left;\"> Abandoned by Parent(s)/Caregiver(s) </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1au </td>\n   <td style=\"text-align:left;\"> Witnessed Domestic Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**CYMH Attachment CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n df <-  df %>% mutate(validattach = case_when(\n  iB33 %in% c(0,1,2) & \n    iB34a %in% c(0,1,2,3) & \n    iB34b %in% c(0,1,2,3) & \n    iB35 %in% c(0,1) &\n    iP16a %in% c(0,1,8) & \n    iP16b %in% c(0,1,8) & \n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) & \n    iY1ao %in% c(0,1,2,3,4,5) & \n    iY1ar %in% c(0,1,2,3,4,5) & \n    iY1at %in% c(0,1,2,3,4,5) & \n    iY1au %in% c(0,1,2,3,4,5) & \n    iY7a %in% c(0,1) & \n    T_age <= 12 ~ 1, TRUE ~ 0))\n\ndf <-  df %>% mutate(xcymhattach1 = \n                       case_when(validattach == 1 ~ \n                                               (case_when(iB33 == 2 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34a %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34b %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34c %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB35 == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1am %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1an %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ao %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ap %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ar %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1at %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1au %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY7a == 1 ~ + 1, TRUE ~ 0))))\n\n df <-  df %>% mutate(xcymhattach2 = \n                        case_when(validattach == 1 ~ \n                                               (case_when(iP16a == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iP16b ==1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iP16c == 1 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**CYMH Attachment CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHATTACH = case_when( \n  xcymhattach1 >= 1 & xcymhattach2 >= 1 ~ 1, \n  xcymhattach1 == 0 | xcymhattach2 == 0 ~ 0))\n```\n:::\n\n\n\n\n## CYMH Caffeine Use CAP (cCYMHCAFFE) {#cCYMHCAFFE}\n\n**Last Updated:** March 28, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Caffeine Use CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                  |\n|:--------------|:-----------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH CAFFEINE USE_G1_V1.0_P_2017-07-05.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                |\n|DATE           |12/02/2014                                            |\n|REVISION DATES |07/05/2017                                            |\n|PURPOSE        |CODE FOR CYMH CAFFEINE USE CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                             |\n\n\n:::\n:::\n\n\n\n\n**CYMH Caffeine Use CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Caffeine Use CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iW10 </td>\n   <td style=\"text-align:left;\"> Uses Caffeine or Energy Drinks </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**CYMH Caffeine Use CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n df <-  df %>% mutate('Caffeine Use' = case_when(\n    iW10b %in% c(2,3) ~ 1, \n    iW10b < 2 ~ 0))\n\n  df$'Caffeine Use'[df$'Caffeine Use'== 1] <- \"Triggered\"\n  df$'Caffeine Use'[df$'Caffeine Use'== 0] <- \"Not Triggered\"\n```\n:::\n\n\n\n\n## CYMH Caregiver Distress (cCYMHCAREDIST) {#cCYMHCAREDIST}\n\n**Last Updated:** Apr 29, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Caregiver Distress CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                        |\n|:--------------|:-----------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH CAREGIVER DISTRESS_G1_V1.2_P_2021-10-26.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                      |\n|DATE           |12/02/2014                                                  |\n|REVISION DATES |07/06/2017; 0-5/07/2019; 10/26/2021                         |\n|PURPOSE        |CODE FOR CYMH CAREGIVER DISTRESS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                   |\n\n\n:::\n:::\n\n\n\n\n**CYMH Caregiver Distress CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Caregiver Distress CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iB32a </td>\n   <td style=\"text-align:left;\"> Current Dispute Over Custody or Child/Youth Access - this child/youth </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB32b </td>\n   <td style=\"text-align:left;\"> Current Dispute Over Custody or Child/Youth Access - another child/youth </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19g </td>\n   <td style=\"text-align:left;\"> Conflict or Repeated Criticism Between Parents/Primary Caregivers </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP24a </td>\n   <td style=\"text-align:left;\"> Parent(s)/Caregiver(s) - Has (Have) Current Developmental, or Mental Health Issues </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iQ4 </td>\n   <td style=\"text-align:left;\"> Finances (economic trade-offs) </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ap </td>\n   <td style=\"text-align:left;\"> Parental Addiction or Substance Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver is Unable or Unwilling to Continue in Caring Activites </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8b </td>\n   <td style=\"text-align:left;\"> Parent/ Primary Caregiver Expresses Feelings of Distress, Anger or Depression </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY9 </td>\n   <td style=\"text-align:left;\"> Major Life Stressors for Parent(s)/Primary Caregiver(s) - Last 90 Days </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Caregiver Distress CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcaredist = case_when(\n    iB32a %in% c(0,1) & \n    iB32b %in% c(0,1) & \n    iP19g %in% c(0,1,8) & \n    iQ4 %in% c(0,1) & \n    iY1ap %in% c(0,1,2,3,4,5) & \n    iY7a %in% c(0,1) & \n    iY8a %in% c(0,1,8) & \n    iY8b %in% c(0,1,8) & \n    iY9 %in% c(0,1,8) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhcaredist = case_when(validcaredist == 1 ~ \n             (case_when(iB32a | iB32b == 1 ~ + 1, TRUE ~ 0) +\n              case_when(iP19g == 1 ~ + 1, TRUE ~ 0) +\n              case_when(iQ4 == 1 ~ + 1, TRUE ~ 0) +\n              case_when(iY1ap %in% c(2,3,4,5) ~ + 1, TRUE ~ 0) +\n              case_when(iY7a == 1 ~ + 1, TRUE ~ 0) +\n              case_when(iY8a == 1 ~ + 1, TRUE ~ 0) +\n              case_when(iY8b == 1 ~ + 1, TRUE ~ 0) +\n              case_when(iY9 == 1 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Caregiver Distress CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHCAREDIST = case_when(\n    xcymhcaredist >= 2 ~ 1, TRUE ~ 0))\n  \n df$cCYMHCAREDIST[df$cCYMHCAREDIST== 1] <- \"Triggered\"\n df$cCYMHCAREDIST[df$cCYMHCAREDIST== 0] <- \"Not Triggered\"\n```\n:::\n\n\n\n\n## CYMH Communication CAP (cCYMHCOMM) {#cCYMHCOMM}\n\n**Last Updated:** Apr 29, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n#interRAI Repository Information CYMH Communication CAP\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                   |\n|:--------------|:------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH COMMUNICATION_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                 |\n|DATE           |12/02/2014                                             |\n|REVISION DATES |NA                                                     |\n|PURPOSE        |CODE FOR CYMH COMMUNICATION CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                              |\n\n\n:::\n:::\n\n\n\n\n**CYMH Communication CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Communication CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iD1 </td>\n   <td style=\"text-align:left;\"> Making Self Understood (Expression) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iD2 </td>\n   <td style=\"text-align:left;\"> Ability to Understand Others (Comprehension) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Communication CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcom = case_when(\n  iD1 %in% c(0,1,2,3,4) & \n  iD2 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Communication CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHCOMM = case_when(validcom == 1 ~ case_when(\n  iD1 %in% c(2,3,4) | iD2 %in% c(2,3,4) ~ 1, \n  iD1 < 2 & iD2 < 2 ~ 0)))\n\n df$cCYMHCOMM[df$cCYMHCOMM== 1] <- \"Triggered\"\n df$cCYMHCOMM[df$cCYMHCOMM== 0] <- \"Not Triggered\"\n```\n:::\n\n\n\n\n## CYMH Control Interventions CAP (cCYMHCTRLINT) {#cCYMHCTRLINT}\n\n**Last Updated:** Apr 29, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Control Interventions CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                           |\n|:--------------|:--------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH CONTROL INTERVENTIONS_G1_V1.0_P_2017-07-07.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                         |\n|DATE           |01/20/2017                                                     |\n|REVISION DATES |07/07/2017                                                     |\n|PURPOSE        |CODE FOR CYMH CONTROL INTERVENTIONS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                      |\n\n\n:::\n:::\n\n\n\n\n**CYMH Control Interventions CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Control Interventions CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iAA1a </td>\n   <td style=\"text-align:left;\"> Mechanical Restraint </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iAA1c </td>\n   <td style=\"text-align:left;\"> Physical or Manual Restraint by Staff </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iAA1f </td>\n   <td style=\"text-align:left;\"> Seclusion Room </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1nnn </td>\n   <td style=\"text-align:left;\"> Command Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iM7 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iN6c </td>\n   <td style=\"text-align:left;\"> Control Interventions - Chair prevents rising </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP16b </td>\n   <td style=\"text-align:left;\"> Seeking Comfort - Demonstrates Anger and Ambivalence Towards Caregiver </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX16a </td>\n   <td style=\"text-align:left;\"> Most Recent Self Injurious Attempt </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX4 </td>\n   <td style=\"text-align:left;\"> Extreme Behaviour Disturbance </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1am </td>\n   <td style=\"text-align:left;\"> Victim of Sexual Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1an </td>\n   <td style=\"text-align:left;\"> Victim of Physical Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Control Interventions Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validctrlint = case_when(\n  iE1nnn %in% c(0,1,2,3,4) & \n    iM7 %in% c(0,1,2,3,4,5,6,7,8,9) & \n    iN6c %in% c(0,1,2,3,4,5) & \n    iX1a %in% c(0,1,2,3,4,5) & \n    iX2a %in% c(0,1,2,3,4,5) & \n    iX4 %in% c(0,1,2) & \n    iAA1a %in% c(0,1,2,3,4,5) & \n    iAA1c %in% c(0,1,2,3,4,5) & \n    iAA1f %in% c(0,1,2,3,4,5) &\n    sCYABS %in% c(0:12) & \n    sCYPSS %in% c(0:12) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhctrlint1 = case_when(validctrlint == 1 ~ \n            (case_when(iM7 %in% c(1,2,3,4,5,6,7,8,9) ~ + 1, TRUE ~ 0) +\n            case_when(iN6c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iAA1a %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iAA1c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n            case_when(iAA1f %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n\ndf <- df %>% mutate(xcymhctrlint2 = case_when(validctrlint == 1 ~ \n              (case_when(iE1nnn %in% c(2,3,4) ~ + 1, TRUE ~ 0) + \n               case_when(iX1a == 5 ~ + 1, TRUE ~ 0) +\n               case_when(iX2a == 5 ~ + 1, TRUE ~ 0) + \n               case_when(iX4 == 2 ~ + 1, TRUE ~ 0) + \n               case_when(sCYABS >= 5 ~ + 1, TRUE ~ 0) +\n               case_when(sCYPSS >= 8 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Control Interventions CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHCTRLINT = case_when(validctrlint == 1 ~ \n        (case_when(xcymhctrlint1 & xcymhctrlint2 >= 1 ~ 2, TRUE ~ 0) +\n         case_when(xcymhctrlint1 >= 1 & xcymhctrlint2 == 0 ~ 1, TRUE ~ 0)))) \n\ndf$cCYMHCTRLINT[df$cCYMHCTRLINT== 1] <- \"Triggered to minimize the need for control interventions (young persons not in a psychiatric emergency situation)\"\ndf$cCYMHCTRLINT[df$cCYMHCTRLINT== 0] <- \"Not Triggered\"\n```\n:::\n\n\n\n\n## CYMH Criminality Prevention CAP (cCYMHCRIM) {#cCYMHCRIM}\n\n**Last Updated:** Apr 29, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Criminality Prevention CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                            |\n|:--------------|:---------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH CRIMINALITY PREVENTION_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                          |\n|DATE           |12/02/2014                                                      |\n|REVISION DATES |NA                                                              |\n|PURPOSE        |CODE FOR CYMH CRIMINALITY PREVENTION CAP                        |\n|BASED ON       |interRAI CHILD AND YOUTH SUITE-RESEARCH VERSION 9               |\n\n\n:::\n:::\n\n\n\n\n**CYMH Criminality Prevention CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Criminality Prevention CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE15a </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Stealing </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1dddd </td>\n   <td style=\"text-align:left;\"> Expressions Supportive of Criminal Activity </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Criminality Prevention CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcrim = case_when(\n    iE1dddd %in% c(0,1,2,3,4) & \n    iE15a %in% c(0,1,2,3,4,5) & \n    iX2a %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Criminality Prevention CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHCRIM = case_when(validcrim == 1 ~ case_when(\n  iE1dddd %in% c(1,2,3,4) | iE15a %in% c(2,3,4,5) | iX2a %in% c(2,3,4,5) ~ 1, \n  iE1dddd < 1 & iE15a < 2 & iX2a < 2 ~ 0)))\n\n  df$cCYMHCRIM[df$cCYMHCRIM== 1] <- \"Triggered\"\n  df$cCYMHCRIM[df$cCYMHCRIM== 0] <- \"Not Triggered\"\n```\n:::\n\n\n\n\n## CYMH Harm to Others CAP (cCYMHHARMOTH) {#cCYMHHARMOTH}\n\n**Last Updated:** Apr 29, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Harm to Others CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                    |\n|:--------------|:-------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH HARM TO OTHERS_G1_V1.0_P_2017-06-07.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                  |\n|DATE           |12/02/2014                                              |\n|REVISION DATES |07/06/2017                                              |\n|PURPOSE        |CODE FOR CYMH HARM TO OTHERS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                               |\n\n\n:::\n:::\n\n\n\n\n**CYMH Harm to Others CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Harm to Others CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Harm to Others CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validharmoth = case_when(\n  iE1oo %in% c(0,1,2,3,4) & \n    sCYRHO %in% c(0,1,2,3,4,5,6) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Harm to Others CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHHARMOTH = case_when(validharmoth == 1 ~ case_when(\n  sCYRHO %in% c(5,6) ~ 2, \n  sCYRHO %in% c(3,4) ~ case_when(\n    iE1oo %in% c(2,3,4) ~ 2, \n    iE1oo < 2 ~ 1),\n  sCYRHO <= 2 ~ 0)))\n\n   df$cCYMHHARMOTH[df$cCYMHHARMOTH == 2] <- \"Triggered due to high risk of harm to others\"\n   df$cCYMHHARMOTH[df$cCYMHHARMOTH == 1] <- \"Triggered due to moderate risk of harm to others\"\n   df$cCYMHHARMOTH[df$cCYMHHARMOTH == 0] <- \"Not Triggered\"\n```\n:::\n\n\n\n\n## CYMH Hazardous Fire Involvement CAP (cCYMHFIRE) {#cCYMHFIRE}\n\n**Last Updated:** Apr 29, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Hazardous Fire Involvement CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                                |\n|:--------------|:-------------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH HAZARDOUS FIRE INVOLVEMENT_G1_V1.0_P_2017-07-05.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                              |\n|DATE           |01/20/2017                                                          |\n|REVISION DATES |07/05/2017                                                          |\n|PURPOSE        |CODE FOR CYMH HAZARDOUS FIRE INVOLVEMENT CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                           |\n\n\n:::\n:::\n\n\n\n\n**CYMH Hazardous Fire Involvement CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Hazardous Fire Involvement CAP \n                      variable label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iC1d </td>\n   <td style=\"text-align:left;\"> Cognitive Skills for Daily Decision-Making </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1mmm </td>\n   <td style=\"text-align:left;\"> Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1nnn </td>\n   <td style=\"text-align:left;\"> Command Hallucinations </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ooo </td>\n   <td style=\"text-align:left;\"> Delusions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15e </td>\n   <td style=\"text-align:left;\"> Parent - Appropriate Supervision and Monitoring </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX18 </td>\n   <td style=\"text-align:left;\"> Fire Setting or Misuse of Ignition Materials or Accelerants </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1am </td>\n   <td style=\"text-align:left;\"> Victim of Sexual Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1an </td>\n   <td style=\"text-align:left;\"> Victim of Physical Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ao </td>\n   <td style=\"text-align:left;\"> Victim of Emotional Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Hazardous Fire Involvement CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validfire = case_when(\n    iC1d %in% c(0,1,2,3,4,5) & \n    iE1oo %in% c(0,1,2,3,4) & \n    iE1mmm %in% c(0,1,2,3,4) & \n    iE1nnn %in% c(0,1,2,3,4) & \n    iE1ooo %in% c(0,1,2,3,4) & \n    iP15e %in% c(0,1,2,8) & \n    iX18 %in% c(0,1,2,3,4,5) & \n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) & \n    iY1ao %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhfire = case_when(validfire == 1 ~ case_when(\n  iC1d %in% c(3,4) ~ + 1, \n  iE1oo %in% c(2,3,4) ~ + 1,\n  iE1mmm %in% c(2,3,4) ~ + 1, \n  iE1nnn %in% c(2,3,4) ~ + 1, \n  iE1ooo %in% c(2,3,4) ~ + 1, \n  iP15e %in% c(2,8) ~ + 1, \n  iY1am %in% c(1,2,3,4,5) | iY1an %in% c(1,2,3,4,5) | \n    iY1ao %in% c(1,2,3,4,5) ~ + 1)))\n```\n:::\n\n\n\n\n**Hazardous Fire Involvement CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHFIRE = case_when(validfire == 1 ~ case_when(\n  iX18 %in% c(2,3,4,5) ~ case_when(\n    xcymhfire >= 2 ~ 3, \n    xcymhfire == 1 ~ 2, \n    xcymhfire == 0 ~ 1), \n  iX18 < 2 ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Informal Support CAP (cCYMHINFSUPP) {#cCYMHINFSUPP}\n\n**Last Updated:** Apr 29, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Informal Support CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                      |\n|:--------------|:---------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH INFORMAL SUPPORT_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                    |\n|DATE           |12/02/2014                                                |\n|REVISION DATES |NA                                                        |\n|PURPOSE        |CODE FOR CYMH INFORMAL SUPPORT CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                 |\n\n\n:::\n:::\n\n\n\n\n**CYMH Informal Support CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Informal Support CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iP18a </td>\n   <td style=\"text-align:left;\"> Crisis Situtation - Support Currently Available </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP18b </td>\n   <td style=\"text-align:left;\"> Financial Problems - Support Currently Available </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP18c </td>\n   <td style=\"text-align:left;\"> Babysitting - Support Currently Available </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP18d </td>\n   <td style=\"text-align:left;\"> Emotional Support  - Support Currently Available </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP18e </td>\n   <td style=\"text-align:left;\"> Respite  - Support Currently Available </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Informal Support CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validinfsupp = case_when(\n    iP18a %in% c(0,1,2,3) & \n    iP18b %in% c(0,1,2,3) &\n    iP18c %in% c(0,1,2,3) &\n    iP18d %in% c(0,1,2,3) &\n    iP18e %in% c(0,1,2,3) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhinfsupp = case_when(validinfsupp == 1 ~ \n    (case_when(iP18a %in% c(2,3) ~ + 1, TRUE ~ 0) +\n     case_when(iP18b == 3 ~ + 1, TRUE ~ 0) +\n     case_when(iP18c == 3 ~ + 1, TRUE ~ 0) +\n     case_when(iP18d == 3 ~ + 1, TRUE ~ 0) +\n     case_when(iP18e == 3 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Informal Support CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHINFSUPP = case_when(validinfsupp == 1 ~ \n            (case_when(xcymhinfsupp >= 2 ~ 1, TRUE ~ 0) + \n             case_when(xcymhinfsupp < 2 ~ 0, TRUE ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Interpersonal Conflict CAP (cCYMHIPCON) {#cCYMHIPCON}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Interpersonal Conflict CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                            |\n|:--------------|:---------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH INTERPERSONAL CONFLICT_G1_V1.0_P_2017-07-05.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                          |\n|DATE           |12/02/2014                                                      |\n|REVISION DATES |07/05/2017                                                      |\n|PURPOSE        |CODE FOR CYMH INTERPERSONAL CONFLICT CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                       |\n\n\n:::\n:::\n\n\n\n\n**CYMH Interpersonal Conflict CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Interpersonal Conflict CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iBB4b </td>\n   <td style=\"text-align:left;\"> Enrolled in Formal Education Program </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5e </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Conflict with School Staff </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19a </td>\n   <td style=\"text-align:left;\"> Conflict with or Repeated Criticism of Family </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19b </td>\n   <td style=\"text-align:left;\"> Conflict with or Repeated Criticism of Close Friends </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19c </td>\n   <td style=\"text-align:left;\"> Staff Report Persistent Frustration in Dealing with Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19d </td>\n   <td style=\"text-align:left;\"> Family are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19e </td>\n   <td style=\"text-align:left;\"> Friends are Persistently Hostile or Critical of Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19f </td>\n   <td style=\"text-align:left;\"> Pervasive Conflict with Peers </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Interpersonal Conflict CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(xiBB5e = (case_when(\n  iBB4c %in% c(0,1) ~ 0)+ \n  case_when(iBB4c %in% c(2,3) ~ as.numeric(iBB5e), TRUE ~ 0)))\n\ndf <- df %>% mutate(validipcon = case_when(\n    iP19a %in% c(0,1,8) &\n    iP19b %in% c(0,1,8) &\n    iP19c %in% c(0,1,8) &\n    iP19d %in% c(0,1,8) &\n    iP19e %in% c(0,1,8) &\n    iP19f %in% c(0,1,8) &\n    xiBB5e %in% c(0,1,2,3) & \n    iBB5e %in% c(0,1,8) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhipcon = case_when(validipcon == 1 ~ \n                   (case_when(iP19a | iP19d == 1 ~ + 1, TRUE ~ 0) +\n                    case_when(iP19b | iP19e | iP19f == 1 ~ + 1, TRUE ~ 0) +\n                    case_when(iP19c | xiBB5e == 1 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Interpersonal Conflict CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHIPCON = case_when(validipcon == 1 ~ \n      (case_when(xcymhipcon >= 2 ~ 2, TRUE ~ 0) +\n       case_when(xcymhipcon == 1 ~ 1, TRUE ~ 0) +\n       case_when(xcymhipcon == 0 ~ 0, TRUE ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Medication Adherence CAP (cCYMHMEDADH) {#cCYMHMEDADH}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Medication Adherence CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                          |\n|:--------------|:-------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH MEDICATION ADHERENCE_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                        |\n|DATE           |12/02/2014                                                    |\n|REVISION DATES |NA                                                            |\n|PURPOSE        |CODE FOR CYMH MEDICATION ADHERENCE CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                     |\n\n\n:::\n:::\n\n\n\n\n**CYMH Medication Adherence CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Medication Adherence CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iM12 </td>\n   <td style=\"text-align:left;\"> Parent/Caregiver Assists with Medication Use </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iM3 </td>\n   <td style=\"text-align:left;\"> Adherent with Medications Prescribed by Physician </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iM4 </td>\n   <td style=\"text-align:left;\"> Refusal to Take Some/All of Prescirbed Medication - Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Medication Adherence CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validmedadh = case_when(\n    iM3 %in% c(0,1,2,8) & \n    iM4 %in% c(0,1) & \n    iM12 %in% c(0,1,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Medication Adherence CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHMEDADH = case_when(validmedadh == 1 ~ case_when(\n  iM3 == 2 | iM4 == 1 | iM12 == 0 ~ 1, \n  iM3 != 2 & iM4 != 1 & iM12 != 0 ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Medication Review CAP (cCYMHMEDREV) {#cCYMHMEDREV}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Medication Review CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                       |\n|:--------------|:----------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH MEDICATION REVIEW_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                     |\n|DATE           |12/02/2014                                                 |\n|REVISION DATES |NA                                                         |\n|PURPOSE        |CODE FOR CYMH MEDICATION REVIEW CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                  |\n\n\n:::\n:::\n\n\n\n\n**CYMH Medication Review CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Medication Review CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2c </td>\n   <td style=\"text-align:left;\"> Balance - Dizziness </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2dd </td>\n   <td style=\"text-align:left;\"> Seuizures </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2gg </td>\n   <td style=\"text-align:left;\"> Hypersalivation or Drooling </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2k </td>\n   <td style=\"text-align:left;\"> Constipation </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2ll </td>\n   <td style=\"text-align:left;\"> Other Emergent Conditions </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2n </td>\n   <td style=\"text-align:left;\"> Vomiting </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2x </td>\n   <td style=\"text-align:left;\"> Nausea </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ2y </td>\n   <td style=\"text-align:left;\"> Dry Mouth </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ3 </td>\n   <td style=\"text-align:left;\"> Dyspnea (Shortness of Breath) </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9a </td>\n   <td style=\"text-align:left;\"> Akathisia - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9b </td>\n   <td style=\"text-align:left;\"> Dyskinesia - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9c </td>\n   <td style=\"text-align:left;\"> Tremor - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9d </td>\n   <td style=\"text-align:left;\"> Bradykinesia - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9e </td>\n   <td style=\"text-align:left;\"> Rigidity - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9f </td>\n   <td style=\"text-align:left;\"> Dystonia - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ9g </td>\n   <td style=\"text-align:left;\"> Slow Shuffling Gait - During Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iM3 </td>\n   <td style=\"text-align:left;\"> Adherent with Medications Prescribed by Physician </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iM5 </td>\n   <td style=\"text-align:left;\"> Stopped Taking Psychotropic Medication in Last 90 Days Because of Side Effects </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iR9 </td>\n   <td style=\"text-align:left;\"> Change in Severity or Frequency of Psychiatric Symptoms - Compared to 30 Dasy ago or Since Last Assessment Within 30 Days </td>\n   <td style=\"text-align:left;\"> 1-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Medication Review CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validmedrev = case_when(\n  iJ2c %in% c(0,1,2,3,4) & \n    iJ2k %in% c(0,1,2,3,4) &\n    iJ2n %in% c(0,1,2,3,4) &\n    iJ2x %in% c(0,1,2,3,4) &\n    iJ2y %in% c(0,1,2,3,4) &\n    iJ2dd %in% c(0,1,2,3,4) &\n    iJ2gg %in% c(0,1,2,3,4) &\n    iJ2ll %in% c(0,1,2,3,4) &\n    iJ3 %in% c(0,1,2,3,4) &\n    iJ9a %in% c(0,1) & \n    iJ9b %in% c(0,1) &\n    iJ9c %in% c(0,1) &\n    iJ9d %in% c(0,1) &\n    iJ9e %in% c(0,1) &\n    iJ9f %in% c(0,1) &\n    iJ9g %in% c(0,1) &\n    iM3 %in% c(0,1,2,8) & \n    iM5 %in% c(0,1) &\n    iR9 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhmedrev = case_when(validmedrev == 1 ~ case_when(\n  iJ2c %in% c(2,3,4) ~ + 1, \n  iJ2k %in% c(2,3,4) | iJ2y %in% c(2,3,4) ~ + 1, \n  iJ2n %in% c(2,3,4) | iJ2x %in% c(2,3,4) ~ + 1, \n  iJ2dd %in% c(2,3,4) ~ + 1, \n  iJ2gg %in% c(2,3,4) ~ + 1, \n  iJ2ll %in% c(2,3,4) ~ + 1, \n  iJ3 %in% c(1,2,3) ~ + 1, \n  iJ9a == 1 | iJ9b == 1 | iJ9c == 1 | iJ9d == 1 | iJ9e == 1 | \n    iJ9f == 1 | iJ9g == 1 ~ + 1, \n  iR9 == 1 ~ + 1)))\n```\n:::\n\n\n\n\n**Medication Review CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHMEDREV = case_when(validmedrev == 1 ~ case_when(\n  iM5 == 1 ~ 1, \n  iM5 != 1 ~ case_when(\n    iM3 %in% c(0,1) & xcymhmedrev >= 1 ~ 1, \n    iM3 != 0 | iM3 != 1 | xcymhmedrev == 0 ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Parenting CAP (cCYMHPARENT) {#cCYMHPARENT}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Parenting CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                               |\n|:--------------|:--------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH PARENTING_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                             |\n|DATE           |12/02/2014                                         |\n|REVISION DATES |NA                                                 |\n|PURPOSE        |CODE FOR CYMH PARENTING CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                          |\n\n\n:::\n:::\n\n\n\n\n**CYMH Parenting CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Parenting CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iP15a </td>\n   <td style=\"text-align:left;\"> Parent - Communicates Effectively with Child/Youth </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15b </td>\n   <td style=\"text-align:left;\"> Parent - Assists Child/Youth with Regulation of Emotions </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15c </td>\n   <td style=\"text-align:left;\"> Parent - Uses Appropriate Disciplinary Practices </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15d </td>\n   <td style=\"text-align:left;\"> Parent - Demonstrates Warmth and Support </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15e </td>\n   <td style=\"text-align:left;\"> Parent - Appropriate Supervision and Monitoring </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP15f </td>\n   <td style=\"text-align:left;\"> Parent - Appropriate Limit Setting or Expectations </td>\n   <td style=\"text-align:left;\"> 0-2,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Parenting CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validparent = case_when(\n    iP15a %in% c(0,1,2,8) &\n    iP15b %in% c(0,1,2,8) &\n    iP15c %in% c(0,1,2,8) &\n    iP15d %in% c(0,1,2,8) &\n    iP15e %in% c(0,1,2,8) &\n    iP15f %in% c(0,1,2,8) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhparent = case_when(validparent == 1 ~ \n            (case_when(iP15a == 2 ~ + 1, TRUE ~ 0) +\n             case_when(iP15b == 2 ~ + 1, TRUE ~ 0) + \n             case_when(iP15c == 2 ~ + 1, TRUE ~ 0) +\n             case_when(iP15d == 2 ~ + 1, TRUE ~ 0) +\n             case_when(iP15e == 2 ~ + 1, TRUE ~ 0) + \n             case_when(iP15f == 2 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Parenting CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHPARENT = case_when(validparent == 1 ~ \n            (case_when(xcymhparent >= 2 ~ 1, TRUE ~ 0) +\n             case_when(xcymhparent < 2 ~ 0, TRUE ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Physical Activity CAP (cCYMHPA) {#cCYMHPA}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Physical Activity CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                       |\n|:--------------|:----------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH PHYSICAL ACTIVITY_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                     |\n|DATE           |12/02/2014                                                 |\n|REVISION DATES |NA                                                         |\n|PURPOSE        |CODE FOR CYMH PHYSICAL ACTIVITY CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                  |\n\n\n:::\n:::\n\n\n\n\n**CYMH Physical Activity CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Physical Activity CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iG6a </td>\n   <td style=\"text-align:left;\"> Total Hours of Exercise or Physical Activity - Last 3 Days </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Physical Activity CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validpa = case_when(\n  iG6a %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0 ))\n```\n:::\n\n\n\n\n**Physical Activity CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHPA = case_when(validpa == 1 ~ case_when(\n  iG6a %in% c(0,1) ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Readmission CAP (cCYMHREAD) {#cCYMHREAD}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\nCalculating the Readmission CAP requires that the Positive Symptoms Scale (\\@ref(sCYPSS)), Risk of Harm to Others Scale (\\@ref(sCYRHO)) and the Severity of Self-Harm Scale (\\@ref(sCYSOS)) have been calculated.\n\n**interRAI Repository Information CYMH Readmission CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                 |\n|:--------------|:----------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH READMISSION_G1_V1.0_P_2017-07-07.txt |\n|BY             |Chenyu Liu, Kim Arbeau                               |\n|DATE           |12/02/2014                                           |\n|REVISION DATES |07/07/2017                                           |\n|PURPOSE        |CODE FOR CYMH READMISSION CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                            |\n\n\n:::\n:::\n\n\n\n\n**CYMH Readmission CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Readmission CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iB12 </td>\n   <td style=\"text-align:left;\"> Residential Instability Over Last 2 Years </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB33 </td>\n   <td style=\"text-align:left;\"> History of Foster Family Placement </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB38a </td>\n   <td style=\"text-align:left;\"> Residential/Living Status Over Last 2 Years - Group home </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB38b </td>\n   <td style=\"text-align:left;\"> Residential/Living Status Over Last 2 Years - Shelter </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE5 </td>\n   <td style=\"text-align:left;\"> Mental Health Residential/Inpatient History - Time since discharge from last admission </td>\n   <td style=\"text-align:left;\"> 1-6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19h </td>\n   <td style=\"text-align:left;\"> Family Members Report Feeling Overwhelmes by Child/Youth's Conditions </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iV1 </td>\n   <td style=\"text-align:left;\"> Mental Health Residential/Inpatient - Number of Admissions (Last 2 Years) </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Readmission CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validread = case_when(\n    iB12 %in% c(0,1) & \n    iB33 %in% c(0,1,2) & \n    iB38a %in% c(0,1) & \n    iB38b %in% c(0,1) & \n    iE5 %in% c(0,1,2,3) & \n    iP19h %in% c(0,1,8) & \n    iV1 %in% c(0,1,2) & \n    sCYPSS > 0 & sCYPSS < 12 & \n    sCYRHO > 0 & sCYPSS < 6 & \n    sCYSOS > 0 & sCYPSS < 6 ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhread1 = case_when(validread == 1 ~ \n            (case_when(iB12 == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iB33 == 2 ~ + 1, TRUE ~ 0) +\n             case_when(iB38a == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iB38b == 1 ~ + 1, TRUE ~ 0) + \n             case_when(iP19h == 1 ~ + 1, TRUE ~ 0) +\n             case_when(sCYPSS >= 2 ~ + 1, TRUE ~ 0) +\n             case_when(sCYRHO >= 3 ~ + 1, TRUE ~ 0) +\n             case_when(sCYSOS >= 3 ~ + 1, TRUE ~ 0))))\n   \ndf <- df %>% mutate(xcymhread2 = case_when(validread == 1 ~ \n            (case_when(iE5 %in% c(2,3) ~  1, TRUE ~ 0) +\n             case_when(iV1 == 2 ~ 1, TRUE ~ 0) +\n             case_when(iV1 == 1 ~ case_when(xcymhread1 >= 1 ~ 1, TRUE ~ 0), TRUE ~ 0))))\n```\n:::\n\n\n\n\n**CYMH Readmission CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHREAD = case_when(validread == 1 ~ \n            (case_when(xcymhread2 >= 1 ~ 1, TRUE ~ 0) +\n             case_when(xcymhread2 == 0 ~ 0, TRUE ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Sleep Disturbance CAP (cCYMHSLEEP) {#cCYMHSLEEP}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Sleep Disturbance CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                       |\n|:--------------|:----------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH SLEEP DISTURBANCE_G1_V1.0_P_2017-07-05.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                     |\n|DATE           |12/02/2014                                                 |\n|REVISION DATES |07/05/2017                                                 |\n|PURPOSE        |CODE FOR CYMH SLEEP DISTURBANCES CAP                       |\n|BASED ON       |interRAI SUITE, VERSION 9                                  |\n\n\n:::\n:::\n\n\n\n\n**CYMH Sleep Disturbance CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Sleep Disturbance CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1aaaa </td>\n   <td style=\"text-align:left;\"> Falls Asleep During the Dat </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1bbbb </td>\n   <td style=\"text-align:left;\"> Resists Bedtime </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1lll </td>\n   <td style=\"text-align:left;\"> Nightmares </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1yyy </td>\n   <td style=\"text-align:left;\"> Difficulty Falling Asleep or Staying Asleep </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1zzz </td>\n   <td style=\"text-align:left;\"> Wakes Up Multiple Time at Night </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ4 </td>\n   <td style=\"text-align:left;\"> Fatigue </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Sleep Disturbance CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validsleep = case_when(\n    iE1lll %in% c(0,1,2,3,4) &\n    iE1yyy %in% c(0,1,2,3,4) & \n    iE1zzz %in% c(0,1,2,3,4) & \n    iE1aaaa %in% c(0,1,2,3,4) & \n    iE1bbbb %in% c(0,1,2,3,4) & \n    iJ4 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n    \ndf <- df %>% mutate(xcymhsleep = case_when(validsleep == 1 ~ \n            (case_when(iE1lll %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n             case_when(iE1yyy %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n             case_when(iE1zzz %in% c(2,3,4) ~ + 1, TRUE ~ 0) + \n             case_when(iE1aaaa %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n             case_when(iE1bbbb %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n             case_when(iJ4 %in% c(1,2,3,4) ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Sleep Disturbance CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHSLEEP = case_when(validsleep == 1 ~ case_when(\n  xcymhsleep >= 2 ~ 1, TRUE ~ 0))) \n```\n:::\n\n\n\n\n## CYMH Social and Peer Relations CAP (cCYMHSOCREL) {#cCYMHSOCREL}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Social and Peer Relations CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                                   |\n|:--------------|:----------------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH SOCIAL AND PEER RELATIONSHIPS_G1_V1.0_P_2017-07-05.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                                 |\n|DATE           |12/02/2014                                                             |\n|REVISION DATES |07/05/2017                                                             |\n|PURPOSE        |CODE FOR CYMH SOCIAL AND PEER RELATIONSHIPS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                              |\n\n\n:::\n:::\n\n\n\n\n**CYMH Social and Peer Relations CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Social and Peer Relations CAP \n                      variable label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE14d </td>\n   <td style=\"text-align:left;\"> Behaviour Pattern that Hinders Socialization - Extreme Shyness </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE15e </td>\n   <td style=\"text-align:left;\"> Conduct Problems - Bullying peers </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1qqq </td>\n   <td style=\"text-align:left;\"> Lack of Interest in Social Interaction </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ttt </td>\n   <td style=\"text-align:left;\"> Withdrawal from Activities of Interest </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF13 </td>\n   <td style=\"text-align:left;\"> Peer Group Includes Individuals with Persistent Antisocial Behaviour </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF15e </td>\n   <td style=\"text-align:left;\"> Has at Least One Friend with whom Visits/Plays/Socializes Regularly </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF15f </td>\n   <td style=\"text-align:left;\"> Social Inclusion by Peers </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP8 </td>\n   <td style=\"text-align:left;\"> Strengths - Reports having a confidant </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aq </td>\n   <td style=\"text-align:left;\"> Victim of Bullying </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Social and Peer Relations CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validsocrel = case_when(\n    iE1qqq %in% c(0,1,2,4) & \n    iE1ttt %in% c(0,1,2,3,4) & \n    iE14d %in% c(0,1) & \n    iE15e %in% c(0,1,2,3,4,5) & \n    iF13 %in% c(0,1) & \n    iF15e %in% c(0,1) & \n    iF15f %in% c(0,1) & \n    iP8 %in% c(0,1) & \n    iY1aq %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhsocrel1 = case_when(validsocrel == 1 ~ \n            (case_when(iE1qqq %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n             case_when(iE1ttt %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n             case_when(iE14d == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iF15e == 0 ~ + 1, TRUE ~ 0) +\n             case_when(iF15f == 0 ~ + 1, TRUE ~ 0) +\n             case_when(iP8 == 0 ~ + 1, TRUE ~ 0) + \n             case_when(iY1aq %in% c(2,3,4,5) ~ + 1, TRUE ~ 0))))\n\ndf <- df %>% mutate(xcymhsocrel2 = case_when(validsocrel == 1 ~ \n            (case_when(iE15e %in% c(2,3,4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iF13 == 1 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Social and Peer Relations CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHSOCREL = case_when(validsocrel == 1 ~ \n           (case_when(xcymhsocrel1 >= 2 ~ 2, TRUE ~ 0) +\n            case_when(xcymhsocrel1 < 2 ~ \n                  (case_when(xcymhsocrel2 >= 1 ~ 1, TRUE ~ 0) +\n                   case_when(xcymhsocrel2 == 0 ~ 0, TRUE ~ 0)), TRUE ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Strengths CAP (cCYMHSTR) {#cCYMHSTR}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Strengths CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                               |\n|:--------------|:--------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH STRENGTHS_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                             |\n|DATE           |12/02/2014                                         |\n|REVISION DATES |NA                                                 |\n|PURPOSE        |CODE FOR CYMH STRENGTHS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                          |\n\n\n:::\n:::\n\n\n\n\n**CYMH Strengths CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Strengths CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iC7 </td>\n   <td style=\"text-align:left;\"> Adaptability to Change in Routine or Environment </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iC9a </td>\n   <td style=\"text-align:left;\"> Problem Solving and Reasoning Ability </td>\n   <td style=\"text-align:left;\"> 0,1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF15a </td>\n   <td style=\"text-align:left;\"> Notable Talent </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8b </td>\n   <td style=\"text-align:left;\"> Consistent Positive Outlook </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Strengths CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validstr = case_when(\n    iC7 %in% c(0,1,2) & \n    iC9a %in% c(0,1,8) & \n    iF8b %in% c(0,1) & \n    iF15a %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhstr = case_when(validstr == 1 ~\n            (case_when(iC7 == 2 ~ + 1, TRUE ~ 0) +\n             case_when(iC9a %in% c(1,8) ~ + 1, TRUE ~ 0) +\n             case_when(iF8b == 0 ~ + 1, TRUE ~ 0) +\n             case_when(iF15a == 0 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Strengths CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHSTR = case_when(validstr == 1 ~ \n            case_when(xcymhstr >= 3 ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Suicidality and Purposeful Self-Harm CAP (cCYMHSSH) {#cCYMHSSH}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\nCalculating the Suicidality and Purposeful Self-Harm CAP requires that the Severity of Self-Harm Scale (\\@ref(sCYSOS)) has been calculated.\n\n**interRAI Repository Information CYMH Suicidality and Purposeful Self-Harm CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                   |\n|:--------------|:------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH SUICIDALITY AND PURPOSEFUL SELF-HARM   |\n|BY             |Chenyu Liu, Kim Arbeau                                 |\n|DATE           |12/02/2014                                             |\n|REVISION DATES |NA                                                     |\n|PURPOSE        |CODE FOR CYMH SUICIDALITY AND PURPOSEFUL SELF-HARM CAP |\n|BASED ON       |interRAI SUITE, VERSION 9                              |\n\n\n:::\n:::\n\n\n\n\n**CYMH Suicidality and Purposeful Self-Harm CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Suicidality and Purposful Self-Harm \n                  CAP variable label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Suicidality and Purposeful Self-Harm CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validssh = case_when(\n    iE1oo %in% c(0,1,2,3,4) & \n    sCYSOS %in% c(0,1,2,3,4,5,6) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Suicidality and Purposeful Self-Harm CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHSSH = case_when(validssh == 1 ~ case_when(\n  sCYSOS %in% c(5,6) ~ 2, \n  sCYSOS %in% c(3,4) ~ case_when(\n    iE1oo >= 2 ~ 2, \n    iE1oo < 2 ~ 1),\n  sCYSOS < 3 ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Support System for Discharge CAP (cCYMHSSDIS) {#cCYMHSSDIS}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Support System for Discharge CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                                  |\n|:--------------|:---------------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH SUPPORT SYSTEM FOR DISCHARGE_G1_V1.1_P_2021-02-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                                |\n|DATE           |12/02/2014                                                            |\n|REVISION DATES |07/05/2017 ; 02/02/2021                                               |\n|PURPOSE        |CODE FOR CYMH SUPPORT SYSTEM FOR DISCHARGE CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                             |\n\n\n:::\n:::\n\n\n\n\n**CYMH Support System for Discharge CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Support System for Discharge CAP \n                      variable label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iA11b </td>\n   <td style=\"text-align:left;\"> Usual residential status </td>\n   <td style=\"text-align:left;\"> 1-15 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iA12e </td>\n   <td style=\"text-align:left;\"> Living Arrangement Prior to Admission or Living Arrangement </td>\n   <td style=\"text-align:left;\"> 1-6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iR16a </td>\n   <td style=\"text-align:left;\"> Child/Youth has Access to Formal Mental Health Treatment Following Discharge </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iR16b </td>\n   <td style=\"text-align:left;\"> Child/Youth has Access to Formal Case Coordination Services Following Discharge </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver is Unable or Unwilling to Continue in Caring Activites </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Support System for Discharge CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validssdis = case_when(\n    iA11b %in% c(1:15) & \n    iA12e %in% c(1:6) & \n    iR16d %in% c(0,1,2,8) & \n    iR16e %in% c(0,1,2,8) & \n    iY8a %in% c(0,1,8) ~ 1, TRUE ~ 0))\n# iA11b replaced iA11j\n```\n:::\n\n\n\n\n**Support System for Discharge CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHSSDIS = case_when(validssdis == 1 ~ case_when(\n  iA11b %in% c(5,8) | iA12e %in% c(1,5) | iY8a == 1 | iR16d %in% c(0,2) | \n    iR16e %in% c(0,2) ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Tobacco and Nicotine Use CAP (cCYMHTOBAC) {#cCYMHTOBAC}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Tobacco and Nicotine Use CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                              |\n|:--------------|:-----------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH TOBACCO AND NICOTINE USE_G1_V1.0_P_2017-07-05.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                            |\n|DATE           |12/02/2014                                                        |\n|REVISION DATES |07/05/2017                                                        |\n|PURPOSE        |CODE FOR CYMH TOBACCO AND NICOTINE USE CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                         |\n\n\n:::\n:::\n\n\n\n\n**CYMH Tobacco and Nicotine Use CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Tobacco and Nicotine use CAP variable \n                                   label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iW20a </td>\n   <td style=\"text-align:left;\"> Smokes Tobacco Daily </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW20b </td>\n   <td style=\"text-align:left;\"> Uses Other Nicotine Product Daily </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Tobacco and Nicotine Use CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validtobac = case_when(\n  iW20a %in% c(0,1,2,3) & \n  iW20b %in% c(0,1,2,3) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Tobacco and Nicotine Use CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHTOBAC = case_when(validtobac == 1 ~ case_when(\n  iW20a == 3 | iW20b == 3 ~ 2, \n  iW20a %in% c(1,2) | iW20b %in% c(1,2) ~ 1, \n  iW20a == 0 & iW20b == 0 ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Transitions CAP (cCYMHTRANS) {cCYMHTRANS}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Transitions CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                 |\n|:--------------|:----------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH TRANSITIONS_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                               |\n|DATE           |12/02/2014                                           |\n|REVISION DATES |NA                                                   |\n|PURPOSE        |CODE FOR CYMH TRANSITIONS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                            |\n\n\n:::\n:::\n\n\n\n\n**CYMH Transitions CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Transitions CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iZ12 </td>\n   <td style=\"text-align:left;\"> Transition Planning Needed </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Transitions CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validtrans = case_when(\n  iZ12 %in% c(0,1) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Transitions CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHTRANS = case_when(validtrans == 1 ~ case_when(\n  iZ12 == 1 ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Traumatic Life Events CAP (cCYMHTRAUMA) {#cCYMHTRAUMA}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Traumatic Life Events CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                           |\n|:--------------|:--------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH TRAUMATIC LIFE EVENTS_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                         |\n|DATE           |12/02/2014                                                     |\n|REVISION DATES |NA                                                             |\n|PURPOSE        |CODE FOR CYMH TRAUMATIC LIFE EVENTS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                      |\n\n\n:::\n:::\n\n\n\n\n**CYMH Traumatic Life Events CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Traumatic Life Events CAP variable  \n                                label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iB34a </td>\n   <td style=\"text-align:left;\"> History of Care - Emotional Neglect </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34b </td>\n   <td style=\"text-align:left;\"> History of Care - Physical Needs </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34c </td>\n   <td style=\"text-align:left;\"> History of Care - Safety Needs </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ddd </td>\n   <td style=\"text-align:left;\"> Flat or Blunted Affect </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eeee </td>\n   <td style=\"text-align:left;\"> Hypervigilance </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1fff </td>\n   <td style=\"text-align:left;\"> Expressions, Including Non-verbal of Unrealistic Fears </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1iii </td>\n   <td style=\"text-align:left;\"> Intrusive Thoughts or Flashbacks </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1jjj </td>\n   <td style=\"text-align:left;\"> Re-enactment Through Play of Traumatic Life Events </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1kkk </td>\n   <td style=\"text-align:left;\"> Episodes of Panic </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1lll </td>\n   <td style=\"text-align:left;\"> Nightmares </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aa </td>\n   <td style=\"text-align:left;\"> Serious Accident or Physical Impariment </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aj </td>\n   <td style=\"text-align:left;\"> Lived in War Zone or Area of Violent Conflict (Combatant or Civilian) </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ak </td>\n   <td style=\"text-align:left;\"> Witnessed Severe Accident, Disaster, Terrorism, Violence or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1al </td>\n   <td style=\"text-align:left;\"> Victim of Crime </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1am </td>\n   <td style=\"text-align:left;\"> Victim of Sexual Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1an </td>\n   <td style=\"text-align:left;\"> Victim of Physical Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ao </td>\n   <td style=\"text-align:left;\"> Victim of Emotional Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aq </td>\n   <td style=\"text-align:left;\"> Victim of Bullying </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ar </td>\n   <td style=\"text-align:left;\"> Death or Loss of Parent or Primary Caregiver </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1at </td>\n   <td style=\"text-align:left;\"> Abandoned by Parent(s)/Caregiver(s) </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1au </td>\n   <td style=\"text-align:left;\"> Witnessed Domestic Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY2a </td>\n   <td style=\"text-align:left;\"> Fearful of Family Member or Close Aquaintance </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY2c </td>\n   <td style=\"text-align:left;\"> Child/Youth has Concerns for His/Her Safety </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY2d </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concerns that Child/Youth is at Imminent Risk for Victimization </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Traumatic Life Events CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validtrauma = case_when(\n    iB34a %in% c(0,1,2,3) & \n    iB34b %in% c(0,1,2,3) & \n    iB34c %in% c(0,1,2,3) & \n    iE1ddd %in% c(0,1,2,3,4) & \n    iE1fff %in% c(0,1,2,3,4) & \n    iE1iii %in% c(0,1,2,3,4) & \n    iE1jjj %in% c(0,1,2,3,4) & \n    iE1kkk %in% c(0,1,2,3,4) & \n    iE1lll %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) & \n    iY1aa %in% c(0,1,2,3,4,5) & \n    iY1aj %in% c(0,1,2,3,4,5) &\n    iY1ak %in% c(0,1,2,3,4,5) &\n    iY1al %in% c(0,1,2,3,4,5) &\n    iY1am %in% c(0,1,2,3,4,5) &\n    iY1an %in% c(0,1,2,3,4,5) &\n    iY1ao %in% c(0,1,2,3,4,5) &\n    iY1aq %in% c(0,1,2,3,4,5) &\n    iY1ar %in% c(0,1,2,3,4,5) &\n    iY1at %in% c(0,1,2,3,4,5) &\n    iY1au %in% c(0,1,2,3,4,5) &\n    iY1b %in% c(0,1,8) & \n    iY2a %in% c(0,1) & \n    iY2c %in% c(0,1) & \n    iY2d %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhtrauma1 = case_when(validtrauma == 1 ~ \n            (case_when(iY1aa %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1aj %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1ak %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1am %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1an %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1ao %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1aq %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1ar %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1at %in% c(4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iY1au %in% c(4,5) ~ + 1, TRUE ~ 0))))\n\ndf <- df %>% mutate(xcymhtrauma2 = case_when(validtrauma == 1 ~ \n            (case_when(iY2a == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iY2c == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iY2d == 1 ~ + 1, TRUE ~ 0))))\n  \ndf <- df %>% mutate(xcymhtrauma3 = case_when(validtrauma == 1 ~ \n            (case_when(iB34a | iB34b | iB34c %in% c(1,2,3) ~ + 1, TRUE ~ 0) +\n            case_when(iY1aa %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1aj %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1ak %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1al %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1am %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1an %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1ao %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1aq %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1ar %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1at %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1au %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n\ndf <- df %>% mutate(xcymhtrauma4 = case_when(validtrauma == 1 ~ \n            (case_when(iE1ddd %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n            case_when(iE1fff %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n            case_when(iE1iii %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n            case_when(iE1jjj %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n            case_when(iE1kkk %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n            case_when(iE1lll %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n            case_when(iE1eeee %in% c(1,2,3,4) ~ + 1, TRUE ~ 0)))) \n```\n:::\n\n\n\n\n**Traumatic Life Events CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHTRAUMA = case_when(validtrauma == 1 ~ case_when(\n  xcymhtrauma1 >= 1 | xcymhtrauma2 >= 1 ~ 2, \n  xcymhtrauma1 == 0 & xcymhtrauma2 == 0 ~ case_when(\n    xcymhtrauma3 >= 1 ~ case_when(\n      iY1b == 1 | xcymhtrauma4 >=2 ~ 1, \n      iY1b < 1 & xcymhtrauma4 < 2 ~ 0),\n    xcymhtrauma3 == 0 ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Video Gaming CAP (cCYMHVG) {#cCYMHVG}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Video Gaming CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                  |\n|:--------------|:-----------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH VIDEO GAMING_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                |\n|DATE           |12/02/2014                                            |\n|REVISION DATES |NA                                                    |\n|PURPOSE        |CODE FOR CYMH VIDEO GAMING CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                             |\n\n\n:::\n:::\n\n\n\n\n**CYMH Video Gaming CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Video Gaming CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iW21 </td>\n   <td style=\"text-align:left;\"> Problem Video Gaming and Internet Use (Last 90 Days) </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Video Gaming CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validvg = case_when(\n  iW21 %in% c(0,1,2,3) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Video Gaming CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHVG = case_when(validvg == 1 ~ case_when(\n  iW21 %in% c(2,3) ~ 1, \n  iW21 < 2 ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Education CAP (cCYMHEDU) {#cCYMHEDU}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Education CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                               |\n|:--------------|:--------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH EDUCATION_G1_V1.0_P_2017-07-07.txt |\n|BY             |Chenyu Liu, Kim Arbeau                             |\n|DATE           |12/02/2014                                         |\n|REVISION DATES |07/07/2017                                         |\n|PURPOSE        |CODE FOR CYMH EDUCATION CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                          |\n\n\n:::\n:::\n\n\n\n\n**CYMH Education CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Education CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iBB4c </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB10 </td>\n   <td style=\"text-align:left;\"> Strong, Persistent Dissatisfaction with School </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11a </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Refuse to Attend School </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11b </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Removed Due to Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB14a </td>\n   <td style=\"text-align:left;\"> Overall Academic Ability - Performance </td>\n   <td style=\"text-align:left;\"> 0-3,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB2 </td>\n   <td style=\"text-align:left;\"> Employment Arrangements </td>\n   <td style=\"text-align:left;\"> 1-3,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5a </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Increase in Lateness or Absenteeism </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5b </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Poor Productivity or Distruptiveness at School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5e </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Conflict with School Staff </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5f </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Expresses Intent to Quit School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Education CAP Intermediary Variables (ChYMH + Adolescent Supplement)**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(xiBB5a = case_when(\n  iBB4c %in% c(2,3) ~ as.numeric(iBB5a), \n  iBB4c == 1 ~ 0))\n\ndf <- df %>% mutate(xiBB5b = case_when(\n  iBB4c %in% c(2,3) ~ as.numeric(iBB5b), \n  iBB4c == 1 ~ 0))\n\ndf <- df %>% mutate(xiBB5e = case_when(\n  iBB4c %in% c(2,3) ~ as.numeric(iBB5e), \n  iBB4c == 1 ~ 0))\n\ndf <- df %>% mutate(xiBB5f = case_when(\n  iBB4c %in% c(2,3) ~ as.numeric(iBB5f), \n  iBB4c == 1 ~ 0))\n\ndf <- df %>% mutate(xiBB10 = case_when(\n  iBB4c %in% c(2,3) ~ as.numeric(iBB10), \n  iBB4c == 1 ~ 0))\n\ndf <- df %>% mutate(xiBB11a = case_when(\n  iBB4c %in% c(1,2,3) ~ as.numeric(iBB11a)))\n\ndf <- df %>% mutate(xiBB11b = case_when(\n  iBB4c %in% c(1,2,3) ~ as.numeric(iBB11b)))\n\ndf <- df %>% mutate(xiBB14a = case_when(\n  iBB4c %in% c(1,2,3) ~ as.numeric(iBB14a)))\n\ndf <- df %>% mutate(validedu = case_when(\n    iBB2 %in% c(0,1,2,3,8) &\n    xiBB5a %in% c(0,1,8) & \n    xiBB5b %in% c(0,1,8) & \n    xiBB5e %in% c(0,1,8) & \n    xiBB5f %in% c(0,1,8) &\n    xiBB10 %in% c(0,1,2,3) & \n    xiBB11a %in% c(0,1) & \n    xiBB11b %in% c(0,1) & \n    xiBB14a %in% c(0,1,2,3,8) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhedu1 = case_when(validedu == 1 ~ \n            (case_when(xiBB5a == 1 ~ + 1, TRUE ~ 0) +\n             case_when(xiBB5b == 1 ~ + 1, TRUE ~ 0) +\n             case_when(xiBB5e == 1 ~ + 1, TRUE ~ 0) + \n             case_when(xiBB5f == 1 ~ + 1, TRUE ~ 0) + \n             case_when(xiBB10 %in% c(1,3) ~ + 1, TRUE ~ 0) +\n             case_when(xiBB14a %in% c(2,3) ~ + 1, TRUE ~ 0))))\n   \ndf <- df %>% mutate(xcymhedu2 = case_when(validedu == 1 ~ \n            (case_when(xiBB11a | xiBB11b == 1 ~ + 1, TRUE ~ 0) + \n             case_when(iBB2 != 0 & iBB2 != 1 & iBB2 != 2 & iBB2 != 3 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Education CAP Calculation (ChYMH + Adolescent Supplement)**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHEDU = case_when(validedu == 1 ~ case_when(\n  xcymhedu1 >= 1 ~ 2,  \n  xcymhedu1 == 0 ~ case_when(\n    xcymhedu2 == 2 ~ 1, \n    xcymhedu2 < 2 ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Gambling CAP (cCYMHGAMB) {#cCYMHGAMB}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Gambling CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                              |\n|:--------------|:-------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH GAMBLING_G1_V1.0_P_2017-07-06.txt |\n|BY             |Chenyu Liu, Kim Arbeau                            |\n|DATE           |12/02/2014                                        |\n|REVISION DATES |07/06/2017                                        |\n|PURPOSE        |CODE FOR CYMH GAMBLING CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                         |\n\n\n:::\n:::\n\n\n\n\n**CYMH Gambling CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Gambling CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iW8 </td>\n   <td style=\"text-align:left;\"> Gambled Excessively or Uncontrollably (Last 90 Days) </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Gambling CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validgamb = case_when(\n  iW8 %in% c(0,1) &\n  cihiU3 == 1 ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Gambling CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHGAMB = case_when(validgamb == 1 ~ case_when(\n  iW8 == 1 ~ 1, \n  iW8 < 1 ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Life Skills CAP (cCYMHLIFSKIL) {#cCYMHLIFSKIL}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Life Skills CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                 |\n|:--------------|:----------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH LIFE SKILLS_G1_V1.0_P_2017-07-05.txt |\n|BY             |Chenyu Liu, Kim Arbeau                               |\n|DATE           |12/02/2014                                           |\n|REVISION DATES |07/05/2017                                           |\n|PURPOSE        |CODE FOR CYMH LIFE SKILLS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                            |\n\n\n:::\n:::\n\n\n\n\n**CYMH Life Skills CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Life Skills CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iG1aa </td>\n   <td style=\"text-align:left;\"> Meal Preparation - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ab </td>\n   <td style=\"text-align:left;\"> Meal Preparation - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ba </td>\n   <td style=\"text-align:left;\"> Ordinary Housework - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1bb </td>\n   <td style=\"text-align:left;\"> Ordinary Housework - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ca </td>\n   <td style=\"text-align:left;\"> Managing Money - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1cb </td>\n   <td style=\"text-align:left;\"> Managing Money - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ea </td>\n   <td style=\"text-align:left;\"> Phone Use - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1eb </td>\n   <td style=\"text-align:left;\"> Phone Use - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ga </td>\n   <td style=\"text-align:left;\"> Shopping - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1gb </td>\n   <td style=\"text-align:left;\"> Shopping - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1ha </td>\n   <td style=\"text-align:left;\"> Transportation - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1hb </td>\n   <td style=\"text-align:left;\"> Transportation - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1na </td>\n   <td style=\"text-align:left;\"> Use of Technology - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG1nb </td>\n   <td style=\"text-align:left;\"> Use of Technology - Self Capacity </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2a </td>\n   <td style=\"text-align:left;\"> Bathing - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2b </td>\n   <td style=\"text-align:left;\"> Personal Hygiene - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2c </td>\n   <td style=\"text-align:left;\"> Dressing Upper Body - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2d </td>\n   <td style=\"text-align:left;\"> Dressing Lower Body - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2h </td>\n   <td style=\"text-align:left;\"> Toilet Use - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iG2j </td>\n   <td style=\"text-align:left;\"> Eating - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Life Skills CAP Intermediary Variables (USE FOR CHYMH + ADOLESCENT SUPPLEMENT)**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validlifskil = case_when(\n    iG1aa %in% c(0,1,2,3,4,5,6,8) & \n    iG1ab %in% c(0,1,2,3,4,5,6) & \n    iG1ba %in% c(0,1,2,3,4,5,6,8) &\n    iG1bb %in% c(0,1,2,3,4,5,6) & \n    iG1ca %in% c(0,1,2,3,4,5,6,8) &\n    iG1cb %in% c(0,1,2,3,4,5,6) & \n    iG1ea %in% c(0,1,2,3,4,5,6,8) & \n    iG1eb %in% c(0,1,2,3,4,5,6) & \n    iG1ga %in% c(0,1,2,3,4,5,6,8) & \n    iG1gb %in% c(0,1,2,3,4,5,6) & \n    iG1ha %in% c(0,1,2,3,4,5,6,8) & \n    iG1hb %in% c(0,1,2,3,4,5,6) & \n    iG1na %in% c(0,1,2,3,4,5,6,8) & \n    iG1nb %in% c(0,1,2,3,4,5,6) & \n    iG2a %in% c(0,1,2,3,4,5,6,8) &\n    iG2b %in% c(0,1,2,3,4,5,6,8) &\n    iG2c %in% c(0,1,2,3,4,5,6,8) &\n    iG2d %in% c(0,1,2,3,4,5,6,8) &\n    iG2h %in% c(0,1,2,3,4,5,6,8) &\n    iG2j %in% c(0,1,2,3,4,5,6,8) &\n    T_age > 0 & T_age < 130 ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhlifskil1 = case_when(validlifskil == 1 ~ \n         (case_when(iG2a %in% c(3,4,5,6) ~ + 1, TRUE ~ 0) +\n         case_when(iG2b %in% c(3,4,5,6) ~ + 1, TRUE ~ 0) +\n         case_when(iG2c %in% c(3,4,5,6) ~ + 1, TRUE ~ 0) +\n         case_when(iG2d %in% c(3,4,5,6) ~ + 1, TRUE ~ 0) +\n         case_when(iG2j %in% c(3,4,5,6) ~ + 1, TRUE ~ 0) +\n         case_when(iG2h %in% c(3,4,5,6) ~ + 1, TRUE ~ 0))))\n\ndf <- df %>% mutate(xcymhlifskil2 = case_when(validlifskil == 1 ~ \n        (case_when(iG1aa | iG1ab %in% c(4,5,6) ~ + 1, TRUE ~ 0) +\n        case_when(iG1ba | iG1bb %in% c(4,5,6) ~ + 1, TRUE ~ 0) +\n        case_when(iG1ca | iG1cb %in% c(4,5,6) ~ + 1, TRUE ~ 0) +\n        case_when(iG1ea | iG1eb %in% c(4,5,6) ~ + 1, TRUE ~ 0) +\n        case_when(iG1ga | iG1gb %in% c(4,5,6) ~ + 1, TRUE ~ 0) +\n        case_when(iG1ha | iG1hb %in% c(4,5,6) ~ + 1, TRUE ~ 0) +\n        case_when(iG1na | iG1nb %in% c(4,5,6) ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Life Skills CAP Calculation (ChYMH + Adolescent Supplement)**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHLIFSKIL = case_when(validlifskil == 1 ~ \n             (case_when(T_age >= 6 ~ (case_when(xcymhlifskil1 >= 2 ~ 2, TRUE ~ 0) +\n                         case_when(xcymhlifskil1 < 2 ~ case_when(xcymhlifskil2 >= 2 ~\n                                  (case_when(T_age >= 12 ~ 1, TRUE ~ 0) + \n                                   case_when(T_age <= 6 & T_age >= 12 ~ 0, TRUE ~ 0)), \n                                                            TRUE ~ 0), TRUE ~ 0))))))\n```\n:::\n\n\n\n\n## CYMH Sexual Behaviour CAP (cCYMHSEX) {#cCYMHSEX}\n\n**Last Updated:** May 5, 2023\n\n**Last Updated By:** Shauna Heron\n\n**interRAI Repository Information CYMH Sexual Behaviour CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                      |\n|:--------------|:---------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH SEXUAL BEHAVIOUR_G1_V1.0_P_2019-04-28.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                    |\n|DATE           |12/02/2014                                                |\n|REVISION DATES |07/05/2017, 04/28/2019                                    |\n|PURPOSE        |CODE FOR CYMH SEXUAL BEHAVIOUR CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                 |\n\n\n:::\n:::\n\n\n\n\n**CYMH Sexual Behaviour CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Sexual Behaviour CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE19a </td>\n   <td style=\"text-align:left;\"> Evidence of Highly Inappropriate Sexual Knowledge or Excessive Preoccupation with Sex in Last 90 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3o </td>\n   <td style=\"text-align:left;\"> Inappropriate Public Sexual Behaviour or Public Disrobing </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iJ10a </td>\n   <td style=\"text-align:left;\"> Performed Sexual Acts for Money, Desired Objects or Favours (Last 90 Days) </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX3 </td>\n   <td style=\"text-align:left;\"> History of Sexual Violence - Assault as Perpetrator </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW27 </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concern About Highly Risky or Problematic Sexual Behaviour </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Sexual Behaviour CAP Intermediary Variables (ChYMH + Adolescent Supplement)**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validsex = case_when( \n    iE3o %in% c(0,1,2,3,4) & \n    iE19a %in% c(0,1) & \n    iW27 %in% c(0,1) ~ 1, TRUE ~ 0))\n#iJ10a and iX3 are from the Adolescent Supplement. The CAP can be calculated without these. \n```\n:::\n\n\n\n\n**Sexual Behaviour CAP Calculation (ChYMH + Adolescent Supplement)**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHSEX = case_when(validsex == 1 ~ case_when(\n  (iE3o %in% c(2,3,4) | iE19a == 1 | iJ10a == 1 | iX3 == 1 | iW27 == 1) ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYMH Weight Management CAP (cCYMHWTMGT) {#cCYMHWTMGT}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Weight Management CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                       |\n|:--------------|:----------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH WEIGHT MANAGEMENT_G1_V1.0_P_2017-07-04.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                     |\n|DATE           |12/02/2014                                                 |\n|REVISION DATES |07/04/2017                                                 |\n|PURPOSE        |CODE FOR CYMH WEIGHT MANAGEMENT CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                  |\n\n\n:::\n:::\n\n\n\n\n**CYMH Weight Management CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Weight Management CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iK2i </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concerns of Child/Youths Failure to Gain Weight </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iK2j </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concerns of Child/Youths Weight Gain </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iK2k </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concerns of Child/Youths Weight Loss </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iK8a </td>\n   <td style=\"text-align:left;\"> Instances of Binge Eating, Purging or Bulimia - During Last 30 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iK8b </td>\n   <td style=\"text-align:left;\"> Unrealistic Fear of Weight Gain; Statements that suggest a Distorted Body Image - During Ladt 30 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iK8c </td>\n   <td style=\"text-align:left;\"> Fasting or Major Restriction of All Diet - Last 30 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Weight Management CAP Intermediary Variables (ChYMH + Adolescent Supplement)**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validwtmgt = case_when(\n    iK2i %in% c(0,1) & \n    iK2j %in% c(0,1) & \n    iK2k %in% c(0,1) & \n    iK8a %in% c(0,1) & \n    iK8b %in% c(0,1) & \n    iK8c %in% c(0,1) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Weight Management CAP Calculation (ChYMH + Adolescent Supplement)**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHWTMGT = case_when(validwtmgt == 1 ~ case_when(\n  iK2k == 1 | iK2k == 1 | iK2i == 1 ~ 2, \n  iK2j < 1 & iK2k < 1 & iK2i < 1 ~ case_when(\n    iK8a == 1 | iK8b ==1 | iK8c == 1 ~ 1, \n    iK8a < 1 & iK8b < 1 & iK8c < 1 ~ 0))))\n```\n:::\n\n\n\n\n## CYMH Substance Use CAP (cCYMHSUBUSE) {#cCYMHSUBUSE}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYMH Substance Use CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                   |\n|:--------------|:------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYMH SUBSTANCE USE_G1_V1.0_P_2017-07-06.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                 |\n|DATE           |12/02/2014                                             |\n|REVISION DATES |07/06/2017                                             |\n|PURPOSE        |CODE FOR CYMH SUBSTANCE USE CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                              |\n\n\n:::\n:::\n\n\n\n\n**CYMH Substance Use CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYMH Substance Use CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iM6 </td>\n   <td style=\"text-align:left;\"> Intentional Misuse of Prescription or Over the Counter Medication </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW2 </td>\n   <td style=\"text-align:left;\"> Consumed Alcohol to Point of Intoxication (Last 30 days) </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW3a </td>\n   <td style=\"text-align:left;\"> Inhalants - Time Since Last Used </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW3b </td>\n   <td style=\"text-align:left;\"> Hallucinogens  - Time Since Last Used </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW3c </td>\n   <td style=\"text-align:left;\"> Cocaine/Crack  - Time Since Last Used </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW3d </td>\n   <td style=\"text-align:left;\"> Stimulants  - Time Since Last Used </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW3e </td>\n   <td style=\"text-align:left;\"> Opiates (Including Synthetics)  - Time Since Last Used </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iW3f </td>\n   <td style=\"text-align:left;\"> Cannabis  - Time Since Last Used </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Substance Use CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validsubuse = case_when(\n    iM6 %in% c(0,1) & \n    iW2 %in% c(0,1,2,3,4) &\n    iW3a %in% c(0,1,2,3,4,5) &\n    iW3b %in% c(0,1,2,3,4,5) &\n    iW3c %in% c(0,1,2,3,4,5) &\n    iW3d %in% c(0,1,2,3,4,5) &\n    iW3e %in% c(0,1,2,3,4,5) &\n    iW3f %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcymhsubuse = case_when(validsubuse == 1 ~ \n            (case_when(iM6 == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iW2 %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n             case_when(iW3a %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iW3b %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n             case_when(iW3c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n             case_when(iW3d %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n             case_when(iW3e %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n             case_when(iW3f %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Substance Use CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYMHSUBUSE = case_when(validsubuse == 1 ~ case_when(\n  xcymhsubuse >= 1 ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYDD Continence CAP (cCYDDCONTI) {#cCYDDCONTI}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Continence CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                |\n|:--------------|:---------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD CONTINENCE_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                              |\n|DATE           |12/02/2014                                          |\n|REVISION DATES |NA                                                  |\n|PURPOSE        |CODE FOR CYDD CONTINENCE CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                           |\n\n\n:::\n:::\n\n\n\n\n**CYDD Continence CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Continence CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iH1 </td>\n   <td style=\"text-align:left;\"> Bladder Continence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iH3 </td>\n   <td style=\"text-align:left;\"> Bowel Continence </td>\n   <td style=\"text-align:left;\"> 0-5,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Continence CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validconti = case_when(\n  iH1 %in% c(0,1,2,3,4,5,8) & \n  iH3 %in% c(0,1,2,3,4,5,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Continence CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDCONTI = case_when(validconti == 1 ~ \n            case_when(iH1 | iH3 %in% c(3,4,5) ~ 1, TRUE ~ 0))) \n```\n:::\n\n\n\n\n## CYDD Suicidality and Purposeful Self-Harm CAP (cCYDDSSH) {#cCYDDSSH}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\nCalculating the Suicidality and Purposeful Self-Harm CAP requires that the Severity of Self-Harm Scale (\\@ref(sCYSOS)) and the Communication Scale (\\@ref(sCOMM)) have been calculated.\n\n**interRAI Repository Information CYDD Suicidality and Purposeful Self-Harm CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                   |\n|:--------------|:------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD SUICIDALITY AND PURPOSEFUL SELF-HARM   |\n|BY             |Chenyu Liu, Kim Arbeau                                 |\n|DATE           |12/02/2014                                             |\n|REVISION DATES |09/30/21                                               |\n|PURPOSE        |CODE FOR CYDD SUICIDALITY AND PURPOSEFUL SELF-HARM CAP |\n|BASED ON       |interRAI SUITE, VERSION 9                              |\n\n\n:::\n:::\n\n\n\n\n**CYDD Suicidality and Purposeful Self-Harm CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD suicidality and Purposeful Self-Harm\n                  CAP variable label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iB15 </td>\n   <td style=\"text-align:left;\"> Documented Severity of Intellectual Disability </td>\n   <td style=\"text-align:left;\"> 0-5,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1oo </td>\n   <td style=\"text-align:left;\"> Impulsive </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Suicidality and Purposeful Self-Harm CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validsshdd = case_when(\n    iB15 %in% c(0,1,2,3,4,5,8) & \n    iE1oo %in% c(0,1,2,3,4) & \n    sCOMM %in% c(0:8) & \n    sCYSOS %in% c(0:6) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Suicidality and Purposeful Self-Harm CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDSSH = case_when(validsshdd == 1 ~ case_when(\n  iB15 %in% c(0,1,2,3) & sCOMM < 5 ~ case_when(\n    sCYSOS %in% c(5,6) ~ 2, \n    sCYSOS %in% c(3,4) ~ case_when(\n      iE1oo %in% c(2,3,4) ~ 2, \n      iE1oo < 2 ~ 1), \n    sCYSOS < 3 ~ 0),\n  iB15 != 0 & iB15 != 1 & iB15 != 2 & iB15 != 3 | sCOMM > 5 ~ 0)))\n```\n:::\n\n\n\n\n## CYDD Accessibility & Mobility CAP (cCYDDAM) {#cCYDDAM}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Accessibility & Mobility CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                           |\n|:--------------|:--------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD ACCESSBILITY MOBILITY_G1_V1.1_P_2019-08-20.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                         |\n|DATE           |12/02/2014                                                     |\n|REVISION DATES |08/20/2019                                                     |\n|PURPOSE        |CODE FOR CYDD ACCESSBILITY & MOBILITY CAP                      |\n|BASED ON       |interRAI SUITE, VERSION 9                                      |\n\n\n:::\n:::\n\n\n\n\n**CYDD Accessibility & Mobility CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Accessibility &amp; Mobility CAP variable\n                                  label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iG2f </td>\n   <td style=\"text-align:left;\"> Locomotion - Self Performance </td>\n   <td style=\"text-align:left;\"> 0-6,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Accessibility & Mobility CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validam = case_when(\n  iG2f %in% c(0,1,2,3,4,5,6,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Accessibility & Mobility CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDAM = case_when(validam == 1 ~ case_when(\n  iG2f %in% c(5,6,8) ~ 2, \n  iG2f %in% c(3,4) ~ 1, \n  iG2f < 3 ~ 0)))\n```\n:::\n\n\n\n\n## CYDD Education Support CAP (cCYDDEDU) {#cCYDDEDU}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Education Support CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                       |\n|:--------------|:----------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD EDUCATION SUPPORT_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                     |\n|DATE           |12/02/2014                                                 |\n|REVISION DATES |NA                                                         |\n|PURPOSE        |CODE FOR CYDD EDUCATION SUPPORT CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                  |\n\n\n:::\n:::\n\n\n\n\n**CYDD Education Support CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Education Support CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iBB10 </td>\n   <td style=\"text-align:left;\"> Strong, Persistent Dissatisfaction with School </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11a </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Refuse to Attend School </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB11b </td>\n   <td style=\"text-align:left;\"> Child/Youth Currently Removed Due to Distruptive Behaviour </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5b </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Poor Productivity or Distruptiveness at School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5e </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Conflict with School Staff </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iBB5f </td>\n   <td style=\"text-align:left;\"> Distruptive Education (Last 90 days) - Expresses Intent to Quit School </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Education Support CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validedusupp = case_when(\n    iBB5b %in% c(0,1,8) & \n    iBB5e %in% c(0,1,8) & \n    iBB5f %in% c(0,1,8) & \n    iBB10 %in% c(0,1,2,3) &\n    iBB11a %in% c(0,1) & \n    iBB11b %in% c(0,1) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Education Support CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDEDU = case_when(validedusupp == 1 ~ case_when(\n  iBB5b == 1 | iBB5e == 1 | iBB5f == 1 | iBB10 %in% c(1,3) | iBB11a == 1 |\n    iBB11b == 1 ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYDD Injurious Behaviour CAP (cCYDDINJUR) {#cCYDDINJUR}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Injurious Behaviour CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                         |\n|:--------------|:------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD INJURIOUS BEHAVIOUR_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                       |\n|DATE           |12/02/2014                                                   |\n|REVISION DATES |NA                                                           |\n|PURPOSE        |CODE FOR CYDD INJURIOUS BEHAVIOUR CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                    |\n\n\n:::\n:::\n\n\n\n\n**CYDD Injurious Behaviour CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Injurious Behaviour CAP variable \n                                   label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE3m </td>\n   <td style=\"text-align:left;\"> Physical Abuse </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3q </td>\n   <td style=\"text-align:left;\"> Destructive Behaviour Towards Property </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE3w </td>\n   <td style=\"text-align:left;\"> Self-Injurious Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iX2a </td>\n   <td style=\"text-align:left;\"> Violence to Others </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Injurious Behaviour CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validinjur = case_when(\n    iE3m %in% c(0,1,2,3,4) & \n    iE3q %in% c(0,1,2,3,4) & \n    iE3w %in% c(0,1,2,3,4) & \n    iX2a %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Injurious Behaviour CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDINJUR = case_when(validinjur == 1 ~ case_when(\n  iE3m %in% c(1,2,3,4) | iE3q %in% c(1,2,3,4) | iE3w %in% c(1,2,3,4) | \n    iX2a %in% c(4,5) ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYDD Modified Nutrition Intake (cCYDDNUTRI) {#cCYDDNUTRI}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Modified Nutrition Intake CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                        |\n|:--------------|:-----------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD MODIFIED NUTRITION_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                      |\n|DATE           |12/02/2014                                                  |\n|REVISION DATES |NA                                                          |\n|PURPOSE        |CODE FOR CYDD MODIFIED NUTRITION INTAKE CAP                 |\n|BASED ON       |interRAI SUITE, VERSION 9                                   |\n\n\n:::\n:::\n\n\n\n\n**CYDD Modified Nutrition Intake CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Modified Nutrition Intake CAP  \n                      variable label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iK3 </td>\n   <td style=\"text-align:left;\"> Mode of Nutritional Intake </td>\n   <td style=\"text-align:left;\"> 0-9 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Modified Nutrition Intake CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validnutri = case_when(\n  iK3 %in% c(0,1,2,3,4,5,6,7,8,9) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Modified Nutrition Intake CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDNUTRI = case_when(validnutri == 1 ~ \n          (case_when(iK3 %in% c(3,4) ~ + 2, TRUE ~ 0) +\n           case_when(iK3 %in% c(5,6,7,8) ~ + 1, TRUE ~ 0)+\n           case_when(iK3 %in% c(0,1,2,9) ~ + 0, TRUE ~ 0))))\n```\n:::\n\n\n\n\n## CYDD Traumatic Life Events (cCYDDTRAUMA) {#cCYDDTRAUMA}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Traumatic Life Events CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                           |\n|:--------------|:--------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD TRAUMATIC LIFE EVENTS_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                         |\n|DATE           |12/02/2014                                                     |\n|REVISION DATES |NA                                                             |\n|PURPOSE        |CODE FOR CYDD TRAUMATIC LIFE EVENTS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                      |\n\n\n:::\n:::\n\n\n\n\n**CYDD Traumatic Life Events Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Traumatic Life Events CAP variable  \n                                label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iB34a </td>\n   <td style=\"text-align:left;\"> History of Care - Emotional Neglect </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34b </td>\n   <td style=\"text-align:left;\"> History of Care - Physical Needs </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iB34c </td>\n   <td style=\"text-align:left;\"> History of Care - Safety Needs </td>\n   <td style=\"text-align:left;\"> 0-3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1ddd </td>\n   <td style=\"text-align:left;\"> Flat or Blunted Affect </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1eeee </td>\n   <td style=\"text-align:left;\"> Hypervigilance </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1fff </td>\n   <td style=\"text-align:left;\"> Expressions, Including Non-verbal of Unrealistic Fears </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1iii </td>\n   <td style=\"text-align:left;\"> Intrusive Thoughts or Flashbacks </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1jjj </td>\n   <td style=\"text-align:left;\"> Re-enactment Through Play of Traumatic Life Events </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1kkk </td>\n   <td style=\"text-align:left;\"> Episodes of Panic </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iE1lll </td>\n   <td style=\"text-align:left;\"> Nightmares </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iR9 </td>\n   <td style=\"text-align:left;\"> Change in Severity or Frequency of Psychiatric Symptoms - Compared to 30 Dasy ago or Since Last Assessment Within 30 Days </td>\n   <td style=\"text-align:left;\"> 1-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aa </td>\n   <td style=\"text-align:left;\"> Serious Accident or Physical Impariment </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ak </td>\n   <td style=\"text-align:left;\"> Witnessed Severe Accident, Disaster, Terrorism, Violence or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1al </td>\n   <td style=\"text-align:left;\"> Victim of Crime </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1am </td>\n   <td style=\"text-align:left;\"> Victim of Sexual Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1an </td>\n   <td style=\"text-align:left;\"> Victim of Physical Assault or Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ao </td>\n   <td style=\"text-align:left;\"> Victim of Emotional Abuse </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1aq </td>\n   <td style=\"text-align:left;\"> Victim of Bullying </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1ar </td>\n   <td style=\"text-align:left;\"> Death or Loss of Parent or Primary Caregiver </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1at </td>\n   <td style=\"text-align:left;\"> Abandoned by Parent(s)/Caregiver(s) </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1au </td>\n   <td style=\"text-align:left;\"> Witnessed Domestic Violence </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY1b </td>\n   <td style=\"text-align:left;\"> Describes One or More Life Events as Invoking a Sense of Horror or Intense Fear </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY2a </td>\n   <td style=\"text-align:left;\"> Fearful of Family Member or Close Aquaintance </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY2c </td>\n   <td style=\"text-align:left;\"> Child/Youth has Concerns for His/Her Safety </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY2d </td>\n   <td style=\"text-align:left;\"> Family, Caregiver, Friend or Staff Expresses Concerns that Child/Youth is at Imminent Risk for Victimization </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Traumatic Life Events CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcyddtrauma = case_when(\n    iB34a %in% c(0,1,2,3) & \n    iB34b %in% c(0,1,2,3) & \n    iB34c %in% c(0,1,2,3) & \n    iE1ddd %in% c(0,1,2,3,4) & \n    iE1fff %in% c(0,1,2,3,4) & \n    iE1iii %in% c(0,1,2,3,4) & \n    iE1jjj %in% c(0,1,2,3,4) & \n    iE1kkk %in% c(0,1,2,3,4) & \n    iE1lll %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) &\n    iR9 %in% c(1,2,3,4) &\n    iY1aa %in% c(0,1,2,3,4,5) & \n    iY1ak %in% c(0,1,2,3,4,5) &\n    iY1al %in% c(0,1,2,3,4,5) &\n    iY1am %in% c(0,1,2,3,4,5) &\n    iY1an %in% c(0,1,2,3,4,5) &\n    iY1ao %in% c(0,1,2,3,4,5) &\n    iY1aq %in% c(0,1,2,3,4,5) &\n    iY1ar %in% c(0,1,2,3,4,5) &\n    iY1at %in% c(0,1,2,3,4,5) &\n    iY1au %in% c(0,1,2,3,4,5) &\n    iY1b %in% c(0,1,8) & \n    iY2a %in% c(0,1) & \n    iY2c %in% c(0,1) & \n    iY2d %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcyddtrauma1 = case_when(validcyddtrauma == 1 ~ \n          (case_when(iY1aa %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1ak %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1al %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1am %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1an %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1ao %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1aq %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1ar %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1at %in% c(4,5) ~ + 1, TRUE ~ 0) +\n           case_when(iY1au %in% c(4,5) ~ + 1, TRUE ~ 0))))\n\ndf <- df %>% mutate(xcyddtrauma2 = case_when(validcyddtrauma == 1 ~ \n            (case_when(iY2a == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iY2c == 1 ~ + 1, TRUE ~ 0) +\n             case_when(iY2d == 1 ~ + 1, TRUE ~ 0))))\n   \n  \n\ndf <- df %>% mutate(xcyddtrauma3 = case_when(validcyddtrauma == 1 ~ \n            (case_when(iB34a | iB34b | iB34c %in% c(1,2,3) ~ + 1, TRUE ~ 0) +\n            case_when(iY1aa %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1ak %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1al %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1am %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1an %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1ao %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1aq %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1ar %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1at %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n            case_when(iY1au %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n\ndf <- df %>% mutate(xcyddtrauma4 = case_when(validcyddtrauma == 1 ~ \n  (case_when(iE1ddd %in% c(1,2,3,4) ~ + 1,  TRUE ~ 0) +\n  case_when(iE1fff %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n  case_when(iE1iii %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n  case_when(iE1jjj %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n  case_when(iE1kkk %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n  case_when(iE1lll %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n  case_when(iE1eeee %in% c(1,2,3,4) ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Traumatic Life Events CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDTRAUMA = case_when(validcyddtrauma == 1 ~ case_when(\n  xcyddtrauma1 >= 1 | xcyddtrauma2 >= 1 ~ 2, \n  xcyddtrauma1 == 0 & xcyddtrauma2 == 0 ~ case_when(\n    xcyddtrauma3 >= 1 ~ case_when(\n      iR9 == 1 | iY1b == 1 | xcyddtrauma4 >= 2 ~ 1, \n      iR9 != 1 & iY1b < 1 & xcyddtrauma4 < 2 ~ 0),\n    xcyddtrauma3 == 0 ~ 0))))\n```\n:::\n\n\n\n\n## CYDD Play and Leisure (cCYDDPLAY) {#cCYDDPLAY}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Play and Leisure CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                      |\n|:--------------|:---------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD PLAY AND LEISURE_G1_V2.0_P_2021-10-21.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                    |\n|DATE           |12/02/2014                                                |\n|REVISION DATES |01/25/2021 ; 10/21/2021                                   |\n|PURPOSE        |CODE FOR CYDD PLAY AND LEISURE CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                 |\n\n\n:::\n:::\n\n\n\n\n**CYDD Play and Leisure Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Play and Leisure CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iC1d </td>\n   <td style=\"text-align:left;\"> Cognitive Skills for Daily Decision-Making </td>\n   <td style=\"text-align:left;\"> 0-5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF5b </td>\n   <td style=\"text-align:left;\"> At Ease Doing Planned or Structured Activities </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iS11a </td>\n   <td style=\"text-align:left;\"> Extacurricular Lessons/Classes - Last 90 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iS11b </td>\n   <td style=\"text-align:left;\"> Volunteering - Last 90 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iS11c </td>\n   <td style=\"text-align:left;\"> Organized Club or Team Program - Last 90 Days </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iS12 </td>\n   <td style=\"text-align:left;\"> Child/Youth Demonstrated Limited Ability to Engage in Unstructured Play or Leisure </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iS7b </td>\n   <td style=\"text-align:left;\"> When Asked Child/Youth Prefers Change - Recreational Activites </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iS7d </td>\n   <td style=\"text-align:left;\"> When Asked Child/Youth Prefers Change - Daily Routine </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Play and Leisure CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validplay = case_when(\n    iC1d %in% c(0,1,2,3,4) & \n    iF5b %in% c(0,1,2,3) & \n    iS7b %in% c(0,1,8) & \n    iS7d %in% c(0,1,8) & \n    iS11a %in% c(0,1) & \n    iS11b %in% c(0,1) & \n    iS11c %in% c(0,1) & \n    iS12 %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcyddplay = case_when(validplay == 1 ~ case_when(\n  iS11a == 0 & iS11b == 0 & iS11c == 0 ~ + 1, \n  iF5b == 0 ~ + 1, \n  iS12 == 1 ~ + 1)))\n```\n:::\n\n\n\n\n**Play and Leisure CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n#This CAP is not calculated if iC1d == 5 \ndf <- df %>% mutate(cCYDDPLAY = case_when(validplay == 1 ~ case_when(\n  iC1d %in% c(0,1,2,3,4) ~ case_when(\n    xcyddplay >= 1 ~ 2, \n    iS7b == 1 | iS7d == 1 ~ 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n## CYDD Problematic Eating CAP (cCYDDEAT) {#cCYDDEAT}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Problematic Eating CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                        |\n|:--------------|:-----------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD PROBLEMATIC EATING_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                      |\n|DATE           |12/02/2014                                                  |\n|REVISION DATES |NA                                                          |\n|PURPOSE        |CODE FOR CYDD PROBLEMATIC EATING BEHAVIOUR CAP              |\n|BASED ON       |interRAI SUITE, VERSION 9                                   |\n\n\n:::\n:::\n\n\n\n\n**CYDD Problematic Eating Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Problematic Eating CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iE3y </td>\n   <td style=\"text-align:left;\"> Inappropriate Eating Behaviour </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iK21 </td>\n   <td style=\"text-align:left;\"> Pica </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Problematic Eating CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(valideat = case_when(\n  iE3y %in% c(0,1,2,3,4) & \n  iK21 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Problematic Eating CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDEAT = case_when(valideat == 1 ~ case_when(\n  iE3y %in% c(1,2,3,4) | iK21 %in% c(1,2,3,4) ~ 1, \n  iE3y < 1 & iK21 < 1 ~ 0)))\n```\n:::\n\n\n\n\n## CYDD Social Relations CAP (cCYDDSOCREL) {#cCYDDSOCREL}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Social Relations CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                      |\n|:--------------|:---------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD SOCIAL RELATIONS_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                    |\n|DATE           |12/02/2014                                                |\n|REVISION DATES |NA                                                        |\n|PURPOSE        |CODE FOR CYDD SOCIAL RELATIONS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                 |\n\n\n:::\n:::\n\n\n\n\n**CYDD Social Relations CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Social Realtions CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iF13 </td>\n   <td style=\"text-align:left;\"> Peer Group Includes Individuals with Persistent Antisocial Behaviour </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF5a </td>\n   <td style=\"text-align:left;\"> At East Interacting with Others </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF5e </td>\n   <td style=\"text-align:left;\"> Initiates Interaction(s) with Others </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF5f </td>\n   <td style=\"text-align:left;\"> Reacts Positively to Interactions Initiates by Others </td>\n   <td style=\"text-align:left;\"> 0-4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19b </td>\n   <td style=\"text-align:left;\"> Conflict with or Repeated Criticism of Close Friends </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iP19f </td>\n   <td style=\"text-align:left;\"> Pervasive Conflict with Peers </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**CYDD Social Relations CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcyddsocrel = case_when(\n    iF5a %in% c(0,1,2,3) & \n    iF5e %in% c(0,1,2,3) & \n    iF5f %in% c(0,1,2,3) & \n    iF13 %in% c(0,1) & \n    iP19b %in% c(0,1,8) & \n    iP19f %in% c(0,1,8) ~ 1, TRUE ~ 0))\n```\n:::\n\n\n\n\n**Social Relations CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDSOCREL = case_when(validcyddsocrel == 1 ~ case_when(\n  iF13 == 1 | iP19b == 1 | iP19f == 1 ~ 2, \n  iF13 != 1 & iP19b != 1 & iP19f != 1 ~ case_when(\n    iF5a == 0 | iF5e == 0 | iF5f == 0 ~ 1, TRUE ~ 0)))) \n```\n:::\n\n\n\n\n## CYDD Strengths CAP (sCYDDSTR) {#cCYDDSTR}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Strengths CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                               |\n|:--------------|:--------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD STRENGTHS_G1_V1.0_P_2014-12-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                             |\n|DATE           |12/02/2014                                         |\n|REVISION DATES |NA                                                 |\n|PURPOSE        |CODE FOR CYDD STRENGTHS CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                          |\n\n\n:::\n:::\n\n\n\n\n**CYDD Strengths CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Strengths CAP variable label \n                                      information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iC7 </td>\n   <td style=\"text-align:left;\"> Adaptability to Change in Routine or Environment </td>\n   <td style=\"text-align:left;\"> 0-2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iC9a </td>\n   <td style=\"text-align:left;\"> Problem Solving and Reasoning Ability </td>\n   <td style=\"text-align:left;\"> 0,1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF15a </td>\n   <td style=\"text-align:left;\"> Notable Talent </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF15g </td>\n   <td style=\"text-align:left;\"> Tolerates Frustration Well </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iF8b </td>\n   <td style=\"text-align:left;\"> Consistent Positive Outlook </td>\n   <td style=\"text-align:left;\"> 0-1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Strengths CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validcyddstr = case_when(\n    iC7 %in% c(0,1,2) & \n    iC9a %in% c(0,1,8) & \n    iF8b %in% c(0,1) & \n    iF15a %in% c(0,1) & \n    iF15g %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xcyddstr = case_when(validcyddstr == 1 ~ \n            (case_when(iC7 == 2 ~ + 1, TRUE ~ 0)+\n             case_when(iC9a %in% c(1,8) ~ + 1, TRUE ~ 0) +\n             case_when(iF8b == 0 ~ + 1, TRUE ~ 0) +\n             case_when(iF15a == 0 ~ + 1, TRUE ~ 0) + \n             case_when(iF15g == 0 ~ + 1, TRUE ~ 0))))\n```\n:::\n\n\n\n\n**Strengths CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDSTR = case_when(validcyddstr == 1 ~ case_when(\n  xcyddstr >= 4 ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CYDD Support System for Discharge (cCYDDSSDIS) {#cCYDDSSDIS}\n\n**Last Updated:** May 2, 2022\n\n**Last Updated By:** Brooklyn Keminen\n\n**interRAI Repository Information CYDD Support System for Discharge CAP**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|Field          |Text                                                                  |\n|:--------------|:---------------------------------------------------------------------|\n|PROGRAM        |SUITE9_CAP_CYDD SUPPORT SYSTEM FOR DISCHARGE_G1_V1.1_P_2021-02-02.txt |\n|BY             |Chenyu Liu, Kim Arbeau                                                |\n|DATE           |12/02/2014                                                            |\n|REVISION DATES |02/02/2021                                                            |\n|PURPOSE        |CODE FOR CYDD SUPPORT SYSTEM FOR DISCHARGE CAP                        |\n|BASED ON       |interRAI SUITE, VERSION 9                                             |\n\n\n:::\n:::\n\n\n\n\n**Support System for Discharge CAP Variable Summary Table**\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover table-condensed table-bordered\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>CYDD Support System for Discharge CAP  \n                      variable label information and accepted response values.</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> iCodes </th>\n   <th style=\"text-align:left;\"> Variable Labels </th>\n   <th style=\"text-align:left;\"> Accepted Response Values </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> iA11b </td>\n   <td style=\"text-align:left;\"> Usual residential status </td>\n   <td style=\"text-align:left;\"> 1-15 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iA12e </td>\n   <td style=\"text-align:left;\"> Living Arrangement Prior to Admission or Living Arrangement </td>\n   <td style=\"text-align:left;\"> 1-6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iR16a </td>\n   <td style=\"text-align:left;\"> Child/Youth has Access to Formal Mental Health Treatment Following Discharge </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iR16b </td>\n   <td style=\"text-align:left;\"> Child/Youth has Access to Formal Case Coordination Services Following Discharge </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> iY8a </td>\n   <td style=\"text-align:left;\"> Parent/Primary Caregiver is Unable or Unwilling to Continue in Caring Activites </td>\n   <td style=\"text-align:left;\"> 0-1,8 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n**Support System for Discharge CAP Intermediary Variables**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(validssdis = case_when(\n    iA11b %in% c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15) & \n    iA12e %in% c(1,2,3,4,5,6) & \n    iR16d %in% c(0,1,2,8) & \n    iR16e %in% c(0,1,2,8) & \n    iY8a %in% c(0,1,8) ~ 1, TRUE ~ 0))\n# iA11b replaced iA11j\n```\n:::\n\n\n\n\n**Support System for Discharge CAP Calculation**\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% mutate(cCYDDSSDIS = case_when(validssdis == 1 ~ case_when(\n  iA11b %in% c(5,8) | iA12e %in% c(1,5) | iY8a %in% c(1,8) | iR16d %in% c(0,1) |\n    iR16e %in% c(0,1) ~ 1, TRUE ~ 0)))\n```\n:::\n\n\n\n\n## CAP Reliability Metrics Table\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ncaps <- as.data.frame(subset(df, select = c(\n                  \"cCYMHATTACH\",\"cCYMHCAREDIST\",\"cCYMHCTRLINT\",\n                  \"cCYMHHARMOTH\",\"cCYMHINFSUPP\",\"cCYMHMEDADH\",\"cCYMHPARENT\",\n                  \"cCYMHREAD\",\"cCYMHSOCREL\",\"cCYMHSSH\",\"cCYMHTOBAC\",\n                  \"cCYMHTRAUMA\",\"cCYMHEDU\",\"cCYMHLIFSKIL\",\"cCYMHWTMGT\",\n                  \"cCYDDCONTI\",\"cCYDDAM\",\"cCYDDINJUR\",\"cCYDDTRAUMA\",\n                  \"cCYDDEAT\",\"cCYDDSTR\",\"cCYMHCAFFE\",\"cCYMHCOMM\",\n                  \"cCYMHCRIM\",\"cCYMHFIRE\",\"cCYMHIPCON\",\"cCYMHMEDREV\",\n                  \"cCYMHPA\",\"cCYMHSLEEP\",\"cCYMHSTR\",\"cCYMHSSDIS\",\n                  \"cCYMHTRANS\",\"cCYMHVG\",\"cCYMHGAMB\",\"cCYMHSEX\",\n                  \"cCYMHSUBUSE\",\"cCYDDSSH\",\"cCYDDEDU\",\"cCYDDNUTRI\",\n                  \"cCYDDPLAY\",\"cCYDDSOCREL\",\"cCYDDSSDIS\")))\n\n#Summary Statistics Table and Frequency\nst_options(plain.ascii = FALSE,       \n           style = \"rmarkdown\", \n           subtitle.emphasis = FALSE,\n           dfSummary.labels.col = FALSE)\nview(\n  dfSummary(caps, \n            varnumbers   = FALSE,\n            na.col       = FALSE,\n            style        = \"grid\",\n            plain.ascii  = FALSE,\n            headings     = FALSE,\n            graph.magnif = .75),\n            method = \"viewer\")\n```\n:::\n\n\n\n\n## Add Scale & CAP Value Labels\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf <- df %>% set_labels(sDbSI, labels = c(\"Both senses intact\" = 0,\n                    \"One sense intact,the other mild/moderately impaired\" = 1,\n                    \"One sense intact, the other severely impaired\" = 2,\n                    \"Both senses mild/moderately impaired\" = 3,\n                    \"One sense mild/moderately, the other severely impaired\" = 4,\n                    \"Both senses severely impaired\" = 5))\n\ndf <- df %>% set_labels(sCYABS, labels = c(\"No signs of aggression\" = 0, \n                                      \"Mild to moderate aggression\" = c(1:4), \n                                      \"More severe aggression\" = c(5:12)))\n\ndf <- df %>% set_labels(cCYDDCONTI, cCYMHATTACH, cCYMHCAFFE, cCYMHCAREDIST, \n                        cCYMHCOMM, cCYMHCRIM, cCYMHINFSUPP, cCYMHMEDADH, cCYMHMEDREV,\n                        cCYMHPARENT, cCYMHPA, cCYMHREAD, cCYMHSLEEP, cCYMHSTR,\n                        cCYMHSSDIS, cCYMHTRANS, cCYMHVG, cCYMHGAMB, cCYMHSEX,\n                        cCYDDEDU, cCYDDINJUR, cCYDDEAT, cCYDDSTR, cCYDDSSDIS,\n                        labels =c(\"Triggered\" = 1, \"Not Triggered\" = 0))\n\ndf <- df %>% set_labels(cCYDDSSH, cCYMHHARMOTH, cCYMHSSH, labels =c(\"Triggered - \n                        Moderate risk\" = 1, \"Not Triggered\" = 0, \"Triggered -\n                        High risk\" = 2))\n\ndf <- df %>% set_labels(sCOMM, labels = c(\"Intact\" = 0, \"Borderline intact\" = 1,\n                    \"Mild impairment\" = 2, \"Mild/moderate impariment\" = 3, \n                    \"Moderate impairment\" = 4, \"Moderate/severe impairment\" = 5,\n                    \"Severe impairment\" = 6, \"Severe/verysevere impairment\" = 7, \n                    \"Very severe impairment\" = 8))\n\ndf <- df %>% set_labels(cCYMHCTRLINT, labels = c(\"Not triggered\" = 0, \"Triggered -\n                        not emergency situation\" = 1, \"Triggered - emergency \n                        situation\" = 2))\n\ndf <- df %>% set_labels(cCYMHWTMGT, labels = c(\"Not triggered\" = 0, \"Triggered -\n                        problematic eating behaviour\" = 1, \"Triggered - weight \n                        concern\" = 2))\n\ndf <- df %>% set_labels(cCYMHFIRE, labels = c(\"Triggered - Low risk\" = 1, \"Not \n                        Triggered\" = 0, \"Triggered - Moderate risk\" = 2, \n                        \"Triggered - High risk\" = 3))\n\ndf <- df %>% set_labels(cCYMHIPCON, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        conflict with a specific domain\" = 1, \"Triggered - widespread\n                        conflict\" = 2))\n\ndf <- df %>% set_labels(cCYMHSOCREL, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        maladaptive or antisocial peer interactions\" = 1, \n                        \"Triggered - social withdrawal or isolation\" = 2))\n\ndf <- df %>% set_labels(cCYMHTOBAC, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        prevent long term tobacco use\" = 1, \"Triggered - reduce \n                        or cease daily tobacco use\" = 2))\n\ndf <- df %>% set_labels(cCYMHTRAUMA, cCYDDTRAUMA, labels = c(\"Not triggered\" = 0,\n                        \"Triggered - Impact of prior traumatic events\" = 1, \n                        \"Triggered - Immediate safety concerns\" = 2))\n\ndf <- df %>% set_labels(cCYMHEDU, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        current disrupted education\" = 1, \"Triggered - risk of \n                        dropping out of school\" = 2))\n\ndf <- df %>% set_labels(cCYMHLIFSKIL, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        IADL assistance\" = 1, \"Triggered - ADL assistance\" = 2))\n\ndf <- df %>% set_labels(cCYDDAM, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        moderate dependence on others for mobility\" = 1, \n                        \"Triggered - high dependence on others for mobility\" = 2))\n\ndf <- df %>% set_labels(cCYDDNUTRI, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        tube feeding\" = 1, \"Triggered - modified foods\" = 2))\n\ndf <- df %>% set_labels(cCYDDPLAY, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        respect activity preferences\" = 1, \"Triggered - support \n                        participation in play and leisure\" = 2))\n\ndf <- df %>% set_labels(cCYDDSOCREL, labels = c(\"Not triggered\" = 0, \"Triggered - \n                        promote social involvement\" = 1, \"Triggered - improve unsettled\n                        relationships\" = 2))\n```\n:::\n\n\n\n\n# PowerBI variables (clean dataframe)\n\nOnce the above code has been run, the last piece of the script will pull all variables necessary for the PowerBI Dashboard and remove intermediary variables that are unnecessary.This may need to be modified to fit your organization's specific needs.\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\ndf2 <- df %>% select(EMHID,Age, T_age, iA3, iA2, iA5a, worker_id, program_id, Tool, Type, ref, compl, FirstChYMH, LastChYMH, FirstAx, LastAx, FirstScreener, LastScreener, \"program_name\", \"oGoal1\", \"oGoal2\", \"oGoal3\", \"oGoal4\",\"cihiA2a\", \"cihiA2c\", \"iA2\", \"oV5\",\"sCYPSS\",\"sCYRHO\",\"sCHAMHPS\",\"sCYFAMILY\",\"sCYSLEEP\",\n                     \"sCYANXS\",\"sCYDSI\",\"sCYPEER\",\"sINTERN\",\"sCYPS\",\n                     \"sCYRIChY\",\"sCYYIADLC\",\n                     \"DABSS\",\"INTS\",\"ADLlesscomplex\",\"caregiverdistress\",\n                     \"sCYSensDiff\",\"ALEIC\",\"sCYABS\",\"sASSC\",\"sCYDISTRACT\",\n                     \"sCYADL\",\"sCYDABS\",\"sCYMHANHEDO\",\"sEXTERN\",\n                     \"sCYRISSK\",\"sDbSI\",\n                     \"sCYMHSDeS\",\"sCYYIADLP\",\n                     \"EXTS\",\"ADLcomplex\",\n                     \"cognitivefunction\",\"sCYSchDis\",\"sCYRelStren\",\"sCOMM\",  \"cCYMHATTACH\",\"cCYMHCAREDIST\",\"cCYMHCTRLINT\",\n                  \"cCYMHHARMOTH\",\"cCYMHINFSUPP\",\"cCYMHMEDADH\",\"cCYMHPARENT\",\n                  \"cCYMHREAD\",\"cCYMHSOCREL\",\"cCYMHSSH\",\"cCYMHTOBAC\",\n                  \"cCYMHTRAUMA\",\"cCYMHEDU\",\"cCYMHLIFSKIL\",\"cCYMHWTMGT\",\n                  \"cCYDDCONTI\",\"cCYDDAM\",\"cCYDDINJUR\",\"cCYDDTRAUMA\",\n                  \"cCYDDEAT\",\"cCYDDSTR\",\"cCYMHCAFFE\",\"cCYMHCOMM\",\n                  \"cCYMHCRIM\",\"cCYMHFIRE\",\"cCYMHIPCON\",\"cCYMHMEDREV\",\n                  \"cCYMHPA\",\"cCYMHSLEEP\",\"cCYMHSTR\",\"cCYMHSSDIS\",\n                  \"cCYMHTRANS\",\"cCYMHVG\",\"cCYMHGAMB\",\"cCYMHSEX\",\n                  \"cCYMHSUBUSE\",\"cCYDDSSH\",\"cCYDDEDU\",\"cCYDDNUTRI\",\n                  \"cCYDDPLAY\",\"cCYDDSOCREL\",\"cCYDDSSDIS\")\n```\n:::\n\n\n\n\n# interRAI Full Scripts\n\nThe code below is a clean script for use at other agencies. For the compass specific script, see below this one. The script can be copy and pasted into an R script file which can then be added to your PowerBI interRAI query. Ensure that you update file locations and naming conventions to match your own environment.\n\n## Clean Script\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n###########################################################################\n###########################################################################\n###                                                                     ###\n###                     INTERRAI TO POWER BI SCRIPT                     ###\n###                                                                     ###\n###########################################################################\n###########################################################################\n\nrm(list = ls())\n\nlibrary(readr)\nlibrary(dplyr)\nlibrary(readxl)\nlibrary(data.table)\nlibrary(magrittr)\nlibrary(stringr)\n\n##################################################################\n##                  Pull EMHware interRAI Data                  ##\n##################################################################\n\n## Grab EMHware codebook\n\nEMHware_CodeBook <- read_excel(\"M:\\\\DATA & REPORTS\\\\Clinical & Client Services\\\\Clinical Data\\\\interRAI\\\\interRAI Matching Codebook.xlsx\", sheet = \"EMHware Variables\")\n\n#### Grab new ChYMH data\n\nChYMH_folder <- \"M:/DATA & REPORTS/Clinical & Client Services/Clinical Data/interRAI/EMHware interRAI ChYMH Export\"\n\nallfiles <- list.files(path=ChYMH_folder, pattern=\"*.csv\", full.names=TRUE)\n\nChYMH_export <- plyr::ldply(allfiles, read_csv, show_col_types = FALSE)\n\nChYMH_1 <- filter(ChYMH_export,!is.na(program_name)) # remove rows w/NAs in program_name\n\nChYMH_1 <- subset(ChYMH_1, !grepl(\"default\", program_name)) # remove rows w/default as program\n\nChYMH_1$SOURCE<-\"EMHware\"\n\n# convert all true and false to 0 and 1\n\nChYMH_1 <- ChYMH_1 %>%\n  mutate(across(everything(), ~sub(\"true\", \"1\", .)))\nChYMH_1 <- ChYMH_1 %>%\n  mutate(across(everything(), ~sub(\"false\", \"0\", .)))\nChYMH_1 <- ChYMH_1 %>%\n  mutate(across(everything(), ~sub(\"TRUE\", \"1\", .)))\nChYMH_1 <- ChYMH_1 %>%\n  mutate(across(everything(), ~sub(\"FALSE\", \"0\", .)))\n\n# auto format column types\n\nChYMH_2 <- type_convert(ChYMH_1)\n\nChYMH_3 <- transform(ChYMH_2,cihiU3=as.numeric(cihiU3),client_id=as.character(client_id),iA5d=as.character(iA5d))\n\n\nChYMH_3$iA8 <- gsub(\"1\", \"Initial\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"6First\", \"Initial\", ChYMH_3$iA8) \nChYMH_3$iA8 <- gsub(\"5First\", \"Initial\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"5\", \"Discharge\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"2\", \"Reassessment\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"6\", \"Discharge\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"4\", \"Reassessment\", ChYMH_3$iA8)\n\nChYMH_4 <- subset(ChYMH_3, !grepl(\"default\", program_name))\nChYMH_4$EMHID <- ChYMH_4$client_id\n\n# Renaming columns\n\ndf <- ChYMH_4 %>%\n  rename(\"Tool\" = \"type_cd\",\n         \"ref\"=\"iA9\",\n         \"ED_Screen\"=\"iW29\",\n         \"ID_Screen\"=\"iA47\",\n         \"ComorbidMedical_Screen\" = \"iA48\")\n\n############################################################################\n############################################################################\n###                                                                      ###\n###                          CALCULATED COLUMNS                          ###\n###                                                                      ###\n############################################################################\n############################################################################\n\n\n##------------------------------------------------------------------------\n##  2. Type of assessment (Initial, Reassessment, Monitoring, Discharge)   \n##------------------------------------------------------------------------\n\ndf <- df %>% mutate(Type = if_else(Tool ==\"chymh_monitoring_op\", \"Monitoring Assessment\",\n                                                       if_else(is.na(iA8), oA8, iA8))) \n\ndf$Type <- recode(df$Type,`S-INTL`=\"Initial\",\n          `2`= \"Reassessment\",\n        `S-SQNT`=\"Reassessment\",\n         `Readmission Initial`=\"Initial\")\n             \n##---------------------------------\n##  4. Last assessment completed      \n##---------------------------------\n\n\ndf <- mutate(df,\n                   compl = if_else(is.na(iU2), iT1, iU2))\n\n##---------------------\n##  6. Calculate Age   \n##---------------------\n\n# calculate age in years at given reference date (df$ref)\n\ndf$Age <- as.integer((df$ref - as.Date(paste0(df$iA3, \"-01-01\")))/365.25)\n\n##------------------------------------------\n##  7. Calculate FirstChYMH and last ChYMH  \n##------------------------------------------\n\ndf <- df %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(if_else(Tool != \"rscr\", ref, as.Date(Inf)), na.rm = FALSE),\n         MaxRef = max(if_else(Tool != \"rscr\", ref, as.Date(-Inf)), na.rm = FALSE),\n         FirstChYMH = as.integer(ref == MinRef),\n         LastChYMH = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n##-------------------------------------------------------------------\n##  8. For FirstAx and last AX variable (get clarification on this)  \n##-------------------------------------------------------------------\n\ndf <- df %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(ref, na.rm = FALSE),\n         MaxRef = max(ref, na.rm = FALSE),\n         FirstAx = as.integer(ref == MinRef),\n         LastAx = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n##-----------------------------\n##  9. First & last  Screener  \n##-----------------------------\n \ndf <- df %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(if_else(Tool == \"rscr\", ref, as.Date(Inf)), na.rm = FALSE),\n         MaxRef = max(if_else(Tool == \"rscr\", ref, as.Date(-Inf)), na.rm = FALSE),\n         FirstScreener = as.integer(ref == MinRef),\n         LastScreener = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n#test <- df %>% select(EMHID, Tool, ref, FirstChYMH, LastChYMH, FirstAx, LastAx, FirstScreener, LastScreener)\n\n##------------------\n##  10. DSI_Scale \n##------------------\n\ndf <- df %>% mutate(validdsi = case_when(\n  iE1ss %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(DSI__scale = case_when(validdsi == 1 ~ \n                                         (case_when(iE1ss %in% c(0,1,2,3) ~ + iE1ss, iE1ss == 4 ~ + 3)) +\n                                         (case_when(iE1vv %in% c(0,1,2,3) ~ + iE1vv, iE1vv == 4 ~ + 3)) +\n                                         (case_when(iE1ww %in% c(0,1,2,3) ~ + iE1ww, iE1ww == 4 ~ + 3)) +\n                                         (case_when(iE1xx %in% c(0,1,2,3) ~ + iE1xx, iE1xx == 4 ~ + 3)) +\n                                         (case_when(iE1yy %in% c(0,1,2,3) ~ + iE1yy, iE1yy == 4 ~ + 3))))\n\n##------------------\n##  11. ANX Scores  \n##------------------\n\ndf <- df %>% mutate(validnxs = case_when(\n  iE1eee %in% c(0,1,2,3,4) & \n    iE1fff %in% c(0,1,2,3,4) & \n    iE1ggg %in% c(0,1,2,3,4) & \n    iE1iii %in% c(0,1,2,3,4) & \n    iE1kkk %in% c(0,1,2,3,4) & \n    iE1lll %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(ANX__scale = case_when(validnxs == 1 ~ \n                                          iE1eee + iE1fff + iE1ggg + iE1iii + iE1kkk + iE1lll + iE1eeee))\n\n##--------------\n##  12. CHAMHP  \n##--------------\n\ndf <- df %>%\n  mutate(CHAMHPS__scale =\n           ifelse(\n             Age <= 7,\n             ifelse(\n               iX14a == 0,\n               ifelse(\n                 iX2a %in% c(0, 1, 2),\n                 ifelse(iE1rrr %in% c(0, 1), 0,\n                        ifelse(iE1rrr %in% c(2, 3, 4), 2, NA)),\n                 ifelse(iX2a %in% c(3, 4, 5), 2, NA)),\n               ifelse(\n                 iX14a == 1,\n                 ifelse(iX2a %in% c(0, 1), 1,\n                        ifelse(iX2a %in% c(2, 3, 4, 5), 3, NA)),\n                 ifelse(iX14a %in% c(2, 3, 4),\n                        ifelse(iE1lll == 0, 3,\n                               ifelse(\n                                 iE1lll %in% c(1, 2, 3, 4), 5, NA\n                               )), NA))),\n             ifelse(\n               Age >= 8 & Age <= 11,\n               ifelse(\n                 iX14a %in% c(0, 1),\n                 ifelse(\n                   iX14b %in% c(0, 1),\n                   ifelse(\n                     iE3n %in% c(0, 1, 2),\n                     ifelse(iEEE2 %in% c(0, 1), 0,\n                            ifelse(iEEE2 %in% c(2, 3, 4), 2, NA)),\n                     ifelse(iE3n %in% c(3, 4), 4, NA)\n                   ),\n                   ifelse(\n                     iX14b == 2,\n                     ifelse(iE1qq %in% c(0, 1, 2), 1,\n                            ifelse(iE1qq %in% c(3, 4), 3, NA)),\n                     ifelse(iX14b %in% c(3, 4), 4, NA)\n                   )),\n                 ifelse(\n                   iX14a == 2,\n                   ifelse(iE1vv %in% c(0, 1, 2), 3,\n                          ifelse(iE1vv %in% c(3, 4), 5, NA)),\n                   ifelse(iX14a %in% c(3, 4), 5, NA)\n                 )),\n               ifelse(Age >= 12,\n                      ifelse(\n                        iX14a %in% c(0, 1),\n                        ifelse(\n                          iX14b %in% c(0, 1),\n                          ifelse(\n                            iE1iii %in% c(0, 1, 2),\n                            ifelse(\n                              iE1xx %in% c(0, 1, 2),\n                              ifelse(\n                                iY1ao %in% c(0, 1, 2),\n                                ifelse(iX1d == 0, 1, 2),\n                                ifelse(iY1ao %in% c(3, 4, 5), 3, NA)\n                              ),\n                              ifelse(iE1xx %in% c(3, 4), 3, NA)\n                            ),\n                            ifelse(iE1iii %in% c(3, 4), 3, NA)\n                          ),\n                          ifelse(iX14b == 2,\n                                 3,\n                                 ifelse(iX14b %in% c(3, 4),\n                                        5,\n                                        NA))),\n                        ifelse(\n                          iX14a == 2,\n                          ifelse(\n                            iX1c %in% c(0, 1, 2, 3, 4),\n                            ifelse(\n                              iBB5f %in% c(0, 8),\n                              ifelse(iX2a %in% c(0, 1),\n                                     3,\n                                     ifelse(iX2a %in% c(2, 3, 4, 5),\n                                            4,\n                                            NA)),\n                              ifelse(iBB5f == 1, 4, NA)\n                            ),\n                            ifelse(iX1c == 5, 4, NA)\n                          ),\n                          ifelse(iX14a %in% c(3, 4),\n                                 ifelse(\n                                   iEEE2 %in% c(0, 1),\n                                   ifelse(iE1qqq == 0,\n                                          5,\n                                          ifelse(iE1qqq %in% c(1, 2, 3, 4),\n                                                 6,\n                                                 NA)),\n                                   ifelse(iEEE2 %in% c(2, 3, 4),\n                                          6,\n                                          NA)),\n                                 NA))),NA))))\n\n#test <- df %>% filter(Age >= 12 & iX14a >=3) %>% select(EMHID,Age, iX14a, iBB5f, iEEE2, iE1qqq, CHAMHPS__scale)\n\n##------------------\n##  13. DABS scale  \n##------------------\n\ndf <- df %>% mutate(validdabs = case_when( \n  iE3l %in% c(0,1,2,3,4) &\n    iE3m %in% c(0,1,2,3,4) &\n    iE3n %in% c(0,1,2,3,4) &\n    iE3q %in% c(0,1,2,3,4) &\n    iE3r %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(DABS__scale = case_when(validdabs == 1 ~\n                                          iE3l + iE3m + iE3n + iE3q + iE3r))\n\n##--------------\n##  ABS__scale  \n##--------------\n\ndf <- df %>% mutate(validabs = case_when(\n  iE3l %in% c(0,1,2,3,4) & \n    iE3m %in% c(0,1,2,3,4) & \n    iE3n %in% c(0,1,2,3,4) & \n    iE3p %in% c(0,1,2,3,4) ~ 1,\n  TRUE ~ 0)) \n\ndf <- df %>% mutate(ABS__scale = case_when(validabs==1 ~ \n                                                         (case_when(iE3l %in% c(0,1,2,3) ~ iE3l, iE3l == 4 ~ + 3)) + \n                                                         (case_when(iE3m %in% c(0,1,2,3) ~ + iE3m, iE3m == 4 ~ + 3)) +\n                                                         (case_when(iE3n %in% c(0,1,2,3) ~ + iE3n, iE3n == 4 ~ + 3)) + \n                                                         (case_when(iE3p %in% c(0,1,2,3) ~ + iE3p, iE3p == 4 ~ + 3))))\n##-------------------\n##  14. SOCDIS scale: sCYMHANHEDO\n##-------------------\n\ndf <- df %>% mutate(validedo = case_when(\n  iE1qqq %in% c(0,1,2,3,4) &                                            \n    iE1rrr %in% c(0,1,2,3,4) &                                                 \n    iE1sss %in% c(0,1,2,3,4) &                                              \n    iE1ttt %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate('SOCDIS__scale' = case_when(validedo == 1 ~\n                                              iE1qqq + iE1rrr + iE1sss + iE1ttt))\n\n##-----------------------\n##  15. DISTRACT_scale   \n##-----------------------\n\ndf <- df %>% mutate(validact = case_when(\n  iE1oo %in% c(0,1,2,3,4) &\n    iE1pp %in% c(0,1,2,3,4)&\n    iE1qq %in% c(0,1,2,3,4)&\n    iE1rr %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(DISTRACT__scale = case_when(validact == 1 ~ (\n  iE1oo +iE1pp +iE1qq + iE1rr)))\n\n##--------------------------\n##  16. KinarkRiskHTO_comb  \n##--------------------------\n\ndf$KinarkRiskHTO_comb <- df$KinarkRiskHTO\n\n##--------------------------\n##  17. KinarkRiskHTS_comb  \n##--------------------------\n\ndf$KinarkRiskHTS_comb <- df$KinarkRiskHTS\n\n##--------------------------\n##  18. KinarkRiskHTP_comb  \n##--------------------------\n\ndf$KinarkRiskHTP_comb<- df$KinarkRiskHTP\n\n##-------------------------\n##  19. KinarkRiskSM_comb  \n##-------------------------\n\ndf$KinarkRiskSM_comb <- df$KinarkRiskSM\n\n##--------------------------\n##  20. KinarkRiskVCP_comb  \n##--------------------------\ndf$KinarkRiskVCP_comb<- df$KinarkRiskVCP\n\n##--------------------------\n##  21. KinarkRiskFB_comb  \n##--------------------------\n\ndf$KinarkRiskFB_comb <- df$KinarkRiskFB\n\n##-------------------------\n##  22. KinarkRiskOC_comb  \n##-------------------------\ndf$KinarkRiskOC_comb <- df$KinarkRiskOC\n\n##-------------\n##  23. Acute  \n##-------------\n\ndf$Acute <- df$CaseComplexityFA\n\n##---------------\n##  24. Complex  \n##---------------\n\ndf$Complex <- df$CaseComplexityS\n\n##-------------------------\n##  25. KinarkRiskHTO_cat  \n##-------------------------\n\ndf <- df %>%\n  mutate(KinarkRiskHTO_cat = case_when(\n    KinarkRiskHTO == 0 ~ \"No Risk\",\n    KinarkRiskHTO == 1 ~ \"Potential Risk\",\n    KinarkRiskHTO == 2 ~ \"Risk Identified\",\n    KinarkRiskHTO == 3 ~ \"Serious Risk\"\n  ))\n\n##-------------------------\n##  26. KinarkRiskHTS_cat  \n##-------------------------\n\ndf <- df %>%\n  mutate(KinarkRiskHTS_cat = case_when(\n    KinarkRiskHTS  == 0 ~ \"No Risk\",\n    KinarkRiskHTS  == 1 ~ \"Potential Risk\",\n    KinarkRiskHTS  == 2 ~ \"Risk Identified\",\n    KinarkRiskHTS  == 3 ~ \"Serious Risk\"\n  ))\n\n##------------------------\n##  27. KinarkRiskSM_cat  \n##------------------------\n\ndf <- df %>%\n  mutate(KinarkRiskSM_cat = case_when(\n    is.na(KinarkRiskSM )  ~ NA,\n    KinarkRiskSM  == 0 ~ \"No Risk\",\n    KinarkRiskSM  == 1 ~ \"Potential Risk\",\n    KinarkRiskSM  == 2 ~ \"Risk Identified\",\n    KinarkRiskSM  == 3 ~ \"Serious Risk\"\n  ))\n\n##------------------------\n##  28. KinarkRiskSM_cat  \n##------------------------\n\ndf <- df %>%\n  mutate(KinarkRiskHTP_cat = case_when(\n    is.na(KinarkRiskHTP )  ~ NA,\n    KinarkRiskHTP  == 0 ~ \"No Risk\",\n    KinarkRiskHTP  == 1 ~ \"Potential Risk\",\n    KinarkRiskHTP  == 2 ~ \"Risk Identified\",\n    KinarkRiskHTP  == 3 ~ \"Serious Risk\"\n  ))\n\n##-------------------------\n##  29. KinarkRiskVCP_cat  \n##-------------------------\n\ndf <- df %>%\n  mutate(KinarkRiskVCP_cat = case_when(\n    is.na(KinarkRiskVCP )  ~ NA,\n    KinarkRiskVCP  == 0 ~ \"No Risk\",\n    KinarkRiskVCP  == 1 ~ \"Potential Risk\",\n    KinarkRiskVCP  == 2 ~ \"Risk Identified\",\n    KinarkRiskVCP  == 3 ~ \"Serious Risk\"\n  ))\n\n##------------------------\n##  30. KinarkRiskFB_cat  \n##------------------------\n\ndf <- df %>%\n  mutate(KinarkRiskFB_cat = case_when(\n    is.na(KinarkRiskFB )  ~ NA,\n    KinarkRiskFB  == 0 ~ \"No Risk\",\n    KinarkRiskFB  == 1 ~ \"Potential Risk\",\n    KinarkRiskFB  == 2 ~ \"Risk Identified\",\n    KinarkRiskFB  == 3 ~ \"Serious Risk\"\n  ))\n\n##------------------------\n##  31. KinarkRiskOC_cat  \n##------------------------\n\ndf <- df %>%\n  mutate(KinarkRiskOC_cat = case_when(\n    is.na(KinarkRiskOC )  ~ NA,\n    KinarkRiskOC  == 0 ~ \"No Risk\",\n    KinarkRiskOC  == 1 ~ \"Potential Risk\",\n    KinarkRiskOC  == 2 ~ \"Risk Identified\",\n    KinarkRiskOC  == 3 ~ \"Serious Risk\"\n  ))\n\n##-----------------\n##  32. Acute_cat  \n##-----------------\n\ndf <- df %>%\n  mutate(Acute_cat = case_when(\n    is.na(Acute)  ~ NA,\n    Acute == 1 ~ \"Yes\",\n    Acute == 0 ~ \"No\"\n  ))\n\n##-------------------\n##  33. Complex_cat  \n##-------------------\n\ndf <- df %>%\n  mutate(Complex_cat = case_when(\n    is.na(Complex)  ~ NA,\n    Complex == 1 ~ \"Yes\",\n    Complex == 0 ~ \"No\"\n  ))\n\n\n\n##------------------\n##  43. Positive Symptoms Scale  \n##------------------\n\ndf <- df %>% mutate(validpss = case_when(iE1mmm %in% c(0,1,2,3,4) & \n                                                       iE1ooo %in% c(0,1,2,3,4) & \n                                                       iE1nnn %in% c(0,1,2,3,4) & \n                                                       iE1ppp %in% c(0,1,2,3,4) ~ 1,\n                                                     TRUE ~ 0))\n\ndf <- df %>% mutate(PSS__scale = case_when(validpss == 1 ~ \n                                                     (case_when(iE1mmm %in% c(0,1,2,3) ~ iE1mmm, iE1mmm == 4 ~ + 3)) + \n                                                     (case_when(iE1ooo %in% c(0,1,2,3) ~ + iE1ooo, iE1ooo == 4 ~ + 3)) +\n                                                     (case_when(iE1nnn %in% c(0,1,2,3) ~ + iE1nnn, iE1nnn == 4 ~ + 3)) +\n                                                    (case_when(iE1ppp %in% c(0,1,2,3) ~ + iE1ppp, iE1ppp == 4 ~ + 3)))) \ndf$sCYPSS <- df$PSS__scale\n\n##---------------\n##  36.  Trauma  \n##---------------\n\ndf <- df %>%\n  mutate(Trauma = case_when(\n    is.na(iY1b)  ~ NA,\n    iY1b == 1 ~ \"Caused Intense Fear\",\n    iY1b == 0 ~ \"No or Not Applicable\",\n    iY1b == 8 ~ \"Did Not Respond\"\n  ))\n\n\n##--------------------\n##  37.  RISSK_scale  \n##--------------------\n\ndf <- df %>% mutate(validssk = case_when(\n  iE1ss %in% c(0:4) &\n    iE1tt %in% c(0:4) &\n    iE1vv %in% c(0:4) &\n    iE1ww %in% c(0:4) &\n    iE1xx %in% c(0:4) &\n    iE1yy %in% c(0:4) &\n    iE1aaa %in% c(0:4) &\n    iE1rrr %in% c(0:4) &\n    iE1ttt %in% c(0:4) &\n    iE3w %in% c(0:4) &\n    iP19h %in% c(0,1,8) &\n    iX1a %in% c(0:5) &\n    iX1b %in% c(0,1,8) & \n    iX1c %in% c(0:5) &\n    iX1d %in% c(0,1) ~ 1, TRUE ~ 0),\n  xdsi = iE1ss + iE1tt + iE1vv + iE1ww + iE1xx +iE1yy + iE1aaa + iE1rrr + iE1ttt)\n\ndf <- df %>% mutate(RISSK__scale = case_when(validssk == 1 ~ \n                                           (case_when(iX1c == 0 ~\n                                                        case_when(iX1d == 0 ~ \n                                                                    case_when(iX1a == 0 ~ \n                                                                                case_when(iE3w == 0 ~ \n                                                                                            case_when (xdsi >= 0 & xdsi <= 17 ~ 0,TRUE ~ 1),TRUE ~ 1),TRUE ~ 3)),\n                                                      iX1c %in% c(1,2,3) ~ \n                                                        case_when(iX1a %in% c(0,1,2) ~ \n                                                                    case_when(iX1b %in% c(0,8) ~ \n                                                                                case_when(xdsi %in% c(0,1) ~ 1, \n                                                                                          xdsi >= 2 & xdsi <= 12 ~ 2, \n                                                                                          xdsi >= 13 & xdsi <= 36 ~ 3),TRUE ~ \n                                                                                case_when(iX1d == 0 ~ 2),TRUE ~ 4)),\n                                                      iX1c == 4 ~ \n                                                        case_when(iX1d == 0 ~ 3,TRUE ~ \n                                                                    case_when(iX1b == 0 ~ \n                                                                                case_when(iP19h == 0 ~ 4, TRUE ~ 5),TRUE ~ 5)),\n                                                      iX1c == 5 ~ \n                                                        case_when(iX1b %in% c(0,8) ~ \n                                                                    case_when (iX1d == 0 ~ 3,TRUE ~ 5),iX1a %in% c(0,1,2,3) ~ 5,TRUE ~ 6)))))\n\n##-----------------\n##  40. RIO_scale  \n##-----------------\n\ndf <- df %>% mutate(validrio = case_when(\n  iE1oo %in% c(0,1,2,3,4) &\n    iE3l %in% c(0,1,2,3,4) &\n    iE3m %in% c(0,1,2,3,4) & \n    iE3n %in% c(0,1,2,3,4) & \n    iE3q %in% c(0,1,2,3,4) &\n    iP19h %in% c(0,1,8) &\n    iX2a %in% c(0,1,2,3,4,5) &\n    iX2b %in% c(0,1,2,3,4,5) &\n    iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(xrio = case_when(validrio == 1 ~ iX2a + iX2b + iX2c))\n\ndf <- df %>% mutate(xbeh = case_when(validrio ==1 ~ \n                                       (case_when(iE3l %in% c(2,3,4) ~ iE3l-1) +\n                                          case_when(iE3n %in% c(2,3,4) ~ iE3n-1))))\n\ndf <- df %>% mutate(RIO__scale = case_when(validrio == 1 ~ \n                                         (case_when(iE3m == 0 ~ \n                                                      (case_when(xrio == 0 ~ \n                                                                   case_when(iE3q & iE3n %in% c(1,2,3,4) ~ 1,TRUE ~ 0))) +\n                                                      (case_when(xrio %in% c(1,2) ~ 1, TRUE ~ 0)) +\n                                                      (case_when(xrio %in% c(3,4) ~ 3, TRUE ~ 0)) +\n                                                      (case_when(xrio >= 5 ~ 3, TRUE ~ 0)), TRUE ~ 0) +\n                                            case_when(iE3m == 1 ~ \n                                                        (case_when(xrio %in% c(0,1) ~ \n                                                                     ((case_when(iE3q == 0 ~ 1, TRUE ~ 0)) +\n                                                                        case_when(iE3q >= 1 ~ \n                                                                                    (case_when(iE1oo == 0 ~ 1, TRUE ~ 0) +\n                                                                                       (case_when(iE1oo %in% c(1,2,3) ~ 2, TRUE ~ 0)) +\n                                                                                       (case_when(iE1oo == 4 ~ 3, TRUE ~ 0))))), TRUE ~ 0) +\n                                                           case_when(xrio %in% c(2,3,4,5) ~ 3, TRUE ~ 0) +\n                                                           case_when(xrio >= 6 ~ case_when(iE3q & iE3n %in%\n                                                                                            c(1,2,3,4) ~ 5,TRUE ~ 4), TRUE ~ 0)),\n                                                      TRUE ~ 0) +\n                                            case_when(iE3m == 2 ~\n                                                        (case_when(xrio >= 0 & xrio <= 6 ~ \n                                                                     (case_when(xbeh %in% c(0,1) ~ 3, TRUE ~ 0) +\n                                                                        case_when(xbeh >= 2 ~ 4,TRUE ~ 5)), TRUE ~ 0)), TRUE ~ 0) +\n                                            case_when(iE3m == 3 ~ \n                                                        (case_when(xrio %in% c(0,1,2,3,4) ~ 3, TRUE ~ 0) +\n                                                           case_when(xrio >= 5 ~ case_when(iP19h %in% c(0,8) ~ 4,TRUE ~ 5))), \n                                                      TRUE ~ 0) +\n                                            case_when(iE3m == 4 ~ \n                                                        (case_when(xrio %in% c(0,1,2) ~ 4, TRUE ~ 0) +\n                                                           case_when(xrio >= 3 & xrio <= 8 ~ 5, TRUE ~ 0)+ \n                                                           case_when(xrio >= 9 ~ 6, TRUE ~ 0)), TRUE ~ 0))))\n##---------------------------------------\n##  41. SOS__scale SEVERITY OF SELF HARM  \n##---------------------------------------\n\ndf <- df %>% mutate(validsos = case_when(\n  iC1d %in% c(0,1,2,3,4,5) & #  decision making\n    iC2a %in% c(0,1) & #  short term memory (brooklyn had iC2a) <-- look this up\n    iD1 %in% c(0,1,2,3,4) &  # understoof\n    iE1mmm %in% c(0,1,2,3,4) &  #hallucinations\n    iE1nnn %in% c(0,1,2,3,4) & # command hallucinations\n    iE1ooo %in% c(0,1,2,3,4) & # delusions\n    iE1ppp %in% c(0,1,2,3,4) & # Abnormal thought processes\n    iE1ss %in% c(0,1,2,3,4) & # Sad facial expressions\n    iE1vv %in% c(0,1,2,3,4) & # negative statements\n    iE1ww %in% c(0,1,2,3,4) & # self-deprecating\n    iE1xx %in% c(0,1,2,3,4) & # guilt or shame\n    iE1yy %in% c(0,1,2,3,4) & # hopelessness\n    iG2j %in% c(0,1,2,3,4,5,6,8) & #Eating\n    iX1b %in% c(0,1,8) & # suicidal intent\n    iX1c %in% c(0,1,2,3,4,5) & # considered self-injury\n    iX1d %in% c(0,1) & #others concerned about self-injury\n    iX1e %in% c(0,1) ~ 1, TRUE ~ 0)) # suicide plan\n\n\ndf <- df %>% mutate(xcsp1 = case_when(\n  iC1d %in% c(0,1,2,3,4,5) &\n    iD1 %in% c(0,1,2,3,4) &\n    iC2a %in% c(0,1) ~ 1, TRUE ~ 0))\n\n\ndf <- df %>% mutate(xcps2 = case_when(\n  iC1d %in% c(0,1,2,3,4,5) &\n    iD1 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\n\n# Impairment count\n\ndf <- df %>% mutate(xcps1 = case_when(validsos == 1 ~\n                                                    (\n                                                      case_when(iC1d %in% c(1, 2, 3) ~ 1, TRUE ~ 0) +\n                                                        case_when(iD1 %in% c(1, 2, 3, 4) ~ 1, TRUE ~ 0) +\n                                                        case_when(iC2a == 1 ~ +1, TRUE ~ 0)\n                                                    )))\n\n# Severe Imp count\n\ndf <- df %>% mutate(xcps2 = case_when(validsos == 1 ~\n                                                    (\n                                                      case_when(iC1d == 3 ~ 1, TRUE ~ 0) +\n                                                        case_when(iD1 %in% c(3, 4) ~ +1, TRUE ~ 0)\n                                                    )))\n# cog performance count\n\ndf <- df %>% mutate(xcps = case_when(validsos == 1 ~\n                                                   (\n                                                     case_when(iC1d ==  5 ~ 6, TRUE ~ 0) +\n                                                       case_when(iC1d == 4 ~ (\n                                                         case_when(iC1d %in% c(6, 8) ~ 6, TRUE ~ 0) +\n                                                           case_when(iG2j %in% c(0, 1, 2, 3, 4, 5) ~ 5, TRUE ~ 0)\n                                                       ), TRUE ~ 0) +\n                                                       case_when(iC1d >= 0 &\n                                                                   iC1d < 4 ~ (\n                                                                     case_when(xcps1 %in% c(2, 3) ~\n                                                                                 (\n                                                                                   case_when(xcps2 == 2 ~ 4, TRUE ~ 0) +\n                                                                                     case_when(xcps2 == 1 ~ 3, TRUE ~ 0) +\n                                                                                     case_when(xcps2 == 0 ~ 2, TRUE ~ 0)\n                                                                                 ), TRUE ~ 0) +\n                                                                       case_when(xcps1 == 1 ~ 1, TRUE ~ 0) +\n                                                                       case_when(xcps1 == 0 ~ 0, TRUE ~ 0)\n                                                                   )))))\n# Depressive Severity count\n\ndf <- df %>% mutate(xdsi = case_when(\n  validsos == 1 ~\n    (\n      case_when(iE1vv == 0 ~ 0, iE1vv %in% c(1, 2) ~ 1, iE1vv %in% c(3, 4) ~ 2) +\n        case_when(iE1ss == 0 ~ 0, iE1ss %in% c(1, 2) ~ 1, iE1ss %in% c(3, 4) ~ 2) +\n        case_when(iE1ww == 0 ~ 0, iE1ww %in% c(1, 2) ~ 1, iE1ww %in% c(3, 4) ~ 2) +\n        case_when(iE1xx == 0 ~ 0, iE1xx %in% c(1, 2) ~ 1, iE1xx %in% c(3, 4) ~ 2) +\n        case_when(iE1yy == 0 ~ 0, iE1yy %in% c(1, 2) ~ 1, iE1yy %in% c(3, 4) ~ 2)\n    )\n))\n\n# Positive Sumptoms count\n\n\ndf <- df %>% mutate(xpss = case_when(validsos == 1 ~\n                                                   (case_when(iE1mmm == 0 ~ +0, iE1mmm %in% c(1, 2) ~ +1, iE1mmm %in% c(3, 4) ~ +2) +\n                                                       case_when(iE1nnn == 0 ~ +0, iE1nnn %in% c(1, 2) ~ +1, iE1nnn %in% c(3, 4) ~ +2) +\n                                                       case_when(iE1ooo == 0 ~ +0, iE1ooo %in% c(1, 2) ~ +1, iE1ooo %in% c(3, 4) ~ +2) +\n                                                       case_when(iE1ppp == 0 ~ +0, iE1ppp %in% c(1, 2) ~ +1, iE1ppp %in% c(3, 4) ~ +2)\n                                                   )))\n\n## CY Severity of Self Harm Scale\n\ndf <-\n  df %>% mutate(SOS__scale = case_when(validsos == 1 ~\n                                               (case_when(iX1c == 5 ~\n                                                             (case_when(iX1b == 1 ~\n                                                                           (case_when(xdsi >= 6 ~ 6, TRUE ~ 0) +\n                                                                               case_when(xdsi < 6 ~ 5, TRUE ~ 0)), TRUE ~ 0) +\n                                                                 case_when(iX1b %in% c(0, 8) ~(\n                                                                       case_when(xdsi >= 6 & iX1e == 1 ~ 5, TRUE ~ 0) +\n                                                                         case_when(xdsi >= 6 &\n                                                                                     iX1e == 0 ~ 3, TRUE ~ 0) +\n                                                                         case_when(xdsi < 6 &\n                                                                                     iX1d == 1 ~ 4, TRUE ~ 0) +\n                                                                         case_when(xdsi < 6 &\n                                                                                     iX1d == 0 ~ 2, TRUE ~ 0)),\n                                                                   TRUE ~ 0)), TRUE ~ 0) +\n                                                   case_when(iX1c %in% c(3, 4) ~ (\n                                                                 case_when(iX1b == 1 ~ 4, TRUE ~ 0) +\n                                                                   case_when(iX1b %in% c(0, 8) ~ 3, TRUE ~ 0)\n                                                               ), TRUE ~ 0) +\n                                                   case_when(iX1c %in% c(0, 1, 2) ~(\n                                                                 case_when(iX1b == 1 ~\n                                                                             (case_when(xdsi >= 4 ~ 4, TRUE ~ 0) +\n                                                                                 case_when(xdsi < 4 ~ 1, TRUE ~ 0)), TRUE ~ 0) +\n                                                                   case_when(\n                                                                     iX1b %in% c(0, 8) ~(\n                                                                         case_when(xpss >= 3 & xcps >= 3 ~ 3, TRUE ~ 0) +\n                                                                           case_when(xpss >= 3 & xcps < 3 ~ 2, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 & iX1d == 1 ~ 2, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 &\n                                                                                       iX1d == 0 &\n                                                                                       xcps >= 1 ~ 1, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 &\n                                                                                       iX1d == 0 &\n                                                                                       xcps == 0 ~ 0, TRUE ~ 0)),TRUE ~ 0)), TRUE ~ 0))))\n\ndf$sCYSOS <- df$SOS__scale\n\n##-----------------\n##  42. RHO_scale  \n##-----------------\n\ndf <- df %>% mutate(validrho = case_when(\n  iE1ooo %in% c(0,1,2,3,4) & \n    iE1yyy %in% c(0,1,2,3,4) & \n    iE6 %in% c(0,1,2,3,4,5) & \n    iE7 %in% c(0,1,2) & \n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2b %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) &\n    ABS__scale %in% c(0:12) &\n    PSS__scale %in% c(0:12) & \n    iX4 %in% c(0,1,2) ~ 1,\n  TRUE ~ 0))\n\n\ndf <- df %>% mutate(xrho1 = case_when(\n  iX2a %in% c(4,5) | \n    iX2b %in% c(4,5) | \n    iX2c %in% c(4,5) | \n    iX4 == 2 ~ 2,\n  iX2a %in% c(1,2,3) |\n    iX2b %in% c(1,2,3) | \n    iX2c %in% c(1,2,3) | \n    iX4 == 1 ~ 1,\n  TRUE ~ 0),\n  xrho2 = iX2a + iX2b + iX2c)\n\ndf <- df %>% mutate(RHO__scale = case_when(validrho == 1 ~ case_when(\n  xrho1 == 2 ~ case_when(\n    xrho2 >= 10 ~ case_when(\n      iE1ooo %in% c(1,2,3,4) ~ 6, iE1ooo == 0 ~ 5),\n    xrho2 <10 ~ case_when(\n      iE7 == 2 ~ 5, iE7 == 1 & iE1yyy %in% c(1,2,3,4) ~ 4,\n      iE7 == 1 & iE1yyy == 0 ~ 2, iE7 == 0 ~ 3)),\n  xrho1 == 1 ~ case_when(PSS__scale >= 2 ~ 4, PSS__scale < 2 ~ 2),\n  xrho1 == 0 ~ case_when(ABS__scale >= 3 ~ 3, ABS__scale < 3 ~ case_when(\n    PSS__scale >= 4 ~ 1, PSS__scale < 4 & iE6 %in% c(2,3,4,5) ~ 1,\n    PSS__scale < 4 & iE6 %in% c(0,1) ~ 0)))))\n\ndf$sCYRHO <- df$RHO__scale\n\n##--------------------\n##  44. IADLC__scale  \n##--------------------\n\ndf <- df %>% mutate(validiadlc = case_when(\n  iG1ab %in% c(0,1,2,3,4,5,6) & \n    iG1bb %in% c(0,1,2,3,4,5,6) & \n    iG1cb %in% c(0,1,2,3,4,5,6) & \n    iG1db %in% c(0,1,2,3,4,5,6) & \n    iG1eb %in% c(0,1,2,3,4,5,6) & \n    iG1fb %in% c(0,1,2,3,4,5,6) & \n    iG1gb %in% c(0,1,2,3,4,5,6) & \n    iG1hb %in% c(0,1,2,3,4,5,6) & \n    iG1nb %in% c(0,1,2,3,4,5,6) & \n    iG1ob %in% c(0,1,2,3,4,5,6) & \n    iZZ1ab %in% c(0,1,2,3,4,5,6) &\n    Age >= 0 & Age <= 130 ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(IADLC__scale = case_when(validiadlc == 1 ~ case_when(\n  Age >= 12 & Age < 19 ~ \n    iG1ab + iG1bb + iG1cb + iG1db + iG1eb + iG1fb + iG1gb + iG1hb + iG1nb + iG1ob\n  + iZZ1ab)))\n\n##-----------------------------------------------\n##  sCYPS PARENTING STRENGTHS (for RICHY calc) -- \n##-----------------------------------------------\n\ndf <- df %>% mutate(validps = case_when(\n  iP15a %in% c(0,1,2) &\n    iP15b %in% c(0,1,2) &\n    iP15c %in% c(0,1,2) &\n    iP15d %in% c(0,1,2) &\n    iP15e %in% c(0,1,2) &\n    iP15f %in% c(0,1,2) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(PARENTING__scale = case_when(validps == 1 ~\n                                                               (case_when(iP15a == 0 ~ + 2, iP15a == 1 ~ + 1, iP15a == 2 ~ + 0)) +\n                                                               (case_when(iP15b == 0 ~ + 2, iP15b == 1 ~ + 1, iP15b == 2 ~ + 0)) +\n                                                               (case_when(iP15c == 0 ~ + 2, iP15c == 1 ~ + 1, iP15c == 2 ~ + 0)) +\n                                                               (case_when(iP15d == 0 ~ + 2, iP15d == 1 ~ + 1, iP15d == 2 ~ + 0)) +\n                                                               (case_when(iP15e == 0 ~ + 2, iP15e == 1 ~ + 1, iP15e == 2 ~ + 0)) +\n                                                               (case_when(iP15f == 0 ~ + 2, iP15f == 1 ~ + 1, iP15f == 2 ~ + 0))))\n##--------------------\n##  CAREDIS__scale  Caregiver Distress Algorithm --\n##--------------------\n\ndf <- df %>% mutate(ProactiveItem = \n                      (case_when(iE15a== 0 ~ + 0, iE15a %in% c(1,2,3,4,5) ~ + 1)) +\n                      (case_when(iE15d== 0 ~ + 0, iE15d %in% c(1,2,3,4,5) ~ + 1)) + \n                      (case_when(iE15e== 0 ~ + 0, iE15e %in% c(1,2,3,4,5) ~ + 1)) + \n                      (case_when(iX16c== 0 ~ + 0, iX16c %in% c(1,2,3,4,5) ~ + 1)) +        \n                      (case_when(iX2a== 0 ~ + 0, iX2a %in% c(1,2,3,4,5) ~ + 1)) +           \n                      (case_when(iX2b== 0 ~ + 0, iX2b %in% c(1,2,3,4,5) ~ + 1)) +           \n                      (case_when(iX2c== 0 ~ + 0, iX2c %in% c(1,2,3,4,5) ~ + 1)))\n\ndf <- df %>% mutate(devMHsubst_Issues = \n                      (case_when(iY7a & iY1ap == 0 ~ 0, TRUE ~ 0) +\n                         case_when(iY7a == 1 ~ 1, TRUE ~ 0) +\n                         case_when(iY1ap %in% c(1,2,3,4,5) ~ 1)))\n\ndf <- df %>% mutate(familyfunction = \n                      (case_when(iF8a == 1 ~ 1, TRUE ~ 0) +\n                         case_when(iF8a == 0 ~  0, TRUE ~ 0) + \n                         case_when(iP19d | iP19e == 1 ~  1, TRUE ~ 0) + \n                         case_when(iP19d & iP19e == 0 ~  0, TRUE ~ 0) + \n                         case_when(iY7a & iY1ap == 0 ~  0, TRUE ~ 0) + \n                         case_when(iY7a == 1 | iY1ap %in% c(1,2,3,4,5) ~  1, TRUE ~ 0) + \n                         case_when(iY7b == 1 ~  1, TRUE ~ 0) + \n                         case_when(iY7b == 0 ~  0, TRUE ~ 0)))\n\ndf <- df %>% mutate(validiccared = case_when(\n  iJ5a %in% c(0,1,2,3) & \n    iE1zzz %in% c(0,1,2,3,4) & \n    iE1ccc %in% c(0,1,2,3,4) & \n    iY9 %in% c(0,1) & \n    iX1a %in% c(0,1,2,3,4,5) & \n    iE1hhh %in% c(0,1,2,3,4) & \n    iP19a %in% c(0,1,8) & \n    iE1tt %in% c(0,1,2,3,4) & \n    iY1au %in% c(0,1,2,3,4,5) & \n    iE1ss %in% c(0,1,2,3,4) & \n    iE6 %in% c(0,1,2,3,4,5) & \n    iC9b %in% c(0,1,8) & \n    iE18a %in% c(0,1) &\n    PARENTING__scale %in% c(0:12) & \n    PSS__scale %in% c(0:12) & \n    DABS__scale %in% c(0:20) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(CAREDIS__scale = case_when(validiccared == 1 ~ \n                                  (case_when(ProactiveItem == 0 ~ case_when(\n                                            PARENTING__scale == 12 ~ case_when(\n                                              ABS__scale == 0 ~ case_when(\n                                                devMHsubst_Issues == 0 ~ case_when(\n                                                  iE1ccc == 0 ~ 1, iE1ccc %in% c(1,2,3,4) ~ 2),\n                                                devMHsubst_Issues == 1 ~ 2),\n                                              ABS__scale >= 1 ~ case_when(\n                                                iC9a == 0 ~ case_when(\n                                                  iY9 == 0 ~ 1, iY9 == 1 ~ 2),\n                                                iC9a %in% c(1,8) ~ case_when(\n                                                  iX1a == 0 ~ 2, iX1a %in% c(1,2,3,4,5) ~ 3))),\n                                            PARENTING__scale %in% c(10,11) ~ case_when(\n                                              devMHsubst_Issues == 0 ~ 1, \n                                              devMHsubst_Issues == 1 ~ 3),\n                                            PARENTING__scale %in% c(0,1,2,3,4,5,6,7,8,9) ~ case_when(\n                                              iJ5a == 0 ~ case_when(\n                                                iE1zzz == 0 ~ 2, iE1zzz %in% c(1,2,3,4) ~ 3),\n                                              iJ5a %in% c(1,2,3) ~ 4)), TRUE ~ 0) +\n                                             \n                                             case_when(ProactiveItem %in% c(1,2) ~ case_when(\n                                               familyfunction == 0 ~ case_when(\n                                                 sCYDABS %in% c(0,1,2,3,4,5,6,7) ~ case_when(\n                                                   iY1au == 0 ~ 1, iY1au %in% c(1,2,3,4,5) ~ 3),\n                                                 sCYDABS >= 8 ~ case_when(\n                                                   iE1ss == 0 ~ 1, iE1ss %in% c(1,2,3,4) ~ 3)),\n                                               familyfunction == 1 ~ case_when(\n                                                 iE1hhh == 0 ~ case_when(\n                                                   iY9 == 0 ~ 2, iY9 == 1 ~ 4),\n                                                 iE1hhh %in% c(1,2,3,4) ~ 4),\n                                               familyfunction >= 2 ~ case_when(\n                                                 iP19a == 0 ~ case_when(\n                                                   iE1ttt == 0 ~ 2, iE1ttt %in% c(1,2,3,4) ~ 3),\n                                                 iP19a == 1 ~ 4)), TRUE ~ 0) + \n                                             \n                                             case_when(ProactiveItem %in% c(3,4,5,6,7) ~ case_when(\n                                               PARENTING__scale %in% c(7,8,9,10,11,12) ~ case_when(\n                                                 iE6 %in% c(1,2,3,4,5) ~ 5, \n                                                 iE6 == 0 ~ case_when(\n                                                   devMHsubst_Issues == 0 ~ case_when(\n                                                     iX1a %in% c(0,1) ~ case_when(\n                                                       sCYDABS %in% c(0,1,2,3,4,5,6,7,8,9,10) ~ 2, \n                                                       sCYDABS >= 11 ~ 4),\n                                                     iX1a %in% c(2,3,4,5) ~ 4),\n                                                   devMHsubst_Issues == 1 ~ case_when(\n                                                     iE18a == 1 ~ 3, \n                                                     iE18a == 0 ~ 5))),\n                                               PARENTING__scale %in% c(0,1,2,3,4,5,6) ~ case_when(\n                                                 iC9b == 0 ~ 4, iC9b %in% c(1,8) ~ 5)), TRUE ~ 0))))\n\n##-----------------\n##  COMM__scale  --\n##-----------------\n\ndf <- df %>% mutate(validcomm = case_when(\n  iD1 %in% c(0,1,2,3,4) & \n    iD2 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(COMM__scale = case_when(validcomm == 1 ~ iD1 + iD2))\n\n##--------------------------------------------\n##   CAS / Psychiatrist / Family Engagment  --\n##--------------------------------------------\n\ndf <- df %>%\n  mutate(CAS = case_when(\n    is.na(iN16w)  ~ NA,\n    iN16w > 0 ~ \"Involved\"\n  ))\n\ndf <- df %>%\n  mutate(Psychiatrist = case_when(\n    is.na(iN16o)  ~ NA,\n    iN16w > 0 ~ \"Involved\"\n  ))\n\ndf <- df %>%\n  mutate(FamilyEngaged = case_when(\n    is.na(iZ10)  ~ NA,\n    iZ10 > 0 ~ \"Involved\"\n  ))\n\n##------------------------\n##   Physical Activity  --\n##------------------------\n\ndf <- df %>% \n  mutate(cCYMHPA = case_when(\n  iG6a %in% c(0,1) ~ 1, TRUE ~ 0))\n\n\ndf$'Physical Activity' <-\n  ifelse(is.na(df$cCYMHPA),\n    NA,\n      ifelse(\n        df$cCYMHPA == 1,\n        \"Triggered\",\n        ifelse(df$cCYMHPA == 0,\n            \"Not Triggered\",\n            NA\n          )))\n\n##------------------------\n##  Attachment          --\n##------------------------\n\n df <-  df %>% mutate(validattach = case_when(\n  iB33 %in% c(0,1,2) & \n    iB34a %in% c(0,1,2,3) & \n    iB34b %in% c(0,1,2,3) & \n    iB35 %in% c(0,1) &\n    iP16a %in% c(0,1,8) & \n    iP16b %in% c(0,1,8) & \n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) & \n    iY1ao %in% c(0,1,2,3,4,5) & \n    iY1ar %in% c(0,1,2,3,4,5) & \n    iY1at %in% c(0,1,2,3,4,5) & \n    iY1au %in% c(0,1,2,3,4,5) & \n    iY7a %in% c(0,1) & \n    T_age <= 12 ~ 1, TRUE ~ 0))\n\n df <-  df %>% mutate(xcymhattach1 = case_when(validattach == 1 ~ \n                                               (case_when(iB33 == 2 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34a %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34b %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34c %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB35 == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1am %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1an %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ao %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ap %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ar %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1at %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1au %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY7a == 1 ~ + 1, TRUE ~ 0))))\n\n df <-  df %>% mutate(xcymhattach2 = case_when(validattach == 1 ~ \n                                               (case_when(iP16a == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iP16b ==1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iP16c == 1 ~ + 1, TRUE ~ 0))))\n \n  df <-  df %>% mutate(Attachment = case_when( \n   xcymhattach1 >= 1 & xcymhattach2 >= 1 ~ 1, \n   xcymhattach1 == 0 | xcymhattach2 == 0 ~ 0))\n\n  \n  ##################################################################\n  ##                         Caffeine Use                         ##\n  ##################################################################\n  \n df <-  df %>% mutate('Caffeine Use' = case_when(\n    iW10b %in% c(2,3) ~ 1, \n    iW10b < 2 ~ 0))\n\n  df$'Caffeine Use'[df$'Caffeine Use'== 1] <- \"Triggered\"\n  df$'Caffeine Use'[df$'Caffeine Use'== 0] <- \"Not Triggered\"\n\n\n  \n  #################################################################\n  ##                      Caregiver Distress                      ##\n  #################################################################\n\n   df <-  df %>% mutate(xcymhcaredist = case_when(iB32a | iB32b == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP19g == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iQ4 == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ap %in% c(2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY7a == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY8a == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY8b == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY9 == 1 ~ + 1, TRUE ~ 0))\n  \n df <- df %>% mutate('Caregiver Distress' = case_when(\n    xcymhcaredist >= 2 ~ 1, TRUE ~ 0))\n  \n df$'Caregiver Distress'[df$'Caregiver Distress'== 1] <- \"Triggered\"\n df$'Caregiver Distress'[df$'Caregiver Distress'== 0] <- \"Not Triggered\"\n \n #################################################################\n ##                        Communication    : cCYMHCOMM                    ##\n #################################################################\n \n \n  df <-  df %>% mutate('Communication' = case_when(\n   iD1 %in% c(2,3,4) | iD2 %in% c(2,3,4) ~ 1, \n   iD1 < 2 & iD2 < 2 ~ 0))\n \n df$'Caregiver Distress'[df$'Caregiver Distress'== 1] <- \"Triggered\"\n df$'Caregiver Distress'[df$'Caregiver Distress'== 0] <- \"Not Triggered\"\n \n #################################################################\n ##                    Control Interventions                    ##\n #################################################################\n \n  df <-  df %>% mutate(validctrlint = case_when(\n   iE1nnn %in% c(0,1,2,3,4) & \n     iM7 %in% c(0,1,2,3,4,5,6,7,8,9) & \n     iN6c %in% c(0,1,2,3,4,5) & \n     iX1a %in% c(0,1,2,3,4,5) & \n     iX2a %in% c(0,1,2,3,4,5) & \n     iX4 %in% c(0,1,2) & \n     iAA1a %in% c(0,1,2,3,4,5) & \n     iAA1c %in% c(0,1,2,3,4,5) & \n     iAA1f %in% c(0,1,2,3,4,5) &\n     sCYABS %in% c(0:12) & \n     sCYPSS %in% c(0:12) ~ 1, TRUE ~ 0))\n \n  df <-  df %>% mutate(xcymhctrlint1 = case_when(validctrlint == 1 ~ \n                                                 (case_when(iM7 %in% c(1,2,3,4,5,6,7,8,9) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iN6c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iAA1a %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iAA1c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iAA1f %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n \n  df <-  df %>% mutate(xcymhctrlint2 = case_when(validctrlint == 1 ~ \n                                                 (case_when(iE1nnn %in% c(2,3,4) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iX1a == 5 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iX2a == 5 ~ + 1, TRUE ~ 0) + \n                                                    case_when(iX4 == 2 ~ + 1, TRUE ~ 0) + \n                                                    case_when(sCYABS >= 5 ~ + 1, TRUE ~ 0) +\n                                                    case_when(sCYPSS >= 8 ~ + 1, TRUE ~ 0))))\n  \n  df <- df %>% mutate('Control Interventions'= case_when(validctrlint == 1 ~ \n                                                 (case_when(xcymhctrlint1 & xcymhctrlint2 >= 1 ~ 2, TRUE ~ 0) +\n                                                    case_when(xcymhctrlint1 >= 1 & xcymhctrlint2 == 0 ~ 1, TRUE ~ 0)))) \n  \n  df$'Control Interventions'[df$'Control Interventions'== 1] <- \"Triggered to minimize the need for control interventions (young persons not in a psychiatric emergency situation)\"\n  df$'Control Interventions'[df$'Control Interventions'== 0] <- \"Not Triggered\"\n  \n  ##################################################################\n  ##                    Criminality Prevention                    ##\n  ##################################################################\n  \n  \n   df <-  df %>%\n    mutate('Criminality Prevention' = case_when(\n    iE1dddd %in% c(1,2,3,4) | iE15a %in% c(2,3,4,5) | iX2a %in% c(2,3,4,5) ~ 1, \n    iE1dddd < 1 & iE15a < 2 & iX2a < 2 ~ 0))\n\n  df$'Criminality Prevention'[df$'Criminality Prevention'== 1] <- \"Triggered\"\n  df$'Criminality Prevention'[df$'Criminality Prevention'== 0] <- \"Not Triggered\"\n  \n  \n  #################################################################\n  ##                          Education: cCYMHEDU                         \n  #################################################################\n  \n   df <-  df %>% mutate(xiBB5a = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB5a), \n    iBB4c == 1 ~ 0))\n  \n   df <-  df %>% mutate(xiBB5b = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB5b), \n    iBB4c == 1 ~ 0))\n  \n   df <-  df %>% mutate(xiBB5e = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB5e), \n    iBB4c == 1 ~ 0))\n  \n   df <-  df %>% mutate(xiBB5f = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB5f), \n    iBB4c == 1 ~ 0))\n  \n   df <-  df %>% mutate(xiBB10 = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB10), \n    iBB4c == 1 ~ 0))\n  \n   df <-  df %>% mutate(xiBB11a = case_when(\n    iBB4c %in% c(1,2,3) ~ as.numeric(iBB11a)))\n  \n   df <-  df %>% mutate(xiBB11b = case_when(\n    iBB4c %in% c(1,2,3) ~ as.numeric(iBB11b)))\n  \n   df <-  df %>% mutate(xiBB14a = case_when(\n    iBB4c %in% c(1,2,3) ~ as.numeric(iBB14a)))\n   \n    df <-  df %>% mutate(validedu = case_when(\n     iBB2 %in% c(0,1,2,3,8) &\n       xiBB5a %in% c(0,1,8) & \n       xiBB5b %in% c(0,1,8) & \n       xiBB5e %in% c(0,1,8) & \n       xiBB5f %in% c(0,1,8) &\n       xiBB10 %in% c(0,1,2,3) & \n       xiBB11a %in% c(0,1) & \n       xiBB11b %in% c(0,1) & \n       xiBB14a %in% c(0,1,2,3,8) ~ 1, TRUE ~ 0))\n   \n    df <-  df %>% mutate(xcymhedu1 = case_when(validedu == 1 ~ \n                                               (case_when(xiBB5a == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(xiBB5b == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(xiBB5e == 1 ~ + 1, TRUE ~ 0) + \n                                                  case_when(xiBB5f == 1 ~ + 1, TRUE ~ 0) + \n                                                  case_when(xiBB10 %in% c(1,3) ~ + 1, TRUE ~ 0) +\n                                                  case_when(xiBB14a %in% c(2,3) ~ + 1, TRUE ~ 0))))\n   \n    df <-  df %>% mutate(xcymhedu2 = case_when(validedu == 1 ~ \n                                               (case_when(xiBB11a | xiBB11b == 1 ~ + 1, TRUE ~ 0) + \n                                                  case_when(iBB2 != 0 & iBB2 != 1 & iBB2 != 2 & iBB2 != 3 ~ + 1, TRUE ~ 0)))) \n   \n   \n     df <-  df %>% mutate(Education = case_when(validedu == 1 ~ case_when(\n      xcymhedu1 >= 1 ~ \"Triggered due to risk of dropping out of school\",  \n      xcymhedu1 == 0 ~ case_when(\n        xcymhedu2 == 2 ~ \"Triggered due to current disrupted education\", \n        xcymhedu2 < 2 ~ \"Not Triggered\"))))\n   \n##################################################################\n##                  Hazardous Fire Involvement                  ##\n##################################################################\n\n df <-  df %>% mutate(validfire = case_when(\n  iC1d %in% c(0,1,2,3,4,5) & \n    iE1oo %in% c(0,1,2,3,4) & \n    iE1mmm %in% c(0,1,2,3,4) & \n    iE1nnn %in% c(0,1,2,3,4) & \n    iE1ooo %in% c(0,1,2,3,4) & \n    iP15e %in% c(0,1,2,8) & \n    iX18 %in% c(0,1,2,3,4,5) & \n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) & \n    iY1ao %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\n df <- df %>% mutate(xcymhfire = case_when(validfire == 1 ~ case_when(\n  iC1d %in% c(3,4) ~ + 1, \n  iE1oo %in% c(2,3,4) ~ + 1,\n  iE1mmm %in% c(2,3,4) ~ + 1, \n  iE1nnn %in% c(2,3,4) ~ + 1, \n  iE1ooo %in% c(2,3,4) ~ + 1, \n  iP15e %in% c(2,8) ~ + 1, \n  iY1am %in% c(1,2,3,4,5) | iY1an %in% c(1,2,3,4,5) | \n    iY1ao %in% c(1,2,3,4,5) ~ + 1)))\n \n  df <-  df %>% mutate(`Hazardous Fire Involvement` = case_when(validfire == 1 ~ case_when(\n   iX18 %in% c(2,3,4,5) ~ case_when(\n     xcymhfire >= 2 ~ \"Triggered at high risk\", \n     xcymhfire == 1 ~ \"Triggered at moderate risk\", \n     xcymhfire == 0 ~ \"Triggered at low risk\"), \n   iX18 < 2 ~ \"Not Triggered\")))\n\n  ##################################################################\n  ##                           Gambling                           ##\n  ##################################################################\n  \n   df <-  df %>% mutate(validgamb = case_when(\n    iW8 %in% c(0,1) &\n      cihiU3 == 1 ~ 1, TRUE ~ 0))\n   \n  df <-  df %>% mutate(Gambling = case_when(validgamb == 1 ~ case_when(\n    iW8 == 1 ~ \"Triggered\", \n    iW8 < 1 ~ \"Not Triggered\")))\n  \n  ##################################################################\n  ##                        Harm to Others                        ##\n  ##################################################################\n  \n  df <- df %>% mutate(validharmoth = case_when(\n    iE1oo %in% c(0,1,2,3,4) & \n      sCYRHO %in% c(0,1,2,3,4,5,6) ~ 1, TRUE ~ 0))\n \n   df <- df %>% mutate('Harm to Others' = case_when(validharmoth == 1 ~ case_when(\n    sCYRHO %in% c(5,6) ~ 2, \n    sCYRHO %in% c(3,4) ~ case_when(\n      iE1oo %in% c(2,3,4) ~ 2, \n      iE1oo < 2 ~ 1),\n    sCYRHO <= 2 ~ 0)))\n   \n   df$'Harm to Others'[df$'Harm to Others' == 2] <- \"Triggered due to high risk of harm to others\"\n   df$'Harm to Others'[df$'Harm to Others' == 1] <- \"Triggered due to moderate risk of harm to others\"\n   df$'Harm to Others'[df$'Harm to Others' == 0] <- \"Not Triggered\"\n\n   \n   ##################################################################\n   ##                       Informal Support                       ##\n   ##################################################################\n   \n   df <- df %>% mutate(xcymhinfsupp =  case_when(iP18a %in% c(2,3) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP18b == 3 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP18c == 3 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP18d == 3 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP18e == 3 ~ + 1, TRUE ~ 0))\n   df <- df %>% mutate('Informal Support' = case_when(xcymhinfsupp >= 2 ~ 1, TRUE ~ 0) + \n                                                     case_when(xcymhinfsupp < 2 ~ 0, TRUE ~ 0))\n   \n   df$'Informal Support'[df$'Informal Support' == 1] <- \"Triggered\"\n   df$'Informal Support'[df$'Informal Support' == 0] <- \"Not Triggered\"\n\n   \n   ##################################################################\n   ##                    Interpersonal Conflict                    ##\n   ##################################################################\n   \n   df <- df %>% mutate(xiBB5e = (case_when(\n     iBB4c %in% c(0,1) ~ 0)+ \n       case_when(iBB4c %in% c(2,3) ~ as.numeric(iBB5e), TRUE ~ 0)))\n   \n   df <- df %>% mutate(validipcon = case_when(\n     iP19a %in% c(0,1,8) &\n       iP19b %in% c(0,1,8) &\n       iP19c %in% c(0,1,8) &\n       iP19d %in% c(0,1,8) &\n       iP19e %in% c(0,1,8) &\n       iP19f %in% c(0,1,8) &\n       xiBB5e %in% c(0,1,2,3) & \n       iBB5e %in% c(0,1,8) ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate(xcymhipcon = case_when(validipcon == 1 ~ \n                                                (case_when(iP19a | iP19d == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iP19b | iP19e | iP19f == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iP19c | xiBB5e == 1 ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate('Interpersonal Conflict' = case_when(validipcon == 1 ~ \n                                                (case_when(xcymhipcon >= 2 ~ 2, TRUE ~ 0) +\n                                                   case_when(xcymhipcon == 1 ~ 1, TRUE ~ 0) +\n                                                   case_when(xcymhipcon == 0 ~ 0, TRUE ~ 0))))\n   \n   df$'Interpersonal Conflict'[df$'Interpersonal Conflict' == 1] <- \"Triggered to reduce conflict within a specific domain\"\n   df$'Interpersonal Conflict'[df$'Interpersonal Conflict' == 0] <- \"Not Triggered\"\n   df$'Interpersonal Conflict'[df$'Interpersonal Conflict' == 2] <- \"Triggered to reduce widespread conflict\"\n   \n   #################################################################\n   ##                         Life Skills                         ##\n   #################################################################\n   \n   df <- df %>% mutate(xiBB5e = (case_when(\n     iBB4c %in% c(0,1) ~ 0)+ \n       case_when(iBB4c %in% c(2,3) ~ as.numeric(iBB5e), TRUE ~ 0)))\n   \n   df <- df %>% mutate(validipcon = case_when(\n     iP19a %in% c(0,1,8) &\n       iP19b %in% c(0,1,8) &\n       iP19c %in% c(0,1,8) &\n       iP19d %in% c(0,1,8) &\n       iP19e %in% c(0,1,8) &\n       iP19f %in% c(0,1,8) &\n       xiBB5e %in% c(0,1,2,3) & \n       iBB5e %in% c(0,1,8) ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate(xcymhipcon = case_when(validipcon == 1 ~ \n                                                (case_when(iP19a | iP19d == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iP19b | iP19e | iP19f == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iP19c | xiBB5e == 1 ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate('Life Skills' = case_when(validipcon == 1 ~ \n                                                (case_when(xcymhipcon >= 2 ~ 2, TRUE ~ 0) +\n                                                   case_when(xcymhipcon == 1 ~ 1, TRUE ~ 0) +\n                                                   case_when(xcymhipcon == 0 ~ 0, TRUE ~ 0))))\n   \n   df$'Life Skills'[df$'Life Skills' == 0] <- \"Not Triggered\"\n   df$'Life Skills'[df$'Life Skills' == 1] <- \"Triggered for IADL assistance\"\n   df$'Life Skills'[df$'Life Skills' == 2] <- \"Triggered for ADL assistance\"\n   \n   \n   ##################################################################\n   ##                     Medication Adherence                     ##\n   ##################################################################\n   \n   df <- df %>% mutate('Medication Adherence' = case_when(\n     iM3 == 2 | iM4 == 1 | iM12 == 0 ~ 1, \n     iM3 != 2 & iM4 != 1 & iM12 != 0 ~ 0))\n   \n   df$'Medication Adherence'[df$'Medication Adherence' == 1] <- \"Triggered\"\n   df$'Medication Adherence'[df$'Medication Adherence' == 0] <- \"Not Triggered\"\n\n   \n   #################################################################\n   ##                      Medication Review                      ##\n   #################################################################\n   \n   df <- df %>% mutate(xcymhmedrev = case_when(\n     iJ2c %in% c(2,3,4) ~ + 1, \n     iJ2k %in% c(2,3,4) | iJ2y %in% c(2,3,4) ~ + 1, \n     iJ2n %in% c(2,3,4) | iJ2x %in% c(2,3,4) ~ + 1, \n     iJ2dd %in% c(2,3,4) ~ + 1, \n     iJ2gg %in% c(2,3,4) ~ + 1, \n     iJ2ll %in% c(2,3,4) ~ + 1, \n     iJ3 %in% c(1,2,3) ~ + 1, \n     iJ9a == 1 | iJ9b == 1 | iJ9c == 1 | iJ9d == 1 | iJ9e == 1 | \n       iJ9f == 1 | iJ9g == 1 ~ + 1, \n     iR9 == 1 ~ + 1))\n   \n   df <- df %>% mutate('Medication Review' = case_when(\n     iM5 == 1 ~ 1, \n     iM5 != 1 ~ case_when(\n       iM3 %in% c(0,1) & xcymhmedrev >= 1 ~ 1, \n       iM3 != 0 | iM3 != 1 | xcymhmedrev == 0 ~ 0)))\n   \n   df$'Medication Review'[df$'Medication Review' == 1] <- \"Triggered\"\n   df$'Medication Review'[df$'Medication Review' == 0] <- \"Not Triggered\"\n\n   \n   ##################################################################\n   ##                          Parenting2                          ##\n   ##################################################################\n   \n   df <- df %>% mutate(xcymhparent = case_when(iP15a == 2 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iP15b == 2 ~ + 1, TRUE ~ 0) + \n                                                    case_when(iP15c == 2 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iP15d == 2 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iP15e == 2 ~ + 1, TRUE ~ 0) + \n                                                    case_when(iP15f == 2 ~ + 1, TRUE ~ 0))\n   \n   df <- df %>% mutate('Parenting2' = case_when(xcymhparent >= 2 ~ 1, TRUE ~ 0) +\n                                                    case_when(xcymhparent < 2 ~ 0, TRUE ~ 0))\n   df$'Parenting2'[df$'Parenting2' == 1] <- \"Triggered\"\n   df$'Parenting2'[df$'Parenting2' == 0] <- \"Not Triggered\"\n   \n   \n   #################################################################\n   ##                   Readmission (cCYMHREAD)                   ##\n   #################################################################\n   \n   df <- df %>% mutate(validread = case_when(\n     iB12 %in% c(0,1) & \n       iB33 %in% c(0,1,2) & \n       iB38a %in% c(0,1) & \n       iB38b %in% c(0,1) & \n       iE5 %in% c(0,1,2,3) & \n       iP19h %in% c(0,1,8) & \n       iV1 %in% c(0,1,2) & \n       sCYPSS >= 0 & sCYPSS <= 12 & \n       sCYRHO >= 0 & sCYPSS <= 6 & \n       sCYSOS >= 0 & sCYPSS <= 6 ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate(xcymhread1 = case_when(validread == 1 ~ \n                                                (case_when(iB12 == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iB33 == 2 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iB38a == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iB38b == 1 ~ + 1, TRUE ~ 0) + \n                                                   case_when(iP19h == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(sCYPSS >= 2 ~ + 1, TRUE ~ 0) +\n                                                   case_when(sCYRHO >= 3 ~ + 1, TRUE ~ 0) +\n                                                   case_when(sCYSOS >= 3 ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate(xcymhread2 = case_when(validread == 1 ~ \n                                                (case_when(iE5 %in% c(2,3) ~  1, TRUE ~ 0) +\n                                                   case_when(iV1 == 2 ~ 1, TRUE ~ 0) +\n                                                   case_when(iV1 == 1 ~ case_when(xcymhread1 >= 1 ~ 1, TRUE ~ 0), TRUE ~ 0)))) \n   \n   \n   df <- df %>% mutate(Readmission = case_when(validread == 1 ~ \n                                               (case_when(xcymhread2 >= 1 ~ 1, TRUE ~ 0) +\n                                                  case_when(xcymhread2 == 0 ~ 0, TRUE ~ 0))))\n   \n   df$Readmission[df$Readmission == 1] <- \"Triggered\"\n   df$Readmission[df$Readmission == 0] <- \"Not Triggered\"\n   \n   \n   ##################################################################\n   ##        Suicidality and Purposeful Self Harm: cCYMHSSH        ##\n   ##################################################################\n   \n   df <- df %>% mutate('Suicidality and Purposeful Self-Harm' = case_when(\n     sCYSOS %in% c(5,6) ~ 2, \n     sCYSOS %in% c(3,4) ~ case_when(\n       iE1oo >= 2 ~ 2, \n       iE1oo < 2 ~ 1),\n     sCYSOS < 3 ~ 0))\n   \n   df$'Suicidality and Purposeful Self-Harm'[df$'Suicidality and Purposeful Self-Harm' == 0] <- \"Not Triggered\"\n   df$'Suicidality and Purposeful Self-Harm'[df$'Suicidality and Purposeful Self-Harm' == 1] <- \"Triggered due to moderate risk of harm to self\"\n   df$'Suicidality and Purposeful Self-Harm'[df$'Suicidality and Purposeful Self-Harm' == 2] <- \"Triggered due to high risk of harm to self\" \n\n   \n   ##################################################################\n   ##                  Sexual Behaviour: cCYMHSEX                  ##\n   ##################################################################\n   \n   df <- df %>% mutate(validsex = case_when( \n     iE3o %in% c(0,1,2,3,4) & # inapprop. sexual behav.\n       iE19a %in% c(0,1) & # inapprop. sexual knowledge\n       iW27 %in% c(0,1) ~ 1, TRUE ~ 0)) # family concern about risky sexual beh\n   \n   #iJ10a and iX3 are from the Adolescent Supplement only. The CAP can be calculated without these.\n   \n   df <- df %>% mutate('Sexual Behaviour' = case_when(validsex == 1 ~ case_when(\n     (iE3o %in% c(2,3,4) | iE19a == 1 | iJ10a == 1 | iX3 == 1 | iW27 == 1) ~ 1, TRUE ~ 0)))\n \n   df$'Sexual Behaviour'[df$'Sexual Behaviour' == 1] <- \"Triggered\"\n   df$'Sexual Behaviour'[df$'Sexual Behaviour' == 0] <- \"Not Triggered\"\n   \n   \n   #################################################################\n   ##                      Sleep Disturbance                      ##\n   #################################################################\n   \n   df <- df %>% mutate(validsleep = case_when(\n     iE1lll %in% c(0,1,2,3,4) &\n       iE1yyy %in% c(0,1,2,3,4) & \n       iE1zzz %in% c(0,1,2,3,4) & \n       iE1aaaa %in% c(0,1,2,3,4) & \n       iE1bbbb %in% c(0,1,2,3,4) & \n       iJ4 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate(xcymhsleep = case_when(validsleep == 1 ~ \n                                                (case_when(iE1lll %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n                                                   case_when(iE1yyy %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n                                                   case_when(iE1zzz %in% c(2,3,4) ~ + 1, TRUE ~ 0) + \n                                                   case_when(iE1aaaa %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n                                                   case_when(iE1bbbb %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n                                                   case_when(iJ4 %in% c(1,2,3,4) ~ + 1, TRUE ~ 0))))\n  \n   df <- df %>% mutate('Sleep Disturbance' = case_when(validsleep == 1 ~ case_when(\n     xcymhsleep >= 2 ~ \"Triggered\", TRUE ~ \"Not Triggered\")))\n   \n   \n   ##################################################################\n   ##          Social and Peer Relationships: cCYMHSOCREL          ##\n   ##################################################################\n   \n   df <- df %>% mutate(validsocrel = case_when(\n     iE1qqq %in% c(0,1,2,4) & \n       iE1ttt %in% c(0,1,2,3,4) & \n       iE14d %in% c(0,1) & \n       iE15e %in% c(0,1,2,3,4,5) & \n       iF13 %in% c(0,1) & \n       iF15e %in% c(0,1) & \n       iF15f %in% c(0,1) & \n       iP8 %in% c(0,1) & \n       iY1aq %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate(xcymhsocrel1 = case_when(validsocrel == 1 ~ \n                                                  (case_when(iE1qqq %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1ttt %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE14d == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iF15e == 0 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iF15f == 0 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP8 == 0 ~ + 1, TRUE ~ 0) + \n                                                     case_when(iY1aq %in% c(2,3,4,5) ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate(xcymhsocrel2 = case_when(validsocrel == 1 ~ \n                                                  (case_when(iE15e %in% c(2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iF13 == 1 ~ + 1, TRUE ~ 0)))) \n   \n   df <- df %>% mutate('Social and Peer Relationships' = case_when(validsocrel == 1 ~ \n                                                 (case_when(xcymhsocrel1 >= 2 ~ 2, TRUE ~ 0) +\n                                                    case_when(xcymhsocrel1 < 2 ~ \n                                                                (case_when(xcymhsocrel2 >= 1 ~ 1, TRUE ~ 0) +\n                                                                   case_when(xcymhsocrel2 == 0 ~ 0, TRUE ~ 0)), TRUE ~ 0))))\n \n   df$'Social and Peer Relationships'[df$'Social and Peer Relationships' == 0] <- \"Not Triggered\"\n   df$'Social and Peer Relationships'[df$'Social and Peer Relationships' == 1] <- \"Triggered to reduce maladaptive or antisocial peer interactions\"\n   df$'Social and Peer Relationships'[df$'Social and Peer Relationships' == 2] <- \"Triggered to reduce social withdrawal or isolation\"\n   \n   \n   #################################################################\n   ##                     Strengths: cCYMHSTR                     ##\n   #################################################################\n   \n   df <- df %>% mutate(validstr = case_when(\n     iC7 %in% c(0,1,2) & \n       iC9a %in% c(0,1,8) & \n       iF8b %in% c(0,1) & \n       iF15a %in% c(0,1) ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate(xcymhstr = case_when(validstr == 1 ~\n                                              (case_when(iC7 == 2 ~ + 1, TRUE ~ 0) +\n                                                 case_when(iC9a %in% c(1,8) ~ + 1, TRUE ~ 0) +\n                                                 case_when(iF8b == 0 ~ + 1, TRUE ~ 0) +\n                                                 case_when(iF15a == 0 ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate('Strengths' = case_when(validstr == 1 ~ \n                                              case_when(xcymhstr >= 3 ~ \"Triggered\", TRUE ~ \"NOt Triggered\")))\n   \n  \n   \n   ##################################################################\n   ##                  Substance Use:cCYMHSUBUSE                   ##\n   ##################################################################\n   \n   df <- df %>% mutate(validsubuse = case_when(\n     iM6 %in% c(0,1) & \n       iW2 %in% c(0,1,2,3,4) &\n       iW3a %in% c(0,1,2,3,4,5) &\n       iW3b %in% c(0,1,2,3,4,5) &\n       iW3c %in% c(0,1,2,3,4,5) &\n       iW3d %in% c(0,1,2,3,4,5) &\n       iW3e %in% c(0,1,2,3,4,5) &\n       iW3f %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate(xcymhsubuse = case_when(validsubuse == 1 ~ \n                                                 (case_when(iM6 == 1 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iW2 %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iW3a %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iW3b %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iW3c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iW3d %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iW3e %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iW3f %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate('Substance Use' = case_when(validsubuse == 1 ~ case_when(\n     xcymhsubuse >= 1 ~ \"Triggered\", TRUE ~ \"Not Triggered\")))\n   \n   \n   #################################################################\n   ##          Support Systems for Discharge: cCYMHSSDIS          ##\n   #################################################################\n   \n   df <- df %>% mutate(validssdis = case_when(\n     iA11b %in% c(1:15) & \n       iA12e %in% c(1:6) & \n       iR16d %in% c(0,1,2,8) & \n       iR16e %in% c(0,1,2,8) & \n       iY8a %in% c(0,1,8) ~ 1, TRUE ~ 0))\n   # iA11b replaced iA11j\n   \n   df <- df %>% mutate('Support Systems for Discharge' = case_when(validssdis == 1 ~ case_when(\n     iA11b %in% c(5,8) | iA12e %in% c(1,5) | iY8a == 1 | iR16d %in% c(0,2) | \n       iR16e %in% c(0,2) ~ \"Triggered\", TRUE ~ \"Not Triggered\")))\n   \n   \n   ##################################################################\n   ##             Tobacco and Nicotine Use: cCYMHTOBAC             ##\n   ##################################################################\n   df <- df %>% mutate(validtobac = case_when(\n     iW20a %in% c(0,1,2,3) & \n       iW20b %in% c(0,1,2,3) ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate('Tobacco and Nicotine Use' = case_when(validtobac == 1 ~ case_when(\n     iW20a == 3 | iW20b == 3 ~ \"Triggered to prevent long-term tobacco use\", \n     iW20a %in% c(1,2) | iW20b %in% c(1,2) ~ \"Triggered to reduce or cease daily tobacco use\", \n     iW20a == 0 & iW20b == 0 ~ \"Not Triggered\")))\n   \n   \n   #################################################################\n   ##                   Transitions: cCYMHTRANS                   ##\n   #################################################################\n   \n   df <- df %>% mutate(validtrans = case_when(\n     iZ12 %in% c(0,1) ~ 1, TRUE ~ 0))\n   df <- df %>% mutate('Transitions' = case_when(validtrans == 1 ~ case_when(\n     iZ12 == 1 ~ \"Triggered\", TRUE ~ \"Not Triggered\")))\n\n   \n   ##################################################################\n   ##              Traumatic Life Events: cCYMHTRAUMA              ##\n   ##################################################################\n   \n   df <- df %>% mutate(validtrauma = case_when(\n     iB34a %in% c(0,1,2,3) & \n       iB34b %in% c(0,1,2,3) & \n       iB34c %in% c(0,1,2,3) & \n       iE1ddd %in% c(0,1,2,3,4) & \n       iE1fff %in% c(0,1,2,3,4) & \n       iE1iii %in% c(0,1,2,3,4) & \n       iE1jjj %in% c(0,1,2,3,4) & \n       iE1kkk %in% c(0,1,2,3,4) & \n       iE1lll %in% c(0,1,2,3,4) & \n       iE1eeee %in% c(0,1,2,3,4) & \n       iY1aa %in% c(0,1,2,3,4,5) & \n       iY1aj %in% c(0,1,2,3,4,5) &\n       iY1ak %in% c(0,1,2,3,4,5) &\n       iY1al %in% c(0,1,2,3,4,5) &\n       iY1am %in% c(0,1,2,3,4,5) &\n       iY1an %in% c(0,1,2,3,4,5) &\n       iY1ao %in% c(0,1,2,3,4,5) &\n       iY1aq %in% c(0,1,2,3,4,5) &\n       iY1ar %in% c(0,1,2,3,4,5) &\n       iY1at %in% c(0,1,2,3,4,5) &\n       iY1au %in% c(0,1,2,3,4,5) &\n       iY1b %in% c(0,1,8) & \n       iY2a %in% c(0,1) & \n       iY2c %in% c(0,1) & \n       iY2d %in% c(0,1) ~ 1, TRUE ~ 0))\n   \n   df <- df %>% mutate(xcymhtrauma1 = case_when(validtrauma == 1 ~ \n                                                  (case_when(iY1aa %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aj %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ak %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1am %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1an %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ao %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aq %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ar %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1at %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1au %in% c(4,5) ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate(xcymhtrauma2 = case_when(validtrauma == 1 ~ \n                                                  (case_when(iY2a == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY2c == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY2d == 1 ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate(xcymhtrauma3 = case_when(validtrauma == 1 ~ \n                                                  (case_when(iB34a | iB34b | iB34c %in% c(1,2,3) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aa %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aj %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ak %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1al %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1am %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1an %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ao %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aq %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ar %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1at %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1au %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n   \n   df <- df %>% mutate(xcymhtrauma4 = case_when(validtrauma == 1 ~ \n                                                  (case_when(iE1ddd %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1fff %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1iii %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1jjj %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1kkk %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1lll %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1eeee %in% c(1,2,3,4) ~ + 1, TRUE ~ 0)))) \n   \n   df <- df %>% mutate('Traumatic Life Events' = case_when(validtrauma == 1 ~ case_when(\n     xcymhtrauma1 >= 1 | xcymhtrauma2 >= 1 ~\"Triggered to address immediate safety concerns\", \n     xcymhtrauma1 == 0 & xcymhtrauma2 == 0 ~ case_when(\n       xcymhtrauma3 >= 1 ~ case_when(\n         iY1b == 1 | xcymhtrauma4 >=2 ~ \"Triggered to reduce the impact of prior traumatic life events\", \n         iY1b < 1 & xcymhtrauma4 < 2 ~ \"Not Triggered\"),\n       xcymhtrauma3 == 0 ~ \"Not Triggered\"))))\n\n   \n   #################################################################\n   ##                    Video Gaming: cCYMHVG                    ##\n   #################################################################\n   \n   df <- df %>% mutate(validvg = case_when(\n     iW21 %in% c(0,1,2,3) ~ 1, TRUE ~ 0))\n   df <- df %>% mutate('Video Gaming' = case_when(validvg == 1 ~ case_when(\n     iW21 %in% c(2,3) ~ \"Triggered\", \n     iW21 < 2 ~ \"Not Triggered\")))\n   \n   #################################################################\n   ##                  Eating/Weight: cCYMHWTMGT                  ##\n   #################################################################\n   \n   df <- df %>% mutate(validwtmgt = case_when(\n     iK2i %in% c(0,1) & \n       iK2j %in% c(0,1) & \n       iK2k %in% c(0,1) & \n       iK8a %in% c(0,1) & \n       iK8b %in% c(0,1) & \n       iK8c %in% c(0,1) ~ 1, TRUE ~ 0))  \n   df <- df %>% mutate('Eating/Weight' = case_when(validwtmgt == 1 ~ case_when(\n     iK2k == 1 | iK2k == 1 | iK2i == 1 ~ \"Triggered for weight concerns\", \n     iK2j < 1 & iK2k < 1 & iK2i < 1 ~ case_when(\n       iK8a == 1 | iK8b ==1 | iK8c == 1 ~ \"Triggered due to problematic eating behaviour\", \n       iK8a < 1 & iK8b < 1 & iK8c < 1 ~ \"Not Triggered\"))))\n   \n  ##--------------\n##  EXT__scale  \n##--------------\n\ndf <- df %>% mutate(validexts = case_when(\n  iE15a %in% c(0,1,2,3,4,5) &\n    iE15d %in% c(0,1,2,3,4,5) &\n    iE15e %in% c(0,1,2,3,4,5) &\n    iE1oo %in% c(0,1,2,3,4) &\n    iE3m %in% c(0,1,2,3,4) &\n    iE3r %in% c(0,1,2,3,4) &\n    iE3s %in% c(0,1,2,3,4) &\n    iE3t %in% c(0,1,2,3,4) &\n    iX16c %in% c(0,1,2,3,4,5) & \n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2b %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(EXT__scale = case_when(validexts == 1 ~ \n                                                         (case_when(iE15a == 0 ~ 0, iE15a %in% c(1,2,3,4,5) ~ 1)) + \n                                                         (case_when(iE15d == 0 ~ 0, iE15d %in% c(1,2,3,4,5) ~ 1)) + \n                                                         (case_when(iE15e == 0 ~ 0, iE15e %in% c(1,2,3,4,5) ~ 1)) + \n                                                         (case_when(iE1oo == 0 ~ 0, iE1oo %in% c(1,2,3,4) ~ 1)) + \n                                                         (case_when(iE3m == 0 ~ 0, iE3m %in% c(1,2,3,4) ~ 1)) +\n                                                         (case_when(iE3r == 0 ~ 0, iE3r %in% c(1,2,3,4) ~ 1)) +\n                                                         (case_when(iE3s == 0 ~ 0, iE3s %in% c(1,2,3,4) ~ 1)) +\n                                                         (case_when(iE3t == 0 ~ 0, iE3t %in% c(1,2,3,4) ~ 1)) +\n                                                         (case_when(iX16c == 0 ~ 0, iX16c %in% c(1,2,3,4,5) ~ 1)) +\n                                                         (case_when(iX2a == 0 ~ 0, iX2a %in% c(1,2,3,4,5) ~ 1)) +\n                                                         (case_when(iX2b == 0 ~ 0, iX2b %in% c(1,2,3,4,5) ~ 1)) +\n                                                         (case_when(iX2c == 0 ~ 0, iX2c %in% c(1,2,3,4,5) ~ 1))))\n\n##--------------\n##  INT__scale  \n##--------------\n\ndf <- df %>% mutate(validints = case_when(\n  iE1eee %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) &\n    iE1fff %in% c(0,1,2,3,4) &\n    iE1kkk %in% c(0,1,2,3,4) &\n    iE1rrr %in% c(0,1,2,3,4) &\n    iE1sss %in% c(0,1,2,3,4) &\n    iE1ttt %in% c(0,1,2,3,4) &\n    iE1uu %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(INT__scale = case_when(validints == 1 ~ \n                                                         iE1eee + iE1eeee + iE1fff + iE1kkk +\n                                                         iE1rrr + iE1sss + iE1ttt +  iE1uu + iE1vv +\n                                                         iE1ww + iE1xx + iE1yy))\n\n##--------------\n##  ADL__scale  \n##--------------\n\ndf <- df %>% mutate(validadl = case_when(\n  iG2a %in% c(0,1,2,3,4,5,6,8) & \n    iG2b %in% c(0,1,2,3,4,5,6,8) & \n    iG2c %in% c(0,1,2,3,4,5,6,8) &\n    iG2d %in% c(0,1,2,3,4,5,6,8) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(ADL__scale = case_when(validadl == 1 ~ \n                                         (case_when(iG2a == 0 ~ 0, iG2a %in% c(1,2,3,4,5) ~ 1, iG2a %in% c(6,8) ~ 2))+ \n                                         (case_when(iG2b == 0 ~ 0, iG2b %in% c(1,2,3,4,5) ~ 1, iG2b %in% c(6,8) ~ 2))+\n                                         (case_when(iG2c == 0 ~ 0, iG2c %in% c(1,2,3,4,5) ~ 1, iG2c %in% c(6,8) ~ 2))+\n                                         (case_when(iG2d == 0 ~ 0, iG2d %in% c(1,2,3,4,5) ~ 1, iG2d %in% c(6,8) ~ 2))))\n\n##--------------\n##  PEER__scale  \n##--------------\n\ndf <- df %>% mutate(valideer = case_when(\n  iP19b %in% c(0,1,8) &\n    iP19e %in% c(0,1,8) &\n    iP19f %in% c(0,1,8) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(PEER__scale = case_when(valideer == 1 ~ \n                                                         (case_when(iP19b == 1 ~ + 1, TRUE ~ 0) +\n                                                            case_when(iP19f == 1 ~ + 1, TRUE ~ 0) +\n                                                            case_when(iP19e == 1 ~ + 1, TRUE ~ 0))))\n\n##--------------\n##  FAM__scale  \n##--------------\n\ndf <- df %>% mutate(validily = case_when(\n  iF8a %in% c(0,1) &\n    iP19d %in% c(0,1,8) &\n    iP19h %in% c(0,1,8) &\n    iY7a %in% c(0,1) &\n    iY7b %in% c(0,1) &\n    iY8a %in% c(0,1,8) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(FAM__scale = case_when(validily == 1 ~ \n                                                         case_when(iP19d %in% c(0,1) & iP19h %in% c(0,1) & iY8a %in% c(0,1) ~\n                                                                     case_when(iF8a == 0 ~ (1 + iP19d + iP19h + iY7a + iY7b + iY8a), \n                                                                               iF8a == 1 ~ (iP19d + iP19h + iY7a + iY7b + iY8a)))))\n\n\n##--------------------\n##  STRENGTHS__scale  (Relational Strengths: sCYRelStren)\n##--------------------\n\ndf <- df %>% mutate(validrelstren = case_when(\n  iP8 %in% c(0,1) & \n    iF15c %in% c(0,1) &\n    iF8a %in% c(0,1) &\n    iF15d %in% c(0,1) &\n    iF15e %in% c(0,1) &\n    iF15f %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(STRENGTHS__scale = case_when(validrelstren == 1 ~ \n                                                               (case_when(iP8 == 0 ~ 1, iP8 == 1 ~ 0)) +\n                                                               (case_when(iF15c == 0 ~ 1, iF15c == 1 ~ 0)) +\n                                                               (case_when(iF8a == 0 ~ 1, iF8a == 1 ~ 0)) +\n                                                               (case_when(iF15d == 0 ~ 1, iF15d == 1 ~ 0)) +\n                                                               (case_when(iF15e == 0 ~ 1, iF15e == 1 ~ 0)) +\n                                                               (case_when(iF15f == 0 ~ 1, iF15f == 1 ~ 0))))\n\n##----------------------\n##  SCHLDISRUPT__scale  \n##----------------------\n\ndf <- df %>% mutate(validsdes = case_when(\n  iBB5a %in% c(0,1,8) & \n    iBB5b %in% c(0,1,8) & \n    iBB5e %in% c(0,1,8) & \n    iBB5f %in% c(0,1,8) & \n    iBB11a %in% c(0,1) & \n    iBB11b %in% c(0,1) & \n    iBB10 %in% c(0,1,2,3) & \n    iBB14a %in% c(0,1,2,3,8) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(SCHLDISRUPT__scale = case_when(validsdes == 1 ~ \n                                                                 (case_when(iBB5a == 1 ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB5b == 1 ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB5e == 1 ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB5f == 1 ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB10 %in% c(1,2,3) ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB11a == 1 ~ + 1, TRUE ~ 0) + \n                                                                    case_when(iBB11b == 1 ~ + 1, TRUE ~ 0) + \n                                                                    case_when(iBB14a %in% c(2,3) ~ + 1, TRUE ~ 0))))\n\n\n##------------------\n##  SENSORY__scale  \n##------------------\n\ndf <- df %>% mutate(validSensDiff = case_when( \n  iD28 %in% c(0,1,2,3,4) &\n    iD29 %in% c(0,1,2,3,4) &\n    iE3aa %in% c(0,1,2,3,4) &\n    oE3ab %in% c(0,1,2,3,4) & \n    oE3ac %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(SENSORY__scale = case_when(validSensDiff == 1 ~ \n                                                             iD28 + iD29 + iE3aa + oE3ab + oE3ac))\n\n##----------------\n##  INT-S__scale  \n##----------------\n\ndf <- df %>% mutate('INT-S__scale' = iE1eee + iE1eeee + iE1fff + iE1kkk +\n                                       iE1rrr + iE1sss + iE1ttt + iE1vv +\n                                       iE1ww + iE1xx + iE1yy)\n\n##----------------\n##  EXT-S__scale  \n##----------------\n\ndf <- df %>% mutate(validexts = case_when(\n  iE15a %in% c(0,1,2,3,4,5) &\n    iE15e %in% c(0,1,2,3,4,5) &\n    iE1oo %in% c(0,1,2,3,4) &\n    iE3l %in% c(0,1,2,3,4) &\n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2b %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate('EXT-S__scale' = case_when(validexts == 1 ~ \n                                                             (case_when(iE15a == 0 ~ 0, iE15a %in% c(1,2,3,4,5) ~ 1)) + \n                                                             (case_when(iE15e == 0 ~ 0, iE15e %in% c(1,2,3,4,5) ~ 1)) + \n                                                             (case_when(iE1oo == 0 ~ 0, iE1oo %in% c(1,2,3,4) ~ 1)) + \n                                                             (case_when(iE3l == 0 ~ 0, iE3m %in% c(1,2,3,4) ~ 1)) +\n                                                             (case_when(iX2a == 0 ~ 0, iX2a %in% c(1,2,3,4,5) ~ 1)) +\n                                                             (case_when(iX2b == 0 ~ 0, iX2b %in% c(1,2,3,4,5) ~ 1)) +\n                                                             (case_when(iX2c == 0 ~ 0, iX2c %in% c(1,2,3,4,5) ~ 1))))\n\n##----------------\n##  AUT__scale  \n##----------------\n\ndf <- df %>% mutate(validssc = case_when(iC7 %in% c(0,1,2) &\n                                                       iE3aa %in% c(0,1,2,3,4) &\n                                                       iE14a %in% c(0,1) &  \n                                                       iE14b %in% c(0,1) &                    \n                                                       iE14c %in% c(0,1) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(AUT__scale = case_when(validssc == 1 ~ \n                                                    (case_when(iE14a == 1 ~ 1, TRUE ~ 0)) + \n                                                    (case_when(iE14b == 1 ~ 1, TRUE ~ 0)) + \n                                                    (case_when(iE14c == 1 ~ 1, TRUE ~ 0)) + \n                                                    (case_when(iE3aa %in% c(1,2,3,4) ~ 1, TRUE ~ 0)) + \n                                                    (case_when(iC7== 2 ~ 1, TRUE ~ 0))))\n\n##----------------\n## COG__scale  \n##----------------\n\ndf <- df %>% mutate(validcognitive = case_when(\n  iC1d %in% c(0,1,2,3,4,5) &\n    iC2a %in% c(0,10) &\n    iC2b %in% c(0,1) & \n    iD1 %in% c(0,1,2,3,4) & \n    iD2 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(COG__scale = case_when(validcognitive == 1 ~ \n                                                                (case_when(iC1d == 0 ~ 0, iC1d %in% c(1,2,3,4,5) ~ 1)) +\n                                                                (case_when(iC2a == 0 ~ 0, iC2a == 1 ~ 1)) +\n                                                                (case_when(iC2b == 0 ~ 0, iC2b == 1 ~ 1)) +\n                                                                (case_when(iD1 == 0 ~ 0, iD1 %in% c(1,2,3,4) ~ 1)) +\n                                                                (case_when(iD2 == 0 ~ 0, iD2 %in% c(1,2,3,4) ~ 1))))\n\n##----------------\n##  MANIA__scale  \n##----------------\n\ndf <- df %>% mutate(validmania_old = case_when(\n  iE1bbb %in% c(0,1,2,3,4) &\n    iE1zz %in% c(0,1,2,3,4) &\n    iE1llll %in% c(0,1,2,3,4) &\n    iE1ccc %in% c(0,1,2,3,4) &\n    iE1aaa %in% c(0,1,2,3,4) &\n    iE6 %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\ndf <-df %>% mutate(MANIA__scale = case_when(validmania_old == 1 ~ case_when\n                                                        (iE6 == 0 ~  0, \n                                                          iE6 == 1 ~  1, \n                                                          iE6 == 2 ~  1, \n                                                          iE6 == 3 ~  1, \n                                                          iE6 == 4 ~  1,\n                                                          iE6 == 5 ~  2) + iE1bbb + iE1zz\n                                                        + iE1lll + iE1ccc + iE1aaa))\n\n##----------------\n##  SLEEP__scale  \n##----------------\n\ndf <- df %>% mutate(valideep = case_when(\n  iE1yyy %in% c(0,1,2,3,4) &\n    iE1zzz %in% c(0,1,2,3,4)&\n    iE1aaaa %in% c(0,1,2,3,4)&\n    iE1bbbb %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(SLEEP__scale = case_when(valideep == 1 ~ (iE1yyy +iE1zzz +iE1aaaa +\n                                                                          iE1bbbb)))\n\n##-------------------------\n##  Psychiatric Diagnosis  \n##-------------------------\n\ndf <- df %>% \n  mutate(`Psychiatric Diagnoses` = case_when(\n    is.na(iCC10b) & is.na(iCC1d) ~ NA,\n    !is.na(iCC10b) & rowSums(across(iCC10b:iCC10u, ~ . %in% c(2, 3, 4))) >= 1 ~ 1,\n    !is.na(iCC1d) & rowSums(across(iCC1d:iCC1u, ~ . %in% c(1, 2, 3, 4))) >= 1 ~ 1,\n    TRUE ~ 0\n  ))\n\n\n##---------------------\n##  Medical Diagnosis    #### DOUBLE CCHECK THIS\n##---------------------\n\ndf <- df %>%\n  mutate(`Medical Diagnoses` = case_when(\n    Tool != \"rscr\" & !is.na(iI1aa) & rowSums(across(iI1aa:iI1z)) >= 1 ~ 1,\n    !is.na(ComorbidMedical_Screen) ~ ComorbidMedical_Screen,\n    TRUE ~ 0\n  ))\n\n##----------\n##  ID/GGD  \n##----------\n\ndf <- df %>%\n  mutate('ID/GDD' = if_else(\n    Tool != \"rscr\" & (\n      iCC10b %in% c(1, 2, 3, 4) |\n        iCC10r %in% c(1, 2, 3, 4) |\n        iCC1r %in% c(1, 2, 3, 4) |\n        iCC9 %in% c(5, 6)\n    ), 1, 0),\n    if_else(\n      is.na(ID_Screen),\n      if_else(\n        ComorbidMedical_Screen == 1, 1,\n        if_else(ComorbidMedical_Screen == 0, 0, ComorbidMedical_Screen)\n      ),\n      if_else(ID_Screen == 1, 1,\n              if_else(ID_Screen == 0, 0, ID_Screen)\n      )))\n\n##----------------------\n##  Residential Issues  \n##----------------------\n\ndf$'Residential Issues' <- ifelse(\n  (df$iB12 == 1 | df$iB38c == 1 | df$iB38a == 1 | df$iB38b == 1 | df$iE5 %in% c(1,2,3) | (df$iA11b != 1 & !is.na(df$iA11b) & df$iA11b != 99)),\n  1,\n  ifelse(\n    (!is.na(df$iB12) & df$iB12 != 99) | (!is.na(df$iB38c) & df$iB38c != 99) | (!is.na(df$iB38a) & df$iB38a != 99) | (!is.na(df$iB38b) & df$iB38b != 99) | (!is.na(df$iE5) & df$iE5 != 99) | (!is.na(df$iA11b) & df$iA11b != 99),\n    0,\n    NA)\n)\n\n##---------\n##  xsdsi  \n##---------\n\ndf <- df %>% mutate(xsdsi =\n                                  iE1ss + iE1tt + iE1vv + iE1ww + iE1xx + iE1yy + \n                                  iE1aaa + iE1rrr + iE1ttt)\n##---------\n##  xsSOS  \n##---------\n\ndf <- df %>% mutate(xsSOS =  case_when(\n  iX1c == 5 ~ case_when(iX1b == 1 ~ 6, iX1b %in% c(0,8) ~ case_when(\n    iX1e == 1 ~ 6, iX1e == 0 ~ case_when(xsdsi >= 9 ~ 5, xsdsi < 9 ~ case_when(\n      iX1d == 1 ~ 4, iX1d == 0 ~ case_when(iE1nnn %in% c(1,2,3,4) ~ 5, \n                                           iE1nnn == 0 ~ 3))))),\n  iX1c %in% c(3,4) ~ case_when(iX1b == 1 ~ 4, iX1b %in% c(0,8) ~ 3),\n  \n  iX1c %in% c(1,2) ~ case_when(iX1b == 1 ~ case_when(xsdsi >= 6 ~ 4,\n                                                     xsdsi < 6 ~ case_when(\n                                                       iX1d == 1 ~ case_when(\n                                                         iE1nnn %in% c(1,2,3,4) ~ 5,\n                                                         iE1nnn == 0 ~ 3), \n                                                       iX1d == 0 ~ case_when(\n                                                         iE1nnn %in% c(1,2,3,4) ~ 4,\n                                                         iE1nnn == 0 ~ 3))),\n                               iX1b %in% c(0,8) ~ case_when(iE1nnn %in% \n                                                              c(1,2,3,4) ~ 3,\n                                                            iE1nnn == 0 ~ \n                                                              case_when(\n                                                                iX1d == 1 ~ 2,\n                                                                iX1d == 0 ~ 1))),\n  iX1c == 0 ~ 0))\n\n##-------------------------\n##  Valid RICHY variables  \n##-------------------------\n\ndf <- df %>% mutate(validrichy = case_when(\n  iE1yyy %in% c(0,1,2,3,4) & \n    iE3q %in% c(0,1,2,3,4) & \n    iE15e %in% c(0,1,2,3,4,5) &\n    iJ2k %in% c(0,1,2,3,4) & \n    iJ2y %in% c(0,1,2,3,4) & \n    iJ2dd %in% c(0,1,2,3,4) & \n    iJ2gg %in% c(0,1,2,3,4) & \n    iJ2ll %in% c(0,1,2,3,4) &\n    iJ3 %in% c(0,1,2,3) & \n    iJ9a %in% c(0,1) & \n    iJ9b %in% c(0,1) & \n    iJ9c %in% c(0,1) & \n    iJ9d %in% c(0,1) & \n    iJ9e %in% c(0,1) & \n    iJ9f %in% c(0,1) & \n    iJ9g %in% c(0,1) & \n    iP15a %in% c(0,1,2,8) &\n    iP15b %in% c(0,1,2,8) &\n    iP15c %in% c(0,1,2,8) &\n    iP15d %in% c(0,1,2,8) &\n    iP15e %in% c(0,1,2,8) &\n    iP15f %in% c(0,1,2,8) &\n    iP19b %in% c(0,1,8) &\n    iP19e %in% c(0,1,8) &\n    iX2b %in% c(0,1,2,3,4,5) &\n    iX16c %in% c(0,1,2,3,4,5) &\n    iY1al %in% c(0,1,2,3,4,5) &\n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) &\n    iY1aq %in% c(0,1,2,3,4,5) &\n    iY1ao %in% c(0,1,2,3,4,5) &\n    iY1au %in% c(0,1,2,3,4,5) &\n    iE1eee %in% c(0,1,2,3,4) & \n    iE1fff %in% c(0,1,2,3,4) & \n    iE1ggg %in% c(0,1,2,3,4) & \n    iE1hhh %in% c(0,1,2,3,4) & \n    iE1iii %in% c(0,1,2,3,4) & \n    iE1kkk %in% c(0,1,2,3,4) & \n    iE1lll %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) & \n    iF8a %in% c(0,1) &\n    iP19d %in% c(0,1,8) &\n    iP19h %in% c(0,1,8) & ## identical to this point\n    iY7a %in% c(0,1) &\n    iY7b %in% c(0,1) &\n    iY8a %in% c(0,1,8) & \n    iE1oo %in% c(0,1,2,3,4) &\n    iE1nnn %in% c(0,1,2,3,4) & \n    iX1b %in% c(0,1,8) & \n    iX1c %in% c(0,1,2,3,4,5) & \n    iX1d %in% c(0,1) &\n    iX1e %in% c(0,1) & \n    iE1ss %in% c(0,1,2,3,4) & \n    iE1tt %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) &\n    iE1aaa %in% c(0,1,2,3,4) &\n    iE1rrr %in% c(0,1,2,3,4) &\n    iE1ttt %in% c(0,1,2,3,4) &\n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) &\n    Age >= 0 & Age <= 130 &\n    PARENTING__scale %in% c(0:12) ~ 1, TRUE ~ 0))\n\ndf <- df %>% mutate(validSSH = case_when(\n  iE1oo %in% c(0,1,2,3,4) & \n    xsSOS %in% c(0,1,2,3,4,5,6) ~ 1, TRUE ~ 0))\n\n##-----------\n##  xparent  ## added ip15e and iP15f (as per SAS)\n##-----------\n\ndf <- df %>% mutate(xparent = case_when(\n  iP15a == 8 | iP15b == 8 | iP15c == 8 | iP15d == 8 | iP15e == 8 | iP15f ==8 ~ 1, TRUE ~ 0)) ## CHECK THIS!!!!!!!!!!!!!!!!!!!\n\n##----------\n##  xabuse  \n##----------\n\ndf <- df %>% mutate(xabuse = case_when(\n  iY1al %in% c(1,2,3,4,5) ~ + 1, iY1am %in% c(1,2,3,4,5) ~ + 1, \n  iY1an %in% c(1,2,3,4,5) ~ + 1, iY1aq %in% c(1,2,3,4,5) ~ + 1, \n  iY1ao %in% c(1,2,3,4,5) ~ + 1, iY1au %in% c(1,2,3,4,5) ~ + 1))\n\n##-----------\n##  xmedsym  \n##-----------\n\ndf <- df %>% mutate(xmedsym = case_when(\n  iJ2k %in% c(1,2,3,4) ~ + 1, iJ2y %in% c(1,2,3,4) ~ + 1, \n  iJ2dd %in% c(1,2,3,4) ~ + 1, iJ2gg %in% c(1,2,3,4) ~ + 1, \n  iJ2ll %in% c(1,2,3,4) ~ + 1, iJ3 %in% c(1,2,3) ~ + 1, iJ9a == 1 ~ + 1,\n  iJ9b == 1 ~ + 1, iJ9c == 1 ~ + 1, iJ9d == 1 ~ + 1, iJ9e == 1 ~ + 1, \n  iJ9f == 1 ~ + 1, iJ9g == 1 ~ + 1))\n\n##-----------\n##  xsANXIETY  \n##-----------\n\ndf <- df %>% mutate(xsANXIETY =  \n                      iE1eee + iE1fff + iE1ggg + iE1hhh + iE1iii + iE1kkk + iE1lll + iE1eeee)\n\n##------------\n##  xsFAMILY  \n##------------\n\ndf <- df %>% mutate(xsFAMILY = case_when(\n  iP18d != 8 & iP19h !=8 & iY8a != 8 ~ case_when(\n    iF8a == 0 ~ 1 + iP19d + iP19h + iY7a + iY7b + iY8a,\n    iF8a == 1 ~ iP19d + iP19h + iY7a + iY7b + iY8a)))\n\n\n##---------\n##  ssSOSval  \n##---------\n\ndf$ssSOSval <- ifelse(\n  df$iX1c %in% c(0, 1, 2, 3, 4, 5, 8) &\n    df$iX1e %in% c(0, 1, 2, 3, 4, 5, 8) &\n    df$xsdsi %in% 0:36 &\n    df$iX1d %in% c(0, 1, 2, 3, 4, 5, 8) &\n    df$iE1nnn %in% c(0, 1, 2, 3, 4, 5, 8) &\n    df$iX1b %in% c(0, 1, 2, 3, 4, 5, 8),\n  1, 0\n)\n\n\n##---------\n##  xcSSH  \n##---------\n\ndf <- df %>% mutate(xcSSH = case_when(\n  xsSOS %in% c(5,6) ~ 2, xsSOS %in% c(3,4) ~ case_when(\n    iE1oo >= 2 ~ 2, iE1oo < 2 ~ 1), xsSOS < 3 ~ 0))\n\n\n##---------\n##  sRHOval  \n##---------\n\ndf$sRHOval <- ifelse(\n  df$iX2a %in% c(0,1,2,3,4,5) &\n    df$iX2c %in% c(0,1,2,3,4,5) &\n    df$iX2b %in% c(0,1,2,3,4,5) &\n    df$iX16c %in% c(0,1,2,3,4,5) &\n    df$iE1mmm %in% c(0,1,2,3,4,5) &\n    df$iE1nnn %in% c(0,1,2,3,4,5) &\n    df$iE1ooo %in% c(0,1,2,3,4,5) &\n    df$iE1ppp %in% c(0,1,2,3,4,5),\n  1, 0)\n\n#################################################\n# xsRHO \n#################################################\n\ndf <- df %>% mutate(xsRHO = case_when(\n  iX2a %in% c(4,5) ~ 6, iX2a %in% c(2,3) ~ case_when( \n    iX2c %in% c(4,5) | iX2b %in% c(4,5) | iX16c %in% c(4,5) ~ 6, iE1mmm %in%\n      c(2,3,4) | iE1nnn %in% c(2,3,4) | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n      c(2,3,4) ~ 5, TRUE ~ 4),\n  iX2a %in% c(0,1) ~ case_when(iX2c %in% c(4,5) | iX2b %in% c(4,5) | \n                                 iX16c %in% c(4,5) ~ case_when(\n                                   iE1mmm %in% c(2,3,4) | iE1nnn %in% c(2,3,4) \n                                   | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n                                     c(2,3,4) ~ 3, TRUE ~ 2), TRUE ~\n                                 case_when(\n                                   iE1mmm %in% c(2,3,4) | iE1nnn %in% c(2,3,4) \n                                   | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n                                     c(2,3,4) ~ 1, TRUE ~ 0))))\n\n#########################################################\n# xcHARMOTH\n#################################################\n\ndf <- df %>% mutate(xcHARMOTH = case_when(\n  xsRHO %in% c(5,6) ~ 2, xsRHO %in% c(3,4) ~ case_when(\n    iE1oo %in% c(2,3,4) ~ 2, iE1oo < 2 ~ 1), xsRHO < 2 ~ 0))\n\n#########################################################\n# RICHY__scale Calculation * NEW\n#################################################\n\ndf <- df %>% mutate(RIChY_scale = case_when(\n  Age <= 7 ~ case_when(\n    iX2b %in% c(3,4,5) ~ 3, iX2b %in% c(0,1,2) ~ case_when(\n      iE3q %in% c(2,3,4) ~ 1, iE3q %in% c(0,1) ~ 0)),\n  \n  Age %in% c(8,9,10,11) ~ case_when(\n    iP19b == 8 | iP19e == 8 ~ case_when(\n      xsANXIETY >= 7 ~ 5, xsANXIETY %in% c(0,1,2,3,4,5,6) ~ 3),\n    iP19b != 8 & iP19e != 8 ~ case_when(\n      iE15e %in% c(2,3,4,5) | iP19b == 1 ~ case_when(\n        PARENTING__scale >= 3 | xparent == 1 ~ 4, \n        PARENTING__scale %in% c(0,1,2) ~ case_when(\n          iE1yyy %in% c(2,3,4) ~ 3, iE1yyy %in% c(0,1) ~ 2)), ## FOUND ERROR should iE1yyy %in% c(2, 3, 4) ~ 3???\n      iE15e %in% c(0,1) & iP19b %in% c(0, 8) ~ case_when( # 0 or 8\n        xsFAMILY >= 3 | iY8a == 8 ~ 3, xsFAMILY %in% c(0,1,2) ~ case_when(\n          xabuse >= 1 | xmedsym >= 1 ~ 1, xabuse == 0 & xmedsym == 0 ~ 0)))), \n    Age >= 12 ~ case_when(\n    iE15e %in% c(2,3,4,5) | iP19b == 1 ~ case_when(\n      xsANXIETY >= 10 ~ 3, xsANXIETY <= 9 ~ 5), \n    iE15e %in% c(0,1) & iP19b %in% c(0,8) ~ case_when( ## this one too\n      xcSSH %in% c(1,2) ~ 4, xcSSH == 0 ~ case_when(\n        xcHARMOTH %in% c(1,2) ~ 4, xcHARMOTH == 0 ~ case_when(\n          xsFAMILY >= 1 | iY8a == 8 ~ case_when(\n            xparent == 1 ~ 3, xparent == 0 ~ 2), xsFAMILY == 0 ~ 0))))))    \n\n\n# test <- df %>% select(EMHID, validrichy, Age, iX2b, iE3q, iP19b, iP19e, xsANXIETY, iP19b, iP19e, iE15e, iP19b, PARENTING__scale, xparent, iE1yyy, xsFAMILY, iY8a, xabuse, xmedsym, xcSSH, xcHARMOTH, RIChY_scale, RIChY_scale2)\n\n#########################################################\n# ALEIC__scale\n#################################################\n\ndf <- df %>% \n    mutate(ALEIC__scale = rowSums(\n    data.frame(\n      PhysAbuse = ifelse(iY1an %in% c(1,2,3,4,5), 1, 0),\n      EmoAbuse = ifelse(iP19d == 1 | iY1ao %in% c(1, 2, 3, 4, 5), 1, 0),\n      SexAbuse = ifelse(iY1am %in% c(1,2,3,4,5), 1, 0),\n      WitnessViolence = ifelse(iP19g == 1 | iY1au %in% c(1, 2, 3, 4, 5), 1, 0),\n      PhysNeglect = ifelse(iB34b %in% c(1,2,3) | iB34c%in% c(1,2,3) | iQ5a ==1 | iQ5b ==1, 1, 0),\n      EmoNeglect = ifelse(iB34a %in% c(1, 2, 3), 1, 0),\n      Neglect = ifelse(iY1at %in% c(1, 2, 3, 4, 5) | iY9 ==1 | iY8a %in% c(1, 2, 3, 4, 5), 1, 0),\n      Parental = ifelse(iY1ap %in% c(1, 2, 3, 4, 5)| iY7a ==1, 1, 0),\n      Placement = ifelse(iB35 ==1 | iB12 ==1, 1, 0),\n      Bullying = ifelse(iY1aq %in% c(1, 2, 3, 4, 5), 1, 0),\n      MHStressors = ifelse(iY7b ==1| iBB11b ==1, 1, 0),\n      DeathLoss = ifelse(iY1ac %in% c(1, 2, 3, 4, 5)| iY1ar %in% c(1, 2, 3, 4, 5), 1, 0),\n      Accident = ifelse(iY1aa %in% c(1, 2, 3, 4, 5), 1, 0),\n      Disaster = ifelse(iY1ak %in% c(1,2,3,4,5)| iY1al %in% c(1,2,3,4,5), 1, 0),\n      WarZone = ifelse(iY1aj %in% c(1,2,3,4,5), 1, 0),\n      Migration = ifelse(iY1ai %in% c(1,2,3,4,5), 1, 0)\n    ), na.rm=TRUE))\n\n#########################################################\n# TSS__scale\n#################################################\n\ndf <- df %>% \n  mutate(TSS__scale = case_when(\n    is.na(ALEIC__scale) ~ NA,\n    TRUE ~ (ifelse(iE1pp %in% 1:5, 1, 0) +\n              ifelse(iE1ss %in% 1:5, 1, 0) +\n              ifelse(iE1vv %in% 1:5, 1, 0) +\n              ifelse(iE1ww %in% 1:5, 1, 0) +\n              ifelse(iE1xx %in% 1:5, 1, 0) +\n              ifelse(iE1yy %in% 1:5, 1, 0) +\n              ifelse(iE1aaa %in% 1:5, 1, 0) +\n              ifelse(iE1iii %in% 1:5, 1, 0) +\n              ifelse(iE1jjj %in% 1:5, 1, 0) +\n              ifelse(iE1kkk %in% 1:5, 1, 0) +\n              ifelse(iE1lll %in% 1:5, 1, 0) +\n              ifelse(iE1eeee %in% 1:5, 1, 0) +\n              ifelse(iE1qqq %in% 1:5, 1, 0) +\n              ifelse(iE1sss %in% 1:5, 1, 0) +\n              ifelse(iE1ttt %in% 1:5, 1, 0) +\n              ifelse(iE1yyy %in% 1:5, 1, 0) +\n              ifelse(iE1zzz %in% 1:5, 1, 0) +\n              ifelse(iB10a %in% c(0, 8), 0, ifelse(iB10a == 1, 1, 0)) +\n              ifelse(iY1b %in% c(0, 8), 0, ifelse(iY1b == 1, 1, 0)))))\n\n\n############################################################################\n############################################################################\n###                                                                      ###\n###                  SELECT COLUMNS FOR INTERRAI BI CSV                  ###\n###                                                                      ###\n############################################################################\n############################################################################\n\n\ninterRAI <- df %>%\n select(\"iA3\", \"client_id\", \"iA2\", \"ref\", \"compl\", \"program_name\",  \"oV5\", \"oGoal1\", \"oGoal2\", \"oGoal3\", \"oGoal4\", \"iA5a\", \"record_id\", \"client_id\", \"worker_id\", \"program_id\", \"cihiA2a\", \"cihiA2c\", \"iA2\", \"Tool\", \"Type\", \"EMHID\", \"Age\", \"FirstChYMH\", \"FirstAx\", \"FirstScreener\", \"LastAx\", \"LastChYMH\", \"LastScreener\", \"DSI__scale\", \"ANX__scale\", \"CHAMHPS__scale\", \"DABS__scale\", \"SOCDIS__scale\", \"DISTRACT__scale\", \"KinarkRiskHTO_comb\", \"KinarkRiskHTS_comb\", \"KinarkRiskHTP_comb\", \"KinarkRiskSM_comb\", \"KinarkRiskVCP_comb\", \"KinarkRiskFB_comb\", \"KinarkRiskOC_comb\", \"Acute\", \"Complex\", \"KinarkRiskHTO_cat\", \"KinarkRiskHTS_cat\", \"KinarkRiskHTP_cat\", \"KinarkRiskSM_cat\", \"KinarkRiskVCP_cat\", \"KinarkRiskFB_cat\", \"KinarkRiskOC_cat\", \"Acute_cat\", \"Complex_cat\", \"ED_Screen\", \"ID_Screen\", \"ComorbidMedical_Screen\", \"PSS__scale\", \"Trauma\", \"RISSK__scale\", \"RIO__scale\", \"SOS__scale\", \"RHO__scale\", \"IADLC__scale\", \"CAREDIS__scale\", \"PARENTING__scale\", \"COMM__scale\", \"CAS\", \"Psychiatrist\", \"FamilyEngaged\", \"Physical Activity\", \"Attachment\", \"Caffeine Use\", \"Caregiver Distress\", \"Communication\", \"Control Interventions\", \"Criminality Prevention\", \"Education\", \"Hazardous Fire Involvement\", \"Gambling\", \"Harm to Others\", \"Informal Support\", \"Interpersonal Conflict\", \"Life Skills\", \"Medication Adherence\", \"Medication Review\", \"Parenting2\", \"Readmission\", \"Suicidality and Purposeful Self-Harm\", \"Sexual Behaviour\", \"Sleep Disturbance\", \"Social and Peer Relationships\", \"Strengths\", \"Substance Use\", \"Support Systems for Discharge\", \"Tobacco and Nicotine Use\", \"Transitions\", \"Traumatic Life Events\", \"Video Gaming\", \"Eating/Weight\", \"ABS__scale\", \"EXT__scale\", \"INT__scale\", \"ADL__scale\", \"PEER__scale\", \"FAM__scale\", \"STRENGTHS__scale\", \"SCHLDISRUPT__scale\", \"SENSORY__scale\", \"INT-S__scale\", \"EXT-S__scale\", \"AUT__scale\", \"COG__scale\", \"MANIA__scale\", \"SLEEP__scale\", \"Psychiatric Diagnoses\", \"Medical Diagnoses\", \"ID/GDD\", \"Residential Issues\", \"RIChY_scale\", \"ALEIC__scale\", \"TSS__scale\")\n\nrm(ChYMH_export, df) # Remove unnecessary dfs\n```\n:::\n\n\n\n\n## Compass Script\n\nThe Compass R interRAI R Script (this file can also be found in the root of the data manual directory in the scripts folder)\n\n\n\n\n::: {.cell}\n\n```{.r .foldable .cell-code}\n############################################################################\n############################################################################\n###                                                                      ###\n###                        STRICT POWER BI SCRIPT - VII                   ###\n###                                                                      ###\n############################################################################\n############################################################################\n\n## REMINDER: WHEN FINISHED CALCULATIONS REMOVE UNECESSARY DFS TO DECREASE NAVIGATOR LOADING TIME IN POWERBI\n\nrm(list = ls())\n\nlibrary(readr)\nlibrary(dplyr)\nlibrary(readxl)\nlibrary(data.table)\nlibrary(magrittr)\nlibrary(stringr)\n#library(janitor)\n\n##################################################################\n##                       Reference Tables                       ##\n##################################################################\n\n# First grab our reference tables\n\nID_Lookup <- read_excel(\"M:/DATA & REPORTS/Clinical & Client Services/Clinical Data/interRAI/interRAI Data.xlsx\", sheet = \"ID Lookup\")\n\nID_Lookup <- subset(ID_Lookup, select=-c(4, 5, 10:12, 18:34)) \n\n# Chart Number / EMHID / CRN lookup\n\nTable1 <- subset(ID_Lookup, select=c(1:3)) ## this one is needed\n\n# Chart Number / ID lookup\n\nTable4 <- subset(ID_Lookup, select=c(4:7)) ## this one is needed\n\nTable4 <- Table4 %>% rename(\"Chart Number\" = \"Chart Number...7\", \"Gender\" = \"Gender...9\")\n\n##################################################################\n##                   Detailed Program History                   ##\n##################################################################\n\nfilepath <- \"M:/DATA & REPORTS/Clinical & Client Services/Clinical Data/Program Histories/Detailed Program History and Client Data\"\n\n# Get a list of file paths\n\nfiles <- list.files(path=filepath, pattern=\"*.csv\", full.names=TRUE)\n\n# Read in each file as a data frame and subset the columns we want to keep\n\ndf_list <- lapply(files, function(file) {\n  df <- read.csv(file)\n  cols_to_keep <- c(1,2, 3, 61, 65)\n  df[, cols_to_keep]\n})\n\n# Merge the data frames \n\nDetailedHistory_export <- do.call(rbind, df_list)\n\n## Rename column headers\n\nCIS_ID1 <- DetailedHistory_export %>%\n  select(\"Client ID#\" = 1,\"Year of Birth\" = 2, \"Gender\" = 3, \"Chart Number\" = 4, \"BI CIS Client Identifier\"=5 ) %>%\n  distinct()\n\n# remove duplicate rows\n\nCIS_ID1 <- CIS_ID1 %>%\n  distinct()\n\n############################################################################\n############################################################################\n###                                                                      ###\n###                          IDEAS WEB                                   ###\n###                                                                      ###\n############################################################################\n############################################################################\n\n# Load Codebook (variable descriptions and rules to keep as well as descriptors etc)\n\nIdeasWeb_CodeBook <- read_excel(\"M:\\\\DATA & REPORTS\\\\Clinical & Client Services\\\\Clinical Data\\\\interRAI\\\\interRAI Matching Codebook.xlsx\",sheet = \"ideasWeb Variables\")\n\n# Grab old Ideas Web data\n\ninterRAI_ideasWeb <- read_excel(\"M:/DATA & REPORTS/Clinical & Client Services/Clinical Data/interRAI/ideasWeb interRAI ChYMH Export/interRAI Data ideasWeb.xlsx\", na=c(\"99\",\"n/a\"))\n\n# Rename problematic columns\n\ninterRAI_ideasWeb <- interRAI_ideasWeb %>% dplyr::rename(iP22a1=iP22a1...452, iP22a2=iP22a2...453, iP22a1_OLD=iP22a1...625, iP22a2_OLD=iP22a2...626)\n\n# grab codes of the variables we want to keep \n\nkeep1_1 <- filter(IdeasWeb_CodeBook, KEEP==TRUE)$`iCode ideasWeb` # subset the iCode ideasWeb values\nkeep1_2 <- filter(IdeasWeb_CodeBook, KEEP==TRUE)$`NewCode` # subset the newvalues\n\n# change old names to new names\n\nkeep1_2 <- make.unique(keep1_2)\n\ndf1_2 <- dplyr::select(interRAI_ideasWeb,keep1_1)\n\ndf1_3 <- setnames(df1_2, old = keep1_1, new =keep1_2)  ### should improve this method I think\n\ndf1_3$SOURCE <- \"ideasWeb\" #label these as ideasWeb items\n\n# format dates\n\n# convert the 3 previous \"history of concussion\" columns to 1 column\n\ndf1_3$iI9<-ifelse((df1_3$iI9+df1_3$iI9.2+df1_3$iI9.1)==0,0,\n                    ifelse((df1_3$iI9+df1_3$iI9.2+df1_3$iI9.1)==1,1,\n                           ifelse((df1_3$iI9+df1_3$iI9.2+df1_3$iI9.1)==2,2,\n                                  ifelse((df1_3$iI9+df1_3$iI9.2+df1_3$iI9.1)>=3,3,NA))))\n\n# convert Formal Care - Behaviour Therapist to columns to 1\n\ndf1_3$iN16s <- ifelse(is.na(df1_3$iN16s),df1_3$iN16s.1,df1_3$iN16s)\n\n# convert Formal Care - Behaviour Therapist to columns to 1\n\ndf1_3$iF8a <- ifelse(is.na(df1_3$iF8a),df1_3$iF8a.1,df1_3$iF8a)\n\n# convert Strengths - Strong and supportive relationship with family\n\ndf1_3$iA11b <- ifelse(is.na(df1_3$iA11b),df1_3$iA11b.1,df1_3$iA11b)\n\n# convert Parent/Primary Caregiver has Current Developmental or Mental Health issues\n\ndf1_3$iY7a <- ifelse(is.na(df1_3$iY7a),df1_3$iY7a.1,df1_3$iY7a)\n\n# Convert NAs to true NA: school attendance (number of days absent)\n\ndf1_3$iBB9[df1_3$iBB9 == \"NA\" | is.na(df1_3$iBB9)] <- NA\n\n# format columns\n\ndf1_4_3<- df1_3 %>% mutate_at(c('iB36a','iB36b','iBB12','iBB9','iN5a','iN5b','iN5c'),as.numeric)\n\ndf1_4_3$iB2 <- as.Date(with(df1_4_3, paste(iB2b,iB2c,iB2a,sep=\"-\")),\"%m-%d-%Y\") ## \n\ndf1_4_3$iT1 <- as.Date(with(df1_4_3,paste(iT1b,iT1c,iT1a, sep=\"-\")),\"%m-%d-%Y\")\n\n#df1_4_3$survey_type<-as.numeric(dplyr::recode(df1_4_3$survey_type, 'Initial'=1, 'Monitoring Assessment'=2, 'Discharge'=3, 'Readmission Initial'=1, 'Subsequent'=2, .default=4))\n \ndf1_4_3 <- df1_4_3 %>% dplyr::mutate_at(c(\"KinarkRiskVCP\",\"KinarkRiskHTO\",\"KinarkRiskFB\",\"KinarkRiskOC\"), ~as.integer(dplyr::recode(.,\"no\"=0,\"maybe\"=1,\"yes\"=2,\"superyes\"=3)))\n \ndf1_4_3 <- df1_4_3 %>% dplyr::mutate_at(c(\"KinarkRiskHTP\",\"KinarkRiskSM\"), ~as.integer(dplyr::recode(.,\"no\"=0,\"yes\"=1)))\n \ndf1_4_3 <- df1_4_3 %>% dplyr::mutate_at(c(\"KinarkRiskHTS\"), ~as.integer(dplyr::recode(.,\"no\"=0,\"maybe\"=1,\"superyes\"=2)))\n\ndf1_4_3$CaseComplexityFA <- as.character(df1_4_3$CaseComplexityFA)\n\ndf1_4_3$CaseComplexityS <- as.character(df1_4_3$CaseComplexityS)\n\ndf1_4_3$cihiU3 <- as.character(df1_4_3$cihiU3)\n\n# format TRUE false to 1 and 0\n\ndf1_4_3 <- df1_4_3 %>% dplyr::mutate_at(c(\"CaseComplexityFA\",\"CaseComplexityS\", \"cihiU3\"), ~as.integer(dplyr::recode(.,\"TRUE\"=1,\"FALSE\"=0)))\n\n# remove extra columns\n\ndf1_4_4 <- dplyr::select(df1_4_3,-c(\"iB2a\",\"iB2b\",\"iB2c\",\"iI9.1\",\"iI9.2\",\"iN16s.1\",\"iT1a\",\"iT1b\",\"iT1c\",\"iF8a.1\",\"iA11b.1\",\"iY7a.1\"))\n\ndf1_5 <- df1_4_4 %>% dplyr::select(order(colnames(df1_4_4)))\n\ndf1_5$iU2 <- as.Date(df1_5$iU2, \"%m/%d/%Y\")\ndf1_5$iT1 <- as.Date(df1_5$iT1, \"%m/%d/%Y\")\ndf1_5$iA9 <- as.Date(df1_5$iA9, \"%m/%d/%Y\")\n\ndf1_6 <- df1_5\n\ndf1_6$iA8 <- as.character(df1_6$iA8)\ndf1_6$iA2 <- as.character(df1_6$iA2)\ndf1_6$cihiA2a <- as.character(df1_6$cihiA2a)\n\n## This needs to be properly figured out still *gender/sex/etc)\n# cihiA2a is new \"sex\" variable (from ideasweb)\n\ndf1_6 <- df1_6 %>%\n  mutate(cihiA2a = case_when(\n    is.na(cihiA2a)  ~ NA,\n    cihiA2a == \"UN\" ~ \"UNK\",\n    cihiA2a==\"M\"~\"M\",\n    cihiA2a==\"F\"~\"F\",\n    TRUE ~ NA\n  ))\n\n##################################################################\n##                      EMHware ChYMH DATA                      ##\n##################################################################\n\n## Grab EMHware codebook\n\nEMHware_CodeBook <- read_excel(\"M:\\\\DATA & REPORTS\\\\Clinical & Client Services\\\\Clinical Data\\\\interRAI\\\\interRAI Matching Codebook.xlsx\", sheet = \"EMHware Variables\")\n\n#### Grab new ChYMH data\n\nChYMH_folder <- \"M:/DATA & REPORTS/Clinical & Client Services/Clinical Data/interRAI/EMHware interRAI ChYMH Export\"\n\nallfiles <- list.files(path=ChYMH_folder, pattern=\"*.csv\", full.names=TRUE)\n\nChYMH_export <- plyr::ldply(allfiles, read_csv, show_col_types = FALSE)\n\n# filter all those without NA in program\n\nChYMH_1 <- filter(ChYMH_export,!is.na(program_name)) # remove rows w/NAs in program_name\n\nChYMH_1 <- subset(ChYMH_1, !grepl(\"default\", program_name)) # remove rows w/default as program\n\n# define variables we want to keep (leave this out for now)\n\n#keep2_1 <- filter(EMHware_CodeBook, KEEP==TRUE)$`iCode EMHware`\n\n#ChYMH_2<- dplyr::select(ChYMH_1,all_of(keep2_1)) # can also use \"any_of\" command\n\nChYMH_1$SOURCE<-\"EMHware\"\n\n# convert all true and false to 0 and 1\n# use the code below to double to subset all columns that countain the string (to double check not removing important text)\n#sub <- ChYMH_export[grep(\"true\", ChYMH_export)] \n\n# ChYMH_1[ChYMH_1 == 'false'] <- 0 <--- this code stopped working on 08-21-2023 / not sure why but was getting POSIX error--which was weird\n# ChYMH_1[ChYMH_1 == 'true'] <- 1\n\n# ChYMH_1[ChYMH_1 == 'FALSE'] <- 0\n# ChYMH_1[ChYMH_1 == 'TRUE'] <- 1\n\nChYMH_1 <- ChYMH_1 %>%\n  mutate(across(everything(), ~sub(\"true\", \"1\", .)))\nChYMH_1 <- ChYMH_1 %>%\n  mutate(across(everything(), ~sub(\"false\", \"0\", .)))\nChYMH_1 <- ChYMH_1 %>%\n  mutate(across(everything(), ~sub(\"TRUE\", \"1\", .)))\nChYMH_1 <- ChYMH_1 %>%\n  mutate(across(everything(), ~sub(\"FALSE\", \"0\", .)))\n\n\n\n# NA erroneous dates\nChYMH_1$cihiAD4c[ChYMH_1$cihiAD4c == as.Date(\"1900-04-08\")] <- NA \nChYMH_1$iB2[ChYMH_1$iB2 == as.Date(\"1900-04-08\")] <- NA \nChYMH_1$iU2[ChYMH_1$iU2 == as.Date(\"1900-04-08\")] <- NA \n\n# auto format column types\n\nChYMH_2 <- type_convert(ChYMH_1)\n\nChYMH_3 <- transform(ChYMH_2,cihiU3=as.numeric(cihiU3),client_id=as.character(client_id),iA5d=as.character(iA5d))\n\n#ChYMH_4$iA2<-as.numeric(dplyr::recode(ChYMH_4$iA2, \"M\"=1, \"F\"=2, \"OTH\"=3))\n\n#ChYMH_4$cihiA2a<-as.numeric(dplyr::recode(ChYMH_4$cihiA2a, \"M\"=1, \"F\"=2, \"UN\"=3))\n\n#ChYMH_4$iA8 <-as.numeric(dplyr::recode(ChYMH_4$iA8, '1'=1, '2'=2,'3'=3,'4'=4,'5'=5,'6'=6,'7'=7,'5First'=5, '6First'=6)) #####\n\nChYMH_3$iA8 <- gsub(\"1\", \"Initial\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"6First\", \"Initial\", ChYMH_3$iA8) ### CHECK THESE!!!! <-------------- Ask Nick\nChYMH_3$iA8 <- gsub(\"5First\", \"Initial\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"5\", \"Discharge\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"2\", \"Reassessment\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"6\", \"Discharge\", ChYMH_3$iA8)\nChYMH_3$iA8 <- gsub(\"4\", \"Reassessment\", ChYMH_3$iA8)\n\n#ChYMH_3[ChYMH_3 == \"\"] <- NA # all blank spaces become NA\n\nChYMH_4 <- subset(ChYMH_3, !grepl(\"default\", program_name))\n\n# \n# ChYMH_4$type1 <-  ifelse(ChYMH_4$iA8==\"Initial\", \"Initial\",\n#                        ifelse(ChYMH_4$iA8==\"Reassessment\" | ChYMH_4$iA8==\"Subsequent\", \"Reassessment\",\n#                               ifelse(ChYMH_4$iA8==5 |ChYMH_4$iA8==6,3,\n#                                      ifelse(ChYMH_4$iA8==7,4,0))))\n# \n# ChYMH_4$type2 <-  ifelse(ChYMH_4$oA8==\"S-INTL\",1,\n#                        ifelse(ChYMH_4$oA8==\"S-SQNT\",2,\n#                               ifelse(ChYMH_4$oA8==\"S-DCRG\",3,0)))\n# \n# ChYMH_4$type3 <-  ifelse(ChYMH_4$type_cd==\"chymh_dd_monitoring_op\",2,\n#                        ifelse(ChYMH_4$type_cd==\"chymh_monitoring_op\",2,0))\n# \n# ChYMH_4$survey_type2 <-  ifelse(ChYMH_4$type3 != 0 & !is.na(ChYMH_4$type3), ChYMH_4$type3,\n#                              ifelse(ChYMH_4$type2 != 0 & !is.na(ChYMH_4$type2), ChYMH_4$type2,\n#                                     ifelse(ChYMH_4$type1 != 0 & !is.na(ChYMH_4$type1), ChYMH_4$type1, NA)))\n\n\n# convert all instances of 'true' to 1\n# use the code below to double to subset all columns that countain the string (to double check not removing important text)\n#sub <- ChYMH_export[grep(\"true\", ChYMH_export)] \n\nChYMH <- ChYMH_4\nIdeas <- df1_6\n\nIdeas <- Ideas %>% mutate_if(is.integer, as.numeric)\n#Ideas$iA9 <- as.Date(Ideas$iA9, \"%m/%d/%Y\")\nIdeas$iB2 <- as.Date(Ideas$iB2, \"%m/%d/%Y\")\nIdeas$iT1 <- as.Date(Ideas$iT1, \"%m/%d/%Y\")\n#Ideas$iU2 <- as.Date(Ideas$iU2, \"%m/%d/%Y\")\nChYMH$iA11a <- as.numeric(ChYMH$iA11a)\nChYMH$iAA1a <- as.numeric(ChYMH$iAA1a)\nChYMH$iAA1c <- as.numeric(ChYMH$iAA1c)\nChYMH$iAA1d <- as.numeric(ChYMH$iAA1d)\nChYMH$iAA1e <- as.numeric(ChYMH$iAA1e)\nChYMH$iAA1f <- as.numeric(ChYMH$iAA1f)\nChYMH$iM7 <- as.numeric(ChYMH$iM7)\nChYMH$iN6c <- as.numeric(ChYMH$iN6c)\n\n#common <- compare_df_cols_same(ChYMH, Ideas) # Code to check if any variables differ in format (each matching variable must have same format)\n\n# ChYMH$client_id <- as.character(ChYMH$iN6c)\n# ChYMH$iN6c <- as.numeric(ChYMH$iN6c)\n# Join dfs\n\nCombined <- dplyr::bind_rows(ChYMH, Ideas) # join the dfs\n\n\n#Combined <- Combined %>%\n#  filter(type_cd %in% c(\"chymh_op\", \"chymh_s_plus\", \"chymh_dd_op\", \"chymh_monitoring_op\"))  # DOUBLEL CHECK THIS WITH NICK\nrm(ChYMH_1, ChYMH_2, ChYMH_3, ChYMH_4, df1_2, df1_3, df1_4_3, df1_4_4, df1_5, df1_6)\n############################################################################\n############################################################################\n###                                                                      ###\n###                          CALCULATED COLUMNS                          ###\n###                                                                      ###\n############################################################################\n############################################################################\n\n##----------------------------\n##   1. Assessment tool used  \n##----------------------------\n\nCombined <- mutate(Combined, Tool = if_else(is.na(instrument), \n                                            if_else(type_cd == \"chymh_s_plus\", \"rscr\", \"cymh\"), \n                                            instrument))\n# rscr = screener\n# chymh = ChYMH\n\n##------------------------------------------------------------------------\n##  2. Type of assessment (Initial, Reassessment, Monitoring, Discharge)   ASK NICK!!!!\n##------------------------------------------------------------------------\n\nCombined <- mutate(Combined, \n                   Type = if_else(is.na(type_cd),\n                                  if_else(survey_type == \"Readmission Initial\", \"Initial\", survey_type), \n                                  if_else(type_cd == \"chymh_monitoring_op\", \"Monitoring Assessment\", \n                                          if_else(oA8 == \"S-INTL\", \"Initial\", \n                                                  if_else(oA8 == \"S-SQNT\", \"Reassessment\", # formerly \"subsequent\"\n                                                          if_else(iA8 == \"2\", \"Reassessment\", iA8))))))\n# iA8 = reason for assessment\n\nCombined <- mutate(Combined, \n                   Type = if_else(is.na(Type), iA8, Type))\n\nCombined$Type <- gsub(\"2\", \"Reassessment\", Combined$Type) \n\n##----------------------\n##  3. Reference date  \n##---------------------\n\n# iA9 = assessment reference date in EMHware\n# reference_d = the same in Ideas web\n\nCombined$ref <- Combined$iA9\n\n#Combined$ref <- ifelse(is.na(Combined$iA9), Combined$reference_d, Combined$iA9)\n\n##---------------------------------\n##  4. Last assessment completed      ## MODIFY THIS\n##---------------------------------\n\n# if iT1 and iU2 are blank grab complete_d, if only iU2 is blank grab iT1, otherwise iU2 \n\nCombined <- mutate(Combined,\n                   compl = if_else(is.na(iU2), iT1, iU2))\n\n# iT1 = last day of involvement w/program or agency\n# iU2 = date assessment completed\n# complete_d = date assessment completed IdeasWeb\n\n##-------------------\n##  5. CREATE EMHID                                  ########### DOUBLE CHECK THIS!!! 2 dno't have valid EMHID\n##-------------------\n\nCIS_ID1$'Client ID#' <- as.character(CIS_ID1$'Client ID#')\nCIS_ID1$`BI CIS Client Identifier` <- as.character(CIS_ID1$`BI CIS Client Identifier`)\nTable4$ID <- as.character(Table4$ID)\n\n# If client_id has a valid value, return CIS_ID1$client ID#, otherwise match client_id with BI CIS Client \n\nCombined$EMHID <- ifelse(!is.na(Combined$client_id),\n                         CIS_ID1$`Client ID#`[match(Combined$client_id, CIS_ID1$`BI CIS Client Identifier`)],\n                         NA)\n\n# check if there is a match between Combined$crn and Table1$CRN, and if there is, return the corresponding value from Table1$'EMHID Actual'\nCombined$EMHID <- ifelse(is.na(Combined$EMHID) & !is.na(Combined$client_id),\n                         Table1$`EMHID Actual`[match(Combined$client_id, Table1$CRN)],\n                         Combined$EMHID)\n\n# check if there is a match between Combined$iA5a and Table4$'Chart Number', and if there is, return the corresponding value from Table4$ID\nCombined$EMHID <- ifelse(is.na(Combined$EMHID) & !is.na(Combined$iA5d),\n                         Table4$ID[match(Combined$iA5d, Table4$`Chart Number`)],\n                         Combined$EMHID)\n\n# check if there is a match between Combined$iA5a and Table4$ID, and if there is, return the corresponding value from Table4$ID\n\nCombined$EMHID <- ifelse(is.na(Combined$EMHID) & !is.na(Combined$iA5d),\n                         Table4$ID[match(Combined$iA5d, Table4$ID)],\n                         Combined$EMHID)\n\n##---------------------\n##  6. Calculate Age   \n##---------------------\n\n# grab all birth_years \n\nCombined$birth_year <- ifelse(!is.na(match(Combined$EMHID, CIS_ID1$\"Client ID#\")),\n                              CIS_ID1$'Year of Birth'[match(Combined$EMHID, CIS_ID1$\"Client ID#\")],\n                              Combined$iA3)\n\n# Convert Combined$ref to a date format\n\n#Combined$ref <- as.Date(Combined$ref)\n\n# Now calculate age in years at the given reference date (Combined$ref)\n\nCombined$Age <- as.integer((Combined$ref - as.Date(paste0(Combined$birth_year, \"-01-01\")))/365.25)\n\n##------------------------------------------\n##  7. Calculate FirstChYMH and last ChYMH  \n##------------------------------------------\n\nCombined <- Combined %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(if_else(Tool != \"rscr\", ref, as.Date(Inf)), na.rm = FALSE),\n         MaxRef = max(if_else(Tool != \"rscr\", ref, as.Date(-Inf)), na.rm = FALSE),\n         FirstChYMH = as.integer(ref == MinRef),\n         LastChYMH = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n##-------------------------------------------------------------------\n##  8. For FirstAx and last AX variable (get clarification on this)  \n##-------------------------------------------------------------------\n\nCombined <- Combined %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(ref, na.rm = FALSE),\n         MaxRef = max(ref, na.rm = FALSE),\n         FirstAx = as.integer(ref == MinRef),\n         LastAx = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n##-----------------------------\n##  9. First & last  Screener  \n##-----------------------------\n \nCombined <- Combined %>%\n  group_by(EMHID) %>%\n  mutate(MinRef = min(if_else(Tool == \"rscr\", ref, as.Date(Inf)), na.rm = FALSE),\n         MaxRef = max(if_else(Tool == \"rscr\", ref, as.Date(-Inf)), na.rm = FALSE),\n         FirstScreener = as.integer(ref == MinRef),\n         LastScreener = as.integer(ref == MaxRef)) %>%\n  ungroup() %>%\n  select(-MinRef, -MaxRef)\n\n#test <- Combined %>% select(EMHID, Tool, ref, FirstChYMH, LastChYMH, FirstAx, LastAx, FirstScreener, LastScreener)\n\n##------------------\n##  10. DSI_Scale \n##------------------\n\nCombined <- Combined %>% mutate(validdsi = case_when(\n  iE1ss %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(DSI__scale = case_when(validdsi == 1 ~ \n                                         (case_when(iE1ss %in% c(0,1,2,3) ~ + iE1ss, iE1ss == 4 ~ + 3)) +\n                                         (case_when(iE1vv %in% c(0,1,2,3) ~ + iE1vv, iE1vv == 4 ~ + 3)) +\n                                         (case_when(iE1ww %in% c(0,1,2,3) ~ + iE1ww, iE1ww == 4 ~ + 3)) +\n                                         (case_when(iE1xx %in% c(0,1,2,3) ~ + iE1xx, iE1xx == 4 ~ + 3)) +\n                                         (case_when(iE1yy %in% c(0,1,2,3) ~ + iE1yy, iE1yy == 4 ~ + 3))))\n\n##------------------\n##  11. ANX Scores  \n##------------------\n\nCombined <- Combined %>% mutate(validnxs = case_when(\n  iE1eee %in% c(0,1,2,3,4) & \n    iE1fff %in% c(0,1,2,3,4) & \n    iE1ggg %in% c(0,1,2,3,4) & \n    iE1iii %in% c(0,1,2,3,4) & \n    iE1kkk %in% c(0,1,2,3,4) & \n    iE1lll %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(ANX__scale = case_when(validnxs == 1 ~ \n                                          iE1eee + iE1fff + iE1ggg + iE1iii + iE1kkk + iE1lll + iE1eeee))\n\n##--------------\n##  12. CHAMHP  \n##--------------\n\nCombined <- Combined %>%\n  mutate(CHAMHPS__scale =\n           ifelse(\n             Age <= 7,\n             ifelse(\n               iX14a == 0,\n               ifelse(\n                 iX2a %in% c(0, 1, 2),\n                 ifelse(iE1rrr %in% c(0, 1), 0,\n                        ifelse(iE1rrr %in% c(2, 3, 4), 2, NA)),\n                 ifelse(iX2a %in% c(3, 4, 5), 2, NA)),\n               ifelse(\n                 iX14a == 1,\n                 ifelse(iX2a %in% c(0, 1), 1,\n                        ifelse(iX2a %in% c(2, 3, 4, 5), 3, NA)),\n                 ifelse(iX14a %in% c(2, 3, 4),\n                        ifelse(iE1lll == 0, 3,\n                               ifelse(\n                                 iE1lll %in% c(1, 2, 3, 4), 5, NA\n                               )), NA))),\n             ifelse(\n               Age >= 8 & Age <= 11,\n               ifelse(\n                 iX14a %in% c(0, 1),\n                 ifelse(\n                   iX14b %in% c(0, 1),\n                   ifelse(\n                     iE3n %in% c(0, 1, 2),\n                     ifelse(iEEE2 %in% c(0, 1), 0,\n                            ifelse(iEEE2 %in% c(2, 3, 4), 2, NA)),\n                     ifelse(iE3n %in% c(3, 4), 4, NA)\n                   ),\n                   ifelse(\n                     iX14b == 2,\n                     ifelse(iE1qq %in% c(0, 1, 2), 1,\n                            ifelse(iE1qq %in% c(3, 4), 3, NA)),\n                     ifelse(iX14b %in% c(3, 4), 4, NA)\n                   )),\n                 ifelse(\n                   iX14a == 2,\n                   ifelse(iE1vv %in% c(0, 1, 2), 3,\n                          ifelse(iE1vv %in% c(3, 4), 5, NA)),\n                   ifelse(iX14a %in% c(3, 4), 5, NA)\n                 )),\n               ifelse(Age >= 12,\n                      ifelse(\n                        iX14a %in% c(0, 1),\n                        ifelse(\n                          iX14b %in% c(0, 1),\n                          ifelse(\n                            iE1iii %in% c(0, 1, 2),\n                            ifelse(\n                              iE1xx %in% c(0, 1, 2),\n                              ifelse(\n                                iY1ao %in% c(0, 1, 2),\n                                ifelse(iX1d == 0, 1, 2),\n                                ifelse(iY1ao %in% c(3, 4, 5), 3, NA)\n                              ),\n                              ifelse(iE1xx %in% c(3, 4), 3, NA)\n                            ),\n                            ifelse(iE1iii %in% c(3, 4), 3, NA)\n                          ),\n                          ifelse(iX14b == 2,\n                                 3,\n                                 ifelse(iX14b %in% c(3, 4),\n                                        5,\n                                        NA))),\n                        ifelse(\n                          iX14a == 2,\n                          ifelse(\n                            iX1c %in% c(0, 1, 2, 3, 4),\n                            ifelse(\n                              iBB5f %in% c(0, 8),\n                              ifelse(iX2a %in% c(0, 1),\n                                     3,\n                                     ifelse(iX2a %in% c(2, 3, 4, 5),\n                                            4,\n                                            NA)),\n                              ifelse(iBB5f == 1, 4, NA)\n                            ),\n                            ifelse(iX1c == 5, 4, NA)\n                          ),\n                          ifelse(iX14a %in% c(3, 4),\n                                 ifelse(\n                                   iEEE2 %in% c(0, 1),\n                                   ifelse(iE1qqq == 0,\n                                          5,\n                                          ifelse(iE1qqq %in% c(1, 2, 3, 4),\n                                                 6,\n                                                 NA)),\n                                   ifelse(iEEE2 %in% c(2, 3, 4),\n                                          6,\n                                          NA)),\n                                 NA))),NA))))\n\n#test <- Combined %>% filter(Age >= 12 & iX14a >=3) %>% select(EMHID,Age, iX14a, iBB5f, iEEE2, iE1qqq, CHAMHPS__scale)\n\n##------------------\n##  13. DABS scale  \n##------------------\n\nCombined <- Combined %>% mutate(validdabs = case_when( \n  iE3l %in% c(0,1,2,3,4) &\n    iE3m %in% c(0,1,2,3,4) &\n    iE3n %in% c(0,1,2,3,4) &\n    iE3q %in% c(0,1,2,3,4) &\n    iE3r %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(DABS__scale = case_when(validdabs == 1 ~\n                                          iE3l + iE3m + iE3n + iE3q + iE3r))\n\n##--------------\n##  ABS__scale  \n##--------------\n\nCombined <- Combined %>% mutate(validabs = case_when(\n  iE3l %in% c(0,1,2,3,4) & \n    iE3m %in% c(0,1,2,3,4) & \n    iE3n %in% c(0,1,2,3,4) & \n    iE3p %in% c(0,1,2,3,4) ~ 1,\n  TRUE ~ 0)) \n\nCombined <- Combined %>% mutate(ABS__scale = case_when(validabs==1 ~ \n                                                         (case_when(iE3l %in% c(0,1,2,3) ~ iE3l, iE3l == 4 ~ + 3)) + \n                                                         (case_when(iE3m %in% c(0,1,2,3) ~ + iE3m, iE3m == 4 ~ + 3)) +\n                                                         (case_when(iE3n %in% c(0,1,2,3) ~ + iE3n, iE3n == 4 ~ + 3)) + \n                                                         (case_when(iE3p %in% c(0,1,2,3) ~ + iE3p, iE3p == 4 ~ + 3))))\n##-------------------\n##  14. SOCDIS scale: sCYMHANHEDO\n##-------------------\n\nCombined <- Combined %>% mutate(validedo = case_when(\n  iE1qqq %in% c(0,1,2,3,4) &                                            \n    iE1rrr %in% c(0,1,2,3,4) &                                                 \n    iE1sss %in% c(0,1,2,3,4) &                                              \n    iE1ttt %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate('SOCDIS__scale' = case_when(validedo == 1 ~\n                                              iE1qqq + iE1rrr + iE1sss + iE1ttt))\n\n##-----------------------\n##  15. DISTRACT_scale   \n##-----------------------\n\nCombined <- Combined %>% mutate(validact = case_when(\n  iE1oo %in% c(0,1,2,3,4) &\n    iE1pp %in% c(0,1,2,3,4)&\n    iE1qq %in% c(0,1,2,3,4)&\n    iE1rr %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(DISTRACT__scale = case_when(validact == 1 ~ (\n  iE1oo +iE1pp +iE1qq + iE1rr)))\n\n##--------------------------\n##  16. KinarkRiskHTO_comb  \n##--------------------------\n\nCombined$KinarkRiskHTO_comb <- Combined$KinarkRiskHTO\n\n##--------------------------\n##  17. KinarkRiskHTS_comb  \n##--------------------------\n\nCombined$KinarkRiskHTS_comb <- Combined$KinarkRiskHTS\n\n##--------------------------\n##  18. KinarkRiskHTP_comb  \n##--------------------------\n\nCombined$KinarkRiskHTP_comb<- Combined$KinarkRiskHTP\n\n##-------------------------\n##  19. KinarkRiskSM_comb  \n##-------------------------\n\nCombined$KinarkRiskSM_comb <- Combined$KinarkRiskSM\n\n##--------------------------\n##  20. KinarkRiskVCP_comb  \n##--------------------------\nCombined$KinarkRiskVCP_comb<- Combined$KinarkRiskVCP\n\n##--------------------------\n##  21. KinarkRiskFB_comb  \n##--------------------------\n\nCombined$KinarkRiskFB_comb <- Combined$KinarkRiskFB\n\n##-------------------------\n##  22. KinarkRiskOC_comb  \n##-------------------------\nCombined$KinarkRiskOC_comb <- Combined$KinarkRiskOC\n\n##-------------\n##  23. Acute  \n##-------------\n\nCombined$Acute <- Combined$CaseComplexityFA\n\n##---------------\n##  24. Complex  \n##---------------\n\nCombined$Complex <- Combined$CaseComplexityS\n\n##-------------------------\n##  25. KinarkRiskHTO_cat  \n##-------------------------\n\nCombined <- Combined %>%\n  mutate(KinarkRiskHTO_cat = case_when(\n    KinarkRiskHTO == 0 ~ \"No Risk\",\n    KinarkRiskHTO == 1 ~ \"Potential Risk\",\n    KinarkRiskHTO == 2 ~ \"Risk Identified\",\n    KinarkRiskHTO == 3 ~ \"Serious Risk\"\n  ))\n\n##-------------------------\n##  26. KinarkRiskHTS_cat  \n##-------------------------\n\nCombined <- Combined %>%\n  mutate(KinarkRiskHTS_cat = case_when(\n    KinarkRiskHTS  == 0 ~ \"No Risk\",\n    KinarkRiskHTS  == 1 ~ \"Potential Risk\",\n    KinarkRiskHTS  == 2 ~ \"Risk Identified\",\n    KinarkRiskHTS  == 3 ~ \"Serious Risk\"\n  ))\n\n##------------------------\n##  27. KinarkRiskSM_cat  \n##------------------------\n\nCombined <- Combined %>%\n  mutate(KinarkRiskSM_cat = case_when(\n    is.na(KinarkRiskSM )  ~ NA,\n    KinarkRiskSM  == 0 ~ \"No Risk\",\n    KinarkRiskSM  == 1 ~ \"Potential Risk\",\n    KinarkRiskSM  == 2 ~ \"Risk Identified\",\n    KinarkRiskSM  == 3 ~ \"Serious Risk\"\n  ))\n\n##------------------------\n##  28. KinarkRiskSM_cat  \n##------------------------\n\nCombined <- Combined %>%\n  mutate(KinarkRiskHTP_cat = case_when(\n    is.na(KinarkRiskHTP )  ~ NA,\n    KinarkRiskHTP  == 0 ~ \"No Risk\",\n    KinarkRiskHTP  == 1 ~ \"Potential Risk\",\n    KinarkRiskHTP  == 2 ~ \"Risk Identified\",\n    KinarkRiskHTP  == 3 ~ \"Serious Risk\"\n  ))\n\n##-------------------------\n##  29. KinarkRiskVCP_cat  \n##-------------------------\n\nCombined <- Combined %>%\n  mutate(KinarkRiskVCP_cat = case_when(\n    is.na(KinarkRiskVCP )  ~ NA,\n    KinarkRiskVCP  == 0 ~ \"No Risk\",\n    KinarkRiskVCP  == 1 ~ \"Potential Risk\",\n    KinarkRiskVCP  == 2 ~ \"Risk Identified\",\n    KinarkRiskVCP  == 3 ~ \"Serious Risk\"\n  ))\n\n##------------------------\n##  30. KinarkRiskFB_cat  \n##------------------------\n\nCombined <- Combined %>%\n  mutate(KinarkRiskFB_cat = case_when(\n    is.na(KinarkRiskFB )  ~ NA,\n    KinarkRiskFB  == 0 ~ \"No Risk\",\n    KinarkRiskFB  == 1 ~ \"Potential Risk\",\n    KinarkRiskFB  == 2 ~ \"Risk Identified\",\n    KinarkRiskFB  == 3 ~ \"Serious Risk\"\n  ))\n\n##------------------------\n##  31. KinarkRiskOC_cat  \n##------------------------\n\nCombined <- Combined %>%\n  mutate(KinarkRiskOC_cat = case_when(\n    is.na(KinarkRiskOC )  ~ NA,\n    KinarkRiskOC  == 0 ~ \"No Risk\",\n    KinarkRiskOC  == 1 ~ \"Potential Risk\",\n    KinarkRiskOC  == 2 ~ \"Risk Identified\",\n    KinarkRiskOC  == 3 ~ \"Serious Risk\"\n  ))\n\n##-----------------\n##  32. Acute_cat  \n##-----------------\n\nCombined <- Combined %>%\n  mutate(Acute_cat = case_when(\n    is.na(Acute)  ~ NA,\n    Acute == 1 ~ \"Yes\",\n    Acute == 0 ~ \"No\"\n  ))\n\n##-------------------\n##  33. Complex_cat  \n##-------------------\n\nCombined <- Combined %>%\n  mutate(Complex_cat = case_when(\n    is.na(Complex)  ~ NA,\n    Complex == 1 ~ \"Yes\",\n    Complex == 0 ~ \"No\"\n  ))\n\n##-----------------------------------------------\n##  34.  ED_Screen, ID_Screen & Comorbid screen  \n##-----------------------------------------------\n\nCombined$ED_Screen <- Combined$iW29\n\nCombined$ID_Screen <- Combined$iA47\n\nCombined$ComorbidMedical_Screen <- Combined$iA48  \n\n##------------------\n##  43. Positive Symptoms Scale  \n##------------------\n\nCombined <- Combined %>% mutate(validpss = case_when(iE1mmm %in% c(0,1,2,3,4) & \n                                                       iE1ooo %in% c(0,1,2,3,4) & \n                                                       iE1nnn %in% c(0,1,2,3,4) & \n                                                       iE1ppp %in% c(0,1,2,3,4) ~ 1,\n                                                     TRUE ~ 0))\n\nCombined <- Combined %>% mutate(PSS__scale = case_when(validpss == 1 ~ \n                                                     (case_when(iE1mmm %in% c(0,1,2,3) ~ iE1mmm, iE1mmm == 4 ~ + 3)) + \n                                                     (case_when(iE1ooo %in% c(0,1,2,3) ~ + iE1ooo, iE1ooo == 4 ~ + 3)) +\n                                                     (case_when(iE1nnn %in% c(0,1,2,3) ~ + iE1nnn, iE1nnn == 4 ~ + 3)) +\n                                                    (case_when(iE1ppp %in% c(0,1,2,3) ~ + iE1ppp, iE1ppp == 4 ~ + 3)))) \nCombined$sCYPSS <- Combined$PSS__scale\n\n##---------------\n##  36.  Trauma  \n##---------------\n\nCombined <- Combined %>%\n  mutate(Trauma = case_when(\n    is.na(iY1b)  ~ NA,\n    iY1b == 1 ~ \"Caused Intense Fear\",\n    iY1b == 0 ~ \"No or Not Applicable\",\n    iY1b == 8 ~ \"Did Not Respond\"\n  ))\n\n\n##--------------------\n##  37.  RISSK_scale  \n##--------------------\n\nCombined <- Combined %>% mutate(validssk = case_when(\n  iE1ss %in% c(0:4) &\n    iE1tt %in% c(0:4) &\n    iE1vv %in% c(0:4) &\n    iE1ww %in% c(0:4) &\n    iE1xx %in% c(0:4) &\n    iE1yy %in% c(0:4) &\n    iE1aaa %in% c(0:4) &\n    iE1rrr %in% c(0:4) &\n    iE1ttt %in% c(0:4) &\n    iE3w %in% c(0:4) &\n    iP19h %in% c(0,1,8) &\n    iX1a %in% c(0:5) &\n    iX1b %in% c(0,1,8) & \n    iX1c %in% c(0:5) &\n    iX1d %in% c(0,1) ~ 1, TRUE ~ 0),\n  xdsi = iE1ss + iE1tt + iE1vv + iE1ww + iE1xx +iE1yy + iE1aaa + iE1rrr + iE1ttt)\n\nCombined <- Combined %>% mutate(RISSK__scale = case_when(validssk == 1 ~ \n                                           (case_when(iX1c == 0 ~\n                                                        case_when(iX1d == 0 ~ \n                                                                    case_when(iX1a == 0 ~ \n                                                                                case_when(iE3w == 0 ~ \n                                                                                            case_when (xdsi >= 0 & xdsi <= 17 ~ 0,TRUE ~ 1),TRUE ~ 1),TRUE ~ 3)),\n                                                      iX1c %in% c(1,2,3) ~ \n                                                        case_when(iX1a %in% c(0,1,2) ~ \n                                                                    case_when(iX1b %in% c(0,8) ~ \n                                                                                case_when(xdsi %in% c(0,1) ~ 1, \n                                                                                          xdsi >= 2 & xdsi <= 12 ~ 2, \n                                                                                          xdsi >= 13 & xdsi <= 36 ~ 3),TRUE ~ \n                                                                                case_when(iX1d == 0 ~ 2),TRUE ~ 4)),\n                                                      iX1c == 4 ~ \n                                                        case_when(iX1d == 0 ~ 3,TRUE ~ \n                                                                    case_when(iX1b == 0 ~ \n                                                                                case_when(iP19h == 0 ~ 4, TRUE ~ 5),TRUE ~ 5)),\n                                                      iX1c == 5 ~ \n                                                        case_when(iX1b %in% c(0,8) ~ \n                                                                    case_when (iX1d == 0 ~ 3,TRUE ~ 5),iX1a %in% c(0,1,2,3) ~ 5,TRUE ~ 6)))))\n\n##-----------------\n##  40. RIO_scale  \n##-----------------\n\nCombined <- Combined %>% mutate(validrio = case_when(\n  iE1oo %in% c(0,1,2,3,4) &\n    iE3l %in% c(0,1,2,3,4) &\n    iE3m %in% c(0,1,2,3,4) & \n    iE3n %in% c(0,1,2,3,4) & \n    iE3q %in% c(0,1,2,3,4) &\n    iP19h %in% c(0,1,8) &\n    iX2a %in% c(0,1,2,3,4,5) &\n    iX2b %in% c(0,1,2,3,4,5) &\n    iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(xrio = case_when(validrio == 1 ~ iX2a + iX2b + iX2c))\n\nCombined <- Combined %>% mutate(xbeh = case_when(validrio ==1 ~ \n                                       (case_when(iE3l %in% c(2,3,4) ~ iE3l-1) +\n                                          case_when(iE3n %in% c(2,3,4) ~ iE3n-1))))\n\nCombined <- Combined %>% mutate(RIO__scale = case_when(validrio == 1 ~ \n                                         (case_when(iE3m == 0 ~ \n                                                      (case_when(xrio == 0 ~ \n                                                                   case_when(iE3q & iE3n %in% c(1,2,3,4) ~ 1,TRUE ~ 0))) +\n                                                      (case_when(xrio %in% c(1,2) ~ 1, TRUE ~ 0)) +\n                                                      (case_when(xrio %in% c(3,4) ~ 3, TRUE ~ 0)) +\n                                                      (case_when(xrio >= 5 ~ 3, TRUE ~ 0)), TRUE ~ 0) +\n                                            case_when(iE3m == 1 ~ \n                                                        (case_when(xrio %in% c(0,1) ~ \n                                                                     ((case_when(iE3q == 0 ~ 1, TRUE ~ 0)) +\n                                                                        case_when(iE3q >= 1 ~ \n                                                                                    (case_when(iE1oo == 0 ~ 1, TRUE ~ 0) +\n                                                                                       (case_when(iE1oo %in% c(1,2,3) ~ 2, TRUE ~ 0)) +\n                                                                                       (case_when(iE1oo == 4 ~ 3, TRUE ~ 0))))), TRUE ~ 0) +\n                                                           case_when(xrio %in% c(2,3,4,5) ~ 3, TRUE ~ 0) +\n                                                           case_when(xrio >= 6 ~ case_when(iE3q & iE3n %in%\n                                                                                            c(1,2,3,4) ~ 5,TRUE ~ 4), TRUE ~ 0)),\n                                                      TRUE ~ 0) +\n                                            case_when(iE3m == 2 ~\n                                                        (case_when(xrio >= 0 & xrio <= 6 ~ \n                                                                     (case_when(xbeh %in% c(0,1) ~ 3, TRUE ~ 0) +\n                                                                        case_when(xbeh >= 2 ~ 4,TRUE ~ 5)), TRUE ~ 0)), TRUE ~ 0) +\n                                            case_when(iE3m == 3 ~ \n                                                        (case_when(xrio %in% c(0,1,2,3,4) ~ 3, TRUE ~ 0) +\n                                                           case_when(xrio >= 5 ~ case_when(iP19h %in% c(0,8) ~ 4,TRUE ~ 5))), \n                                                      TRUE ~ 0) +\n                                            case_when(iE3m == 4 ~ \n                                                        (case_when(xrio %in% c(0,1,2) ~ 4, TRUE ~ 0) +\n                                                           case_when(xrio >= 3 & xrio <= 8 ~ 5, TRUE ~ 0)+ \n                                                           case_when(xrio >= 9 ~ 6, TRUE ~ 0)), TRUE ~ 0))))\n##---------------------------------------\n##  41. SOS__scale SEVERITY OF SELF HARM  \n##---------------------------------------\n\nCombined <- Combined %>% mutate(validsos = case_when(\n  iC1d %in% c(0,1,2,3,4,5) & #  decision making\n    iC2a %in% c(0,1) & #  short term memory (brooklyn had iC2a) <-- look this up\n    iD1 %in% c(0,1,2,3,4) &  # understoof\n    iE1mmm %in% c(0,1,2,3,4) &  #hallucinations\n    iE1nnn %in% c(0,1,2,3,4) & # command hallucinations\n    iE1ooo %in% c(0,1,2,3,4) & # delusions\n    iE1ppp %in% c(0,1,2,3,4) & # Abnormal thought processes\n    iE1ss %in% c(0,1,2,3,4) & # Sad facial expressions\n    iE1vv %in% c(0,1,2,3,4) & # negative statements\n    iE1ww %in% c(0,1,2,3,4) & # self-deprecating\n    iE1xx %in% c(0,1,2,3,4) & # guilt or shame\n    iE1yy %in% c(0,1,2,3,4) & # hopelessness\n    iG2j %in% c(0,1,2,3,4,5,6,8) & #Eating\n    iX1b %in% c(0,1,8) & # suicidal intent\n    iX1c %in% c(0,1,2,3,4,5) & # considered self-injury\n    iX1d %in% c(0,1) & #others concerned about self-injury\n    iX1e %in% c(0,1) ~ 1, TRUE ~ 0)) # suicide plan\n\n\nCombined <- Combined %>% mutate(xcsp1 = case_when(\n  iC1d %in% c(0,1,2,3,4,5) &\n    iD1 %in% c(0,1,2,3,4) &\n    iC2a %in% c(0,1) ~ 1, TRUE ~ 0))\n\n\nCombined <- Combined %>% mutate(xcps2 = case_when(\n  iC1d %in% c(0,1,2,3,4,5) &\n    iD1 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\n\n# Impairment count\n\nCombined <- Combined %>% mutate(xcps1 = case_when(validsos == 1 ~\n                                                    (\n                                                      case_when(iC1d %in% c(1, 2, 3) ~ 1, TRUE ~ 0) +\n                                                        case_when(iD1 %in% c(1, 2, 3, 4) ~ 1, TRUE ~ 0) +\n                                                        case_when(iC2a == 1 ~ +1, TRUE ~ 0)\n                                                    )))\n\n# Severe Imp count\n\nCombined <- Combined %>% mutate(xcps2 = case_when(validsos == 1 ~\n                                                    (\n                                                      case_when(iC1d == 3 ~ 1, TRUE ~ 0) +\n                                                        case_when(iD1 %in% c(3, 4) ~ +1, TRUE ~ 0)\n                                                    )))\n# cog performance count\n\nCombined <- Combined %>% mutate(xcps = case_when(validsos == 1 ~\n                                                   (\n                                                     case_when(iC1d ==  5 ~ 6, TRUE ~ 0) +\n                                                       case_when(iC1d == 4 ~ (\n                                                         case_when(iC1d %in% c(6, 8) ~ 6, TRUE ~ 0) +\n                                                           case_when(iG2j %in% c(0, 1, 2, 3, 4, 5) ~ 5, TRUE ~ 0)\n                                                       ), TRUE ~ 0) +\n                                                       case_when(iC1d >= 0 &\n                                                                   iC1d < 4 ~ (\n                                                                     case_when(xcps1 %in% c(2, 3) ~\n                                                                                 (\n                                                                                   case_when(xcps2 == 2 ~ 4, TRUE ~ 0) +\n                                                                                     case_when(xcps2 == 1 ~ 3, TRUE ~ 0) +\n                                                                                     case_when(xcps2 == 0 ~ 2, TRUE ~ 0)\n                                                                                 ), TRUE ~ 0) +\n                                                                       case_when(xcps1 == 1 ~ 1, TRUE ~ 0) +\n                                                                       case_when(xcps1 == 0 ~ 0, TRUE ~ 0)\n                                                                   )))))\n# Depressive Severity count\n\nCombined <- Combined %>% mutate(xdsi = case_when(\n  validsos == 1 ~\n    (\n      case_when(iE1vv == 0 ~ 0, iE1vv %in% c(1, 2) ~ 1, iE1vv %in% c(3, 4) ~ 2) +\n        case_when(iE1ss == 0 ~ 0, iE1ss %in% c(1, 2) ~ 1, iE1ss %in% c(3, 4) ~ 2) +\n        case_when(iE1ww == 0 ~ 0, iE1ww %in% c(1, 2) ~ 1, iE1ww %in% c(3, 4) ~ 2) +\n        case_when(iE1xx == 0 ~ 0, iE1xx %in% c(1, 2) ~ 1, iE1xx %in% c(3, 4) ~ 2) +\n        case_when(iE1yy == 0 ~ 0, iE1yy %in% c(1, 2) ~ 1, iE1yy %in% c(3, 4) ~ 2)\n    )\n))\n\n# Positive Sumptoms count\n\n\nCombined <- Combined %>% mutate(xpss = case_when(validsos == 1 ~\n                                                   (case_when(iE1mmm == 0 ~ +0, iE1mmm %in% c(1, 2) ~ +1, iE1mmm %in% c(3, 4) ~ +2) +\n                                                       case_when(iE1nnn == 0 ~ +0, iE1nnn %in% c(1, 2) ~ +1, iE1nnn %in% c(3, 4) ~ +2) +\n                                                       case_when(iE1ooo == 0 ~ +0, iE1ooo %in% c(1, 2) ~ +1, iE1ooo %in% c(3, 4) ~ +2) +\n                                                       case_when(iE1ppp == 0 ~ +0, iE1ppp %in% c(1, 2) ~ +1, iE1ppp %in% c(3, 4) ~ +2)\n                                                   )))\n\n## CY Severity of Self Harm Scale\n\nCombined <-\n  Combined %>% mutate(SOS__scale = case_when(validsos == 1 ~\n                                               (case_when(iX1c == 5 ~\n                                                             (case_when(iX1b == 1 ~\n                                                                           (case_when(xdsi >= 6 ~ 6, TRUE ~ 0) +\n                                                                               case_when(xdsi < 6 ~ 5, TRUE ~ 0)), TRUE ~ 0) +\n                                                                 case_when(iX1b %in% c(0, 8) ~(\n                                                                       case_when(xdsi >= 6 & iX1e == 1 ~ 5, TRUE ~ 0) +\n                                                                         case_when(xdsi >= 6 &\n                                                                                     iX1e == 0 ~ 3, TRUE ~ 0) +\n                                                                         case_when(xdsi < 6 &\n                                                                                     iX1d == 1 ~ 4, TRUE ~ 0) +\n                                                                         case_when(xdsi < 6 &\n                                                                                     iX1d == 0 ~ 2, TRUE ~ 0)),\n                                                                   TRUE ~ 0)), TRUE ~ 0) +\n                                                   case_when(iX1c %in% c(3, 4) ~ (\n                                                                 case_when(iX1b == 1 ~ 4, TRUE ~ 0) +\n                                                                   case_when(iX1b %in% c(0, 8) ~ 3, TRUE ~ 0)\n                                                               ), TRUE ~ 0) +\n                                                   case_when(iX1c %in% c(0, 1, 2) ~(\n                                                                 case_when(iX1b == 1 ~\n                                                                             (case_when(xdsi >= 4 ~ 4, TRUE ~ 0) +\n                                                                                 case_when(xdsi < 4 ~ 1, TRUE ~ 0)), TRUE ~ 0) +\n                                                                   case_when(\n                                                                     iX1b %in% c(0, 8) ~(\n                                                                         case_when(xpss >= 3 & xcps >= 3 ~ 3, TRUE ~ 0) +\n                                                                           case_when(xpss >= 3 & xcps < 3 ~ 2, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 & iX1d == 1 ~ 2, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 &\n                                                                                       iX1d == 0 &\n                                                                                       xcps >= 1 ~ 1, TRUE ~ 0) +\n                                                                           case_when(xpss < 3 &\n                                                                                       iX1d == 0 &\n                                                                                       xcps == 0 ~ 0, TRUE ~ 0)),TRUE ~ 0)), TRUE ~ 0))))\n\nCombined$sCYSOS <- Combined$SOS__scale\n\n##-----------------\n##  42. RHO_scale  \n##-----------------\n\n# old rho calculation\n#Combined$RHO__scale <- ifelse(is.na(Combined$sCYRHO), ifelse(is.na(Combined$rhoscale_Scale), NA, Combined$rhoscale_Scale), Combined$sCYRHO)\n\nCombined <- Combined %>% mutate(validrho = case_when(\n  iE1ooo %in% c(0,1,2,3,4) & \n    iE1yyy %in% c(0,1,2,3,4) & \n    iE6 %in% c(0,1,2,3,4,5) & \n    iE7 %in% c(0,1,2) & \n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2b %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) &\n    ABS__scale %in% c(0:12) &\n    PSS__scale %in% c(0:12) & \n    iX4 %in% c(0,1,2) ~ 1,\n  TRUE ~ 0))\n\n\nCombined <- Combined %>% mutate(xrho1 = case_when(\n  iX2a %in% c(4,5) | \n    iX2b %in% c(4,5) | \n    iX2c %in% c(4,5) | \n    iX4 == 2 ~ 2,\n  iX2a %in% c(1,2,3) |\n    iX2b %in% c(1,2,3) | \n    iX2c %in% c(1,2,3) | \n    iX4 == 1 ~ 1,\n  TRUE ~ 0),\n  xrho2 = iX2a + iX2b + iX2c)\n\nCombined <- Combined %>% mutate(RHO__scale = case_when(validrho == 1 ~ case_when(\n  xrho1 == 2 ~ case_when(\n    xrho2 >= 10 ~ case_when(\n      iE1ooo %in% c(1,2,3,4) ~ 6, iE1ooo == 0 ~ 5),\n    xrho2 <10 ~ case_when(\n      iE7 == 2 ~ 5, iE7 == 1 & iE1yyy %in% c(1,2,3,4) ~ 4,\n      iE7 == 1 & iE1yyy == 0 ~ 2, iE7 == 0 ~ 3)),\n  xrho1 == 1 ~ case_when(PSS__scale >= 2 ~ 4, PSS__scale < 2 ~ 2),\n  xrho1 == 0 ~ case_when(ABS__scale >= 3 ~ 3, ABS__scale < 3 ~ case_when(\n    PSS__scale >= 4 ~ 1, PSS__scale < 4 & iE6 %in% c(2,3,4,5) ~ 1,\n    PSS__scale < 4 & iE6 %in% c(0,1) ~ 0)))))\n\nCombined$sCYRHO <- Combined$RHO__scale\n\n##------------------\n##  43. PAIN_scale  \n##------------------\n\n#Combined$PAIN__scale <- ifelse(is.na(Combined$sPAIN), ifelse(is.na(Combined$pain_Scale), NA, Combined$pain_Scale), Combined$sPAIN)\n\n\n##--------------------\n##  44. IADLC__scale  \n##--------------------\n\nCombined <- Combined %>% mutate(validiadlc = case_when(\n  iG1ab %in% c(0,1,2,3,4,5,6) & \n    iG1bb %in% c(0,1,2,3,4,5,6) & \n    iG1cb %in% c(0,1,2,3,4,5,6) & \n    iG1db %in% c(0,1,2,3,4,5,6) & \n    iG1eb %in% c(0,1,2,3,4,5,6) & \n    iG1fb %in% c(0,1,2,3,4,5,6) & \n    iG1gb %in% c(0,1,2,3,4,5,6) & \n    iG1hb %in% c(0,1,2,3,4,5,6) & \n    iG1nb %in% c(0,1,2,3,4,5,6) & \n    iG1ob %in% c(0,1,2,3,4,5,6) & \n    iZZ1ab %in% c(0,1,2,3,4,5,6) &\n    Age >= 0 & Age <= 130 ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(IADLC__scale = case_when(validiadlc == 1 ~ case_when(\n  Age >= 12 & Age < 19 ~ \n    iG1ab + iG1bb + iG1cb + iG1db + iG1eb + iG1fb + iG1gb + iG1hb + iG1nb + iG1ob\n  + iZZ1ab)))\n\n##-----------------------------------------------\n##  sCYPS PARENTING STRENGTHS (for RICHY calc) -- \n##-----------------------------------------------\n\nCombined <- Combined %>% mutate(validps = case_when(\n  iP15a %in% c(0,1,2) &\n    iP15b %in% c(0,1,2) &\n    iP15c %in% c(0,1,2) &\n    iP15d %in% c(0,1,2) &\n    iP15e %in% c(0,1,2) &\n    iP15f %in% c(0,1,2) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(PARENTING__scale = case_when(validps == 1 ~\n                                                               (case_when(iP15a == 0 ~ + 2, iP15a == 1 ~ + 1, iP15a == 2 ~ + 0)) +\n                                                               (case_when(iP15b == 0 ~ + 2, iP15b == 1 ~ + 1, iP15b == 2 ~ + 0)) +\n                                                               (case_when(iP15c == 0 ~ + 2, iP15c == 1 ~ + 1, iP15c == 2 ~ + 0)) +\n                                                               (case_when(iP15d == 0 ~ + 2, iP15d == 1 ~ + 1, iP15d == 2 ~ + 0)) +\n                                                               (case_when(iP15e == 0 ~ + 2, iP15e == 1 ~ + 1, iP15e == 2 ~ + 0)) +\n                                                               (case_when(iP15f == 0 ~ + 2, iP15f == 1 ~ + 1, iP15f == 2 ~ + 0))))\n##--------------------\n##  CAREDIS__scale  Caregiver Distress Algorithm --\n##--------------------\n\nCombined <- Combined %>% mutate(ProactiveItem = \n                      (case_when(iE15a== 0 ~ + 0, iE15a %in% c(1,2,3,4,5) ~ + 1)) +\n                      (case_when(iE15d== 0 ~ + 0, iE15d %in% c(1,2,3,4,5) ~ + 1)) + \n                      (case_when(iE15e== 0 ~ + 0, iE15e %in% c(1,2,3,4,5) ~ + 1)) + \n                      (case_when(iX16c== 0 ~ + 0, iX16c %in% c(1,2,3,4,5) ~ + 1)) +        \n                      (case_when(iX2a== 0 ~ + 0, iX2a %in% c(1,2,3,4,5) ~ + 1)) +           \n                      (case_when(iX2b== 0 ~ + 0, iX2b %in% c(1,2,3,4,5) ~ + 1)) +           \n                      (case_when(iX2c== 0 ~ + 0, iX2c %in% c(1,2,3,4,5) ~ + 1)))\n\nCombined <- Combined %>% mutate(devMHsubst_Issues = \n                      (case_when(iY7a & iY1ap == 0 ~ 0, TRUE ~ 0) +\n                         case_when(iY7a == 1 ~ 1, TRUE ~ 0) +\n                         case_when(iY1ap %in% c(1,2,3,4,5) ~ 1)))\n\nCombined <- Combined %>% mutate(familyfunction = \n                      (case_when(iF8a == 1 ~ 1, TRUE ~ 0) +\n                         case_when(iF8a == 0 ~  0, TRUE ~ 0) + \n                         case_when(iP19d | iP19e == 1 ~  1, TRUE ~ 0) + \n                         case_when(iP19d & iP19e == 0 ~  0, TRUE ~ 0) + \n                         case_when(iY7a & iY1ap == 0 ~  0, TRUE ~ 0) + \n                         case_when(iY7a == 1 | iY1ap %in% c(1,2,3,4,5) ~  1, TRUE ~ 0) + \n                         case_when(iY7b == 1 ~  1, TRUE ~ 0) + \n                         case_when(iY7b == 0 ~  0, TRUE ~ 0)))\n\nCombined <- Combined %>% mutate(validiccared = case_when(\n  iJ5a %in% c(0,1,2,3) & \n    iE1zzz %in% c(0,1,2,3,4) & \n    iE1ccc %in% c(0,1,2,3,4) & \n    iY9 %in% c(0,1) & \n    iX1a %in% c(0,1,2,3,4,5) & \n    iE1hhh %in% c(0,1,2,3,4) & \n    iP19a %in% c(0,1,8) & \n    iE1tt %in% c(0,1,2,3,4) & \n    iY1au %in% c(0,1,2,3,4,5) & \n    iE1ss %in% c(0,1,2,3,4) & \n    iE6 %in% c(0,1,2,3,4,5) & \n    iC9b %in% c(0,1,8) & \n    iE18a %in% c(0,1) &\n    PARENTING__scale %in% c(0:12) & \n    PSS__scale %in% c(0:12) & \n    DABS__scale %in% c(0:20) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(CAREDIS__scale = case_when(validiccared == 1 ~ \n                                  (case_when(ProactiveItem == 0 ~ case_when(\n                                            PARENTING__scale == 12 ~ case_when(\n                                              ABS__scale == 0 ~ case_when(\n                                                devMHsubst_Issues == 0 ~ case_when(\n                                                  iE1ccc == 0 ~ 1, iE1ccc %in% c(1,2,3,4) ~ 2),\n                                                devMHsubst_Issues == 1 ~ 2),\n                                              ABS__scale >= 1 ~ case_when(\n                                                iC9a == 0 ~ case_when(\n                                                  iY9 == 0 ~ 1, iY9 == 1 ~ 2),\n                                                iC9a %in% c(1,8) ~ case_when(\n                                                  iX1a == 0 ~ 2, iX1a %in% c(1,2,3,4,5) ~ 3))),\n                                            PARENTING__scale %in% c(10,11) ~ case_when(\n                                              devMHsubst_Issues == 0 ~ 1, \n                                              devMHsubst_Issues == 1 ~ 3),\n                                            PARENTING__scale %in% c(0,1,2,3,4,5,6,7,8,9) ~ case_when(\n                                              iJ5a == 0 ~ case_when(\n                                                iE1zzz == 0 ~ 2, iE1zzz %in% c(1,2,3,4) ~ 3),\n                                              iJ5a %in% c(1,2,3) ~ 4)), TRUE ~ 0) +\n                                             \n                                             case_when(ProactiveItem %in% c(1,2) ~ case_when(\n                                               familyfunction == 0 ~ case_when(\n                                                 sCYDABS %in% c(0,1,2,3,4,5,6,7) ~ case_when(\n                                                   iY1au == 0 ~ 1, iY1au %in% c(1,2,3,4,5) ~ 3),\n                                                 sCYDABS >= 8 ~ case_when(\n                                                   iE1ss == 0 ~ 1, iE1ss %in% c(1,2,3,4) ~ 3)),\n                                               familyfunction == 1 ~ case_when(\n                                                 iE1hhh == 0 ~ case_when(\n                                                   iY9 == 0 ~ 2, iY9 == 1 ~ 4),\n                                                 iE1hhh %in% c(1,2,3,4) ~ 4),\n                                               familyfunction >= 2 ~ case_when(\n                                                 iP19a == 0 ~ case_when(\n                                                   iE1ttt == 0 ~ 2, iE1ttt %in% c(1,2,3,4) ~ 3),\n                                                 iP19a == 1 ~ 4)), TRUE ~ 0) + \n                                             \n                                             case_when(ProactiveItem %in% c(3,4,5,6,7) ~ case_when(\n                                               PARENTING__scale %in% c(7,8,9,10,11,12) ~ case_when(\n                                                 iE6 %in% c(1,2,3,4,5) ~ 5, \n                                                 iE6 == 0 ~ case_when(\n                                                   devMHsubst_Issues == 0 ~ case_when(\n                                                     iX1a %in% c(0,1) ~ case_when(\n                                                       sCYDABS %in% c(0,1,2,3,4,5,6,7,8,9,10) ~ 2, \n                                                       sCYDABS >= 11 ~ 4),\n                                                     iX1a %in% c(2,3,4,5) ~ 4),\n                                                   devMHsubst_Issues == 1 ~ case_when(\n                                                     iE18a == 1 ~ 3, \n                                                     iE18a == 0 ~ 5))),\n                                               PARENTING__scale %in% c(0,1,2,3,4,5,6) ~ case_when(\n                                                 iC9b == 0 ~ 4, iC9b %in% c(1,8) ~ 5)), TRUE ~ 0))))\n\n##-----------------\n##  COMM__scale  --\n##-----------------\n\nCombined <- Combined %>% mutate(validcomm = case_when(\n  iD1 %in% c(0,1,2,3,4) & \n    iD2 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(COMM__scale = case_when(validcomm == 1 ~ iD1 + iD2))\n\n##--------------------------------------------\n##   CAS / Psychiatrist / Family Engagment  --\n##--------------------------------------------\n\nCombined <- Combined %>%\n  mutate(CAS = case_when(\n    is.na(iN16w)  ~ NA,\n    iN16w > 0 ~ \"Involved\"\n  ))\n\nCombined <- Combined %>%\n  mutate(Psychiatrist = case_when(\n    is.na(iN16o)  ~ NA,\n    iN16w > 0 ~ \"Involved\"\n  ))\n\nCombined <- Combined %>%\n  mutate(FamilyEngaged = case_when(\n    is.na(iZ10)  ~ NA,\n    iN16w > 0 ~ \"Involved\"\n  ))\n\n##------------------------\n##   Physical Activity  --\n##------------------------\n\nCombined <- Combined %>% \n  mutate(cCYMHPA = case_when(\n  iG6a %in% c(0,1) ~ 1, TRUE ~ 0))\n\n\nCombined$'Physical Activity' <-\n  ifelse(is.na(Combined$cCYMHPA),\n    NA,\n      ifelse(\n        Combined$cCYMHPA == 1,\n        \"Triggered\",\n        ifelse(Combined$cCYMHPA == 0,\n            \"Not Triggered\",\n            NA\n          )))\n\n##------------------------\n##  Attachment          --\n##------------------------\n\n Combined <-  Combined %>% mutate(validattach = case_when(\n  iB33 %in% c(0,1,2) & \n    iB34a %in% c(0,1,2,3) & \n    iB34b %in% c(0,1,2,3) & \n    iB35 %in% c(0,1) &\n    iP16a %in% c(0,1,8) & \n    iP16b %in% c(0,1,8) & \n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) & \n    iY1ao %in% c(0,1,2,3,4,5) & \n    iY1ar %in% c(0,1,2,3,4,5) & \n    iY1at %in% c(0,1,2,3,4,5) & \n    iY1au %in% c(0,1,2,3,4,5) & \n    iY7a %in% c(0,1) & \n    T_age <= 12 ~ 1, TRUE ~ 0))\n\n Combined <-  Combined %>% mutate(xcymhattach1 = case_when(validattach == 1 ~ \n                                               (case_when(iB33 == 2 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34a %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34b %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB34c %in% c(1,2) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iB35 == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1am %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1an %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ao %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ap %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1ar %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1at %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY1au %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                  case_when(iY7a == 1 ~ + 1, TRUE ~ 0))))\n\n Combined <-  Combined %>% mutate(xcymhattach2 = case_when(validattach == 1 ~ \n                                               (case_when(iP16a == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iP16b ==1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(iP16c == 1 ~ + 1, TRUE ~ 0))))\n \n  Combined <-  Combined %>% mutate(Attachment = case_when( \n   xcymhattach1 >= 1 & xcymhattach2 >= 1 ~ 1, \n   xcymhattach1 == 0 | xcymhattach2 == 0 ~ 0))\n\n  \n  ##################################################################\n  ##                         Caffeine Use                         ##\n  ##################################################################\n  \n Combined <-  Combined %>% mutate('Caffeine Use' = case_when(\n    iW10b %in% c(2,3) ~ 1, \n    iW10b < 2 ~ 0))\n\n  Combined$'Caffeine Use'[Combined$'Caffeine Use'== 1] <- \"Triggered\"\n  Combined$'Caffeine Use'[Combined$'Caffeine Use'== 0] <- \"Not Triggered\"\n\n\n  \n  #################################################################\n  ##                      Caregiver Distress                      ##\n  #################################################################\n\n   Combined <-  Combined %>% mutate(xcymhcaredist = case_when(iB32a | iB32b == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP19g == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iQ4 == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ap %in% c(2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY7a == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY8a == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY8b == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY9 == 1 ~ + 1, TRUE ~ 0))\n  \n Combined <- Combined %>% mutate('Caregiver Distress' = case_when(\n    xcymhcaredist >= 2 ~ 1, TRUE ~ 0))\n  \n Combined$'Caregiver Distress'[Combined$'Caregiver Distress'== 1] <- \"Triggered\"\n Combined$'Caregiver Distress'[Combined$'Caregiver Distress'== 0] <- \"Not Triggered\"\n \n #################################################################\n ##                        Communication    : cCYMHCOMM                    ##\n #################################################################\n \n \n  Combined <-  Combined %>% mutate('Communication' = case_when(\n   iD1 %in% c(2,3,4) | iD2 %in% c(2,3,4) ~ 1, \n   iD1 < 2 & iD2 < 2 ~ 0))\n \n Combined$'Caregiver Distress'[Combined$'Caregiver Distress'== 1] <- \"Triggered\"\n Combined$'Caregiver Distress'[Combined$'Caregiver Distress'== 0] <- \"Not Triggered\"\n \n #################################################################\n ##                    Control Interventions                    ##\n #################################################################\n \n  Combined <-  Combined %>% mutate(validctrlint = case_when(\n   iE1nnn %in% c(0,1,2,3,4) & \n     iM7 %in% c(0,1,2,3,4,5,6,7,8,9) & \n     iN6c %in% c(0,1,2,3,4,5) & \n     iX1a %in% c(0,1,2,3,4,5) & \n     iX2a %in% c(0,1,2,3,4,5) & \n     iX4 %in% c(0,1,2) & \n     iAA1a %in% c(0,1,2,3,4,5) & \n     iAA1c %in% c(0,1,2,3,4,5) & \n     iAA1f %in% c(0,1,2,3,4,5) &\n     sCYABS %in% c(0:12) & \n     sCYPSS %in% c(0:12) ~ 1, TRUE ~ 0))\n \n  Combined <-  Combined %>% mutate(xcymhctrlint1 = case_when(validctrlint == 1 ~ \n                                                 (case_when(iM7 %in% c(1,2,3,4,5,6,7,8,9) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iN6c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iAA1a %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iAA1c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iAA1f %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n \n  Combined <-  Combined %>% mutate(xcymhctrlint2 = case_when(validctrlint == 1 ~ \n                                                 (case_when(iE1nnn %in% c(2,3,4) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iX1a == 5 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iX2a == 5 ~ + 1, TRUE ~ 0) + \n                                                    case_when(iX4 == 2 ~ + 1, TRUE ~ 0) + \n                                                    case_when(sCYABS >= 5 ~ + 1, TRUE ~ 0) +\n                                                    case_when(sCYPSS >= 8 ~ + 1, TRUE ~ 0))))\n  \n  Combined <- Combined %>% mutate('Control Interventions'= case_when(validctrlint == 1 ~ \n                                                 (case_when(xcymhctrlint1 & xcymhctrlint2 >= 1 ~ 2, TRUE ~ 0) +\n                                                    case_when(xcymhctrlint1 >= 1 & xcymhctrlint2 == 0 ~ 1, TRUE ~ 0)))) \n  \n  Combined$'Control Interventions'[Combined$'Control Interventions'== 1] <- \"Triggered to minimize the need for control interventions (young persons not in a psychiatric emergency situation)\"\n  Combined$'Control Interventions'[Combined$'Control Interventions'== 0] <- \"Not Triggered\"\n  \n  ##################################################################\n  ##                    Criminality Prevention                    ##\n  ##################################################################\n  \n  \n   Combined <-  Combined %>%\n    mutate('Criminality Prevention' = case_when(\n    iE1dddd %in% c(1,2,3,4) | iE15a %in% c(2,3,4,5) | iX2a %in% c(2,3,4,5) ~ 1, \n    iE1dddd < 1 & iE15a < 2 & iX2a < 2 ~ 0))\n\n  Combined$'Criminality Prevention'[Combined$'Criminality Prevention'== 1] <- \"Triggered\"\n  Combined$'Criminality Prevention'[Combined$'Criminality Prevention'== 0] <- \"Not Triggered\"\n  \n  \n  #################################################################\n  ##                          Education: cCYMHEDU                         \n  #################################################################\n  \n   Combined <-  Combined %>% mutate(xiBB5a = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB5a), \n    iBB4c == 1 ~ 0))\n  \n   Combined <-  Combined %>% mutate(xiBB5b = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB5b), \n    iBB4c == 1 ~ 0))\n  \n   Combined <-  Combined %>% mutate(xiBB5e = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB5e), \n    iBB4c == 1 ~ 0))\n  \n   Combined <-  Combined %>% mutate(xiBB5f = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB5f), \n    iBB4c == 1 ~ 0))\n  \n   Combined <-  Combined %>% mutate(xiBB10 = case_when(\n    iBB4c %in% c(2,3) ~ as.numeric(iBB10), \n    iBB4c == 1 ~ 0))\n  \n   Combined <-  Combined %>% mutate(xiBB11a = case_when(\n    iBB4c %in% c(1,2,3) ~ as.numeric(iBB11a)))\n  \n   Combined <-  Combined %>% mutate(xiBB11b = case_when(\n    iBB4c %in% c(1,2,3) ~ as.numeric(iBB11b)))\n  \n   Combined <-  Combined %>% mutate(xiBB14a = case_when(\n    iBB4c %in% c(1,2,3) ~ as.numeric(iBB14a)))\n   \n    Combined <-  Combined %>% mutate(validedu = case_when(\n     iBB2 %in% c(0,1,2,3,8) &\n       xiBB5a %in% c(0,1,8) & \n       xiBB5b %in% c(0,1,8) & \n       xiBB5e %in% c(0,1,8) & \n       xiBB5f %in% c(0,1,8) &\n       xiBB10 %in% c(0,1,2,3) & \n       xiBB11a %in% c(0,1) & \n       xiBB11b %in% c(0,1) & \n       xiBB14a %in% c(0,1,2,3,8) ~ 1, TRUE ~ 0))\n   \n    Combined <-  Combined %>% mutate(xcymhedu1 = case_when(validedu == 1 ~ \n                                               (case_when(xiBB5a == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(xiBB5b == 1 ~ + 1, TRUE ~ 0) +\n                                                  case_when(xiBB5e == 1 ~ + 1, TRUE ~ 0) + \n                                                  case_when(xiBB5f == 1 ~ + 1, TRUE ~ 0) + \n                                                  case_when(xiBB10 %in% c(1,3) ~ + 1, TRUE ~ 0) +\n                                                  case_when(xiBB14a %in% c(2,3) ~ + 1, TRUE ~ 0))))\n   \n    Combined <-  Combined %>% mutate(xcymhedu2 = case_when(validedu == 1 ~ \n                                               (case_when(xiBB11a | xiBB11b == 1 ~ + 1, TRUE ~ 0) + \n                                                  case_when(iBB2 != 0 & iBB2 != 1 & iBB2 != 2 & iBB2 != 3 ~ + 1, TRUE ~ 0)))) \n   \n   \n     Combined <-  Combined %>% mutate(Education = case_when(validedu == 1 ~ case_when(\n      xcymhedu1 >= 1 ~ \"Triggered due to risk of dropping out of school\",  \n      xcymhedu1 == 0 ~ case_when(\n        xcymhedu2 == 2 ~ \"Triggered due to current disrupted education\", \n        xcymhedu2 < 2 ~ \"Not Triggered\"))))\n   \n##################################################################\n##                  Hazardous Fire Involvement                  ##\n##################################################################\n\n Combined <-  Combined %>% mutate(validfire = case_when(\n  iC1d %in% c(0,1,2,3,4,5) & \n    iE1oo %in% c(0,1,2,3,4) & \n    iE1mmm %in% c(0,1,2,3,4) & \n    iE1nnn %in% c(0,1,2,3,4) & \n    iE1ooo %in% c(0,1,2,3,4) & \n    iP15e %in% c(0,1,2,8) & \n    iX18 %in% c(0,1,2,3,4,5) & \n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) & \n    iY1ao %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\n Combined <- Combined %>% mutate(xcymhfire = case_when(validfire == 1 ~ case_when(\n  iC1d %in% c(3,4) ~ + 1, \n  iE1oo %in% c(2,3,4) ~ + 1,\n  iE1mmm %in% c(2,3,4) ~ + 1, \n  iE1nnn %in% c(2,3,4) ~ + 1, \n  iE1ooo %in% c(2,3,4) ~ + 1, \n  iP15e %in% c(2,8) ~ + 1, \n  iY1am %in% c(1,2,3,4,5) | iY1an %in% c(1,2,3,4,5) | \n    iY1ao %in% c(1,2,3,4,5) ~ + 1)))\n \n  Combined <-  Combined %>% mutate(`Hazardous Fire Involvement` = case_when(validfire == 1 ~ case_when(\n   iX18 %in% c(2,3,4,5) ~ case_when(\n     xcymhfire >= 2 ~ \"Triggered at high risk\", \n     xcymhfire == 1 ~ \"Triggered at moderate risk\", \n     xcymhfire == 0 ~ \"Triggered at low risk\"), \n   iX18 < 2 ~ \"Not Triggered\")))\n\n  ##################################################################\n  ##                           Gambling                           ##\n  ##################################################################\n  \n   Combined <-  Combined %>% mutate(validgamb = case_when(\n    iW8 %in% c(0,1) &\n      cihiU3 == 1 ~ 1, TRUE ~ 0))\n   \n  Combined <-  Combined %>% mutate(Gambling = case_when(validgamb == 1 ~ case_when(\n    iW8 == 1 ~ \"Triggered\", \n    iW8 < 1 ~ \"Not Triggered\")))\n  \n  ##################################################################\n  ##                        Harm to Others                        ##\n  ##################################################################\n  \n  Combined <- Combined %>% mutate(validharmoth = case_when(\n    iE1oo %in% c(0,1,2,3,4) & \n      sCYRHO %in% c(0,1,2,3,4,5,6) ~ 1, TRUE ~ 0))\n \n   Combined <- Combined %>% mutate('Harm to Others' = case_when(validharmoth == 1 ~ case_when(\n    sCYRHO %in% c(5,6) ~ 2, \n    sCYRHO %in% c(3,4) ~ case_when(\n      iE1oo %in% c(2,3,4) ~ 2, \n      iE1oo < 2 ~ 1),\n    sCYRHO <= 2 ~ 0)))\n   \n   Combined$'Harm to Others'[Combined$'Harm to Others' == 2] <- \"Triggered due to high risk of harm to others\"\n   Combined$'Harm to Others'[Combined$'Harm to Others' == 1] <- \"Triggered due to moderate risk of harm to others\"\n   Combined$'Harm to Others'[Combined$'Harm to Others' == 0] <- \"Not Triggered\"\n\n   \n   ##################################################################\n   ##                       Informal Support                       ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate(xcymhinfsupp =  case_when(iP18a %in% c(2,3) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP18b == 3 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP18c == 3 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP18d == 3 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP18e == 3 ~ + 1, TRUE ~ 0))\n   Combined <- Combined %>% mutate('Informal Support' = case_when(xcymhinfsupp >= 2 ~ 1, TRUE ~ 0) + \n                                                     case_when(xcymhinfsupp < 2 ~ 0, TRUE ~ 0))\n   \n   Combined$'Informal Support'[Combined$'Informal Support' == 1] <- \"Triggered\"\n   Combined$'Informal Support'[Combined$'Informal Support' == 0] <- \"Not Triggered\"\n\n   \n   ##################################################################\n   ##                    Interpersonal Conflict                    ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate(xiBB5e = (case_when(\n     iBB4c %in% c(0,1) ~ 0)+ \n       case_when(iBB4c %in% c(2,3) ~ as.numeric(iBB5e), TRUE ~ 0)))\n   \n   Combined <- Combined %>% mutate(validipcon = case_when(\n     iP19a %in% c(0,1,8) &\n       iP19b %in% c(0,1,8) &\n       iP19c %in% c(0,1,8) &\n       iP19d %in% c(0,1,8) &\n       iP19e %in% c(0,1,8) &\n       iP19f %in% c(0,1,8) &\n       xiBB5e %in% c(0,1,2,3) & \n       iBB5e %in% c(0,1,8) ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate(xcymhipcon = case_when(validipcon == 1 ~ \n                                                (case_when(iP19a | iP19d == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iP19b | iP19e | iP19f == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iP19c | xiBB5e == 1 ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate('Interpersonal Conflict' = case_when(validipcon == 1 ~ \n                                                (case_when(xcymhipcon >= 2 ~ 2, TRUE ~ 0) +\n                                                   case_when(xcymhipcon == 1 ~ 1, TRUE ~ 0) +\n                                                   case_when(xcymhipcon == 0 ~ 0, TRUE ~ 0))))\n   \n   Combined$'Interpersonal Conflict'[Combined$'Interpersonal Conflict' == 1] <- \"Triggered to reduce conflict within a specific domain\"\n   Combined$'Interpersonal Conflict'[Combined$'Interpersonal Conflict' == 0] <- \"Not Triggered\"\n   Combined$'Interpersonal Conflict'[Combined$'Interpersonal Conflict' == 2] <- \"Triggered to reduce widespread conflict\"\n   \n   #################################################################\n   ##                         Life Skills                         ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(xiBB5e = (case_when(\n     iBB4c %in% c(0,1) ~ 0)+ \n       case_when(iBB4c %in% c(2,3) ~ as.numeric(iBB5e), TRUE ~ 0)))\n   \n   Combined <- Combined %>% mutate(validipcon = case_when(\n     iP19a %in% c(0,1,8) &\n       iP19b %in% c(0,1,8) &\n       iP19c %in% c(0,1,8) &\n       iP19d %in% c(0,1,8) &\n       iP19e %in% c(0,1,8) &\n       iP19f %in% c(0,1,8) &\n       xiBB5e %in% c(0,1,2,3) & \n       iBB5e %in% c(0,1,8) ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate(xcymhipcon = case_when(validipcon == 1 ~ \n                                                (case_when(iP19a | iP19d == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iP19b | iP19e | iP19f == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iP19c | xiBB5e == 1 ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate('Life Skills' = case_when(validipcon == 1 ~ \n                                                (case_when(xcymhipcon >= 2 ~ 2, TRUE ~ 0) +\n                                                   case_when(xcymhipcon == 1 ~ 1, TRUE ~ 0) +\n                                                   case_when(xcymhipcon == 0 ~ 0, TRUE ~ 0))))\n   \n   Combined$'Life Skills'[Combined$'Life Skills' == 0] <- \"Not Triggered\"\n   Combined$'Life Skills'[Combined$'Life Skills' == 1] <- \"Triggered for IADL assistance\"\n   Combined$'Life Skills'[Combined$'Life Skills' == 2] <- \"Triggered for ADL assistance\"\n   \n   \n   ##################################################################\n   ##                     Medication Adherence                     ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate('Medication Adherence' = case_when(\n     iM3 == 2 | iM4 == 1 | iM12 == 0 ~ 1, \n     iM3 != 2 & iM4 != 1 & iM12 != 0 ~ 0))\n   \n   Combined$'Medication Adherence'[Combined$'Medication Adherence' == 1] <- \"Triggered\"\n   Combined$'Medication Adherence'[Combined$'Medication Adherence' == 0] <- \"Not Triggered\"\n\n   \n   #################################################################\n   ##                      Medication Review                      ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(xcymhmedrev = case_when(\n     iJ2c %in% c(2,3,4) ~ + 1, \n     iJ2k %in% c(2,3,4) | iJ2y %in% c(2,3,4) ~ + 1, \n     iJ2n %in% c(2,3,4) | iJ2x %in% c(2,3,4) ~ + 1, \n     iJ2dd %in% c(2,3,4) ~ + 1, \n     iJ2gg %in% c(2,3,4) ~ + 1, \n     iJ2ll %in% c(2,3,4) ~ + 1, \n     iJ3 %in% c(1,2,3) ~ + 1, \n     iJ9a == 1 | iJ9b == 1 | iJ9c == 1 | iJ9d == 1 | iJ9e == 1 | \n       iJ9f == 1 | iJ9g == 1 ~ + 1, \n     iR9 == 1 ~ + 1))\n   \n   Combined <- Combined %>% mutate('Medication Review' = case_when(\n     iM5 == 1 ~ 1, \n     iM5 != 1 ~ case_when(\n       iM3 %in% c(0,1) & xcymhmedrev >= 1 ~ 1, \n       iM3 != 0 | iM3 != 1 | xcymhmedrev == 0 ~ 0)))\n   \n   Combined$'Medication Review'[Combined$'Medication Review' == 1] <- \"Triggered\"\n   Combined$'Medication Review'[Combined$'Medication Review' == 0] <- \"Not Triggered\"\n\n   \n   ##################################################################\n   ##                          Parenting2                          ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate(xcymhparent = case_when(iP15a == 2 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iP15b == 2 ~ + 1, TRUE ~ 0) + \n                                                    case_when(iP15c == 2 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iP15d == 2 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iP15e == 2 ~ + 1, TRUE ~ 0) + \n                                                    case_when(iP15f == 2 ~ + 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate('Parenting2' = case_when(xcymhparent >= 2 ~ 1, TRUE ~ 0) +\n                                                    case_when(xcymhparent < 2 ~ 0, TRUE ~ 0))\n   Combined$'Parenting2'[Combined$'Parenting2' == 1] <- \"Triggered\"\n   Combined$'Parenting2'[Combined$'Parenting2' == 0] <- \"Not Triggered\"\n   \n   \n   #################################################################\n   ##                   Readmission (cCYMHREAD)                   ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(validread = case_when(\n     iB12 %in% c(0,1) & \n       iB33 %in% c(0,1,2) & \n       iB38a %in% c(0,1) & \n       iB38b %in% c(0,1) & \n       iE5 %in% c(0,1,2,3) & \n       iP19h %in% c(0,1,8) & \n       iV1 %in% c(0,1,2) & \n       sCYPSS >= 0 & sCYPSS <= 12 & \n       sCYRHO >= 0 & sCYPSS <= 6 & \n       sCYSOS >= 0 & sCYPSS <= 6 ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate(xcymhread1 = case_when(validread == 1 ~ \n                                                (case_when(iB12 == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iB33 == 2 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iB38a == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(iB38b == 1 ~ + 1, TRUE ~ 0) + \n                                                   case_when(iP19h == 1 ~ + 1, TRUE ~ 0) +\n                                                   case_when(sCYPSS >= 2 ~ + 1, TRUE ~ 0) +\n                                                   case_when(sCYRHO >= 3 ~ + 1, TRUE ~ 0) +\n                                                   case_when(sCYSOS >= 3 ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate(xcymhread2 = case_when(validread == 1 ~ \n                                                (case_when(iE5 %in% c(2,3) ~  1, TRUE ~ 0) +\n                                                   case_when(iV1 == 2 ~ 1, TRUE ~ 0) +\n                                                   case_when(iV1 == 1 ~ case_when(xcymhread1 >= 1 ~ 1, TRUE ~ 0), TRUE ~ 0)))) \n   \n   \n   Combined <- Combined %>% mutate(Readmission = case_when(validread == 1 ~ \n                                               (case_when(xcymhread2 >= 1 ~ 1, TRUE ~ 0) +\n                                                  case_when(xcymhread2 == 0 ~ 0, TRUE ~ 0))))\n   \n   Combined$Readmission[Combined$Readmission == 1] <- \"Triggered\"\n   Combined$Readmission[Combined$Readmission == 0] <- \"Not Triggered\"\n   \n   \n   ##################################################################\n   ##        Suicidality and Purposeful Self Harm: cCYMHSSH        ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate('Suicidality and Purposeful Self-Harm' = case_when(\n     sCYSOS %in% c(5,6) ~ 2, \n     sCYSOS %in% c(3,4) ~ case_when(\n       iE1oo >= 2 ~ 2, \n       iE1oo < 2 ~ 1),\n     sCYSOS < 3 ~ 0))\n   \n   Combined$'Suicidality and Purposeful Self-Harm'[Combined$'Suicidality and Purposeful Self-Harm' == 0] <- \"Not Triggered\"\n   Combined$'Suicidality and Purposeful Self-Harm'[Combined$'Suicidality and Purposeful Self-Harm' == 1] <- \"Triggered due to moderate risk of harm to self\"\n   Combined$'Suicidality and Purposeful Self-Harm'[Combined$'Suicidality and Purposeful Self-Harm' == 2] <- \"Triggered due to high risk of harm to self\" \n\n   \n   ##################################################################\n   ##                  Sexual Behaviour: cCYMHSEX                  ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate(validsex = case_when( \n     iE3o %in% c(0,1,2,3,4) & # inapprop. sexual behav.\n       iE19a %in% c(0,1) & # inapprop. sexual knowledge\n       iW27 %in% c(0,1) ~ 1, TRUE ~ 0)) # family concern about risky sexual beh\n   \n   #iJ10a and iX3 are from the Adolescent Supplement only. The CAP can be calculated without these.\n   \n   Combined <- Combined %>% mutate('Sexual Behaviour' = case_when(validsex == 1 ~ case_when(\n     (iE3o %in% c(2,3,4) | iE19a == 1 | iJ10a == 1 | iX3 == 1 | iW27 == 1) ~ 1, TRUE ~ 0)))\n \n   Combined$'Sexual Behaviour'[Combined$'Sexual Behaviour' == 1] <- \"Triggered\"\n   Combined$'Sexual Behaviour'[Combined$'Sexual Behaviour' == 0] <- \"Not Triggered\"\n   \n   \n   #################################################################\n   ##                      Sleep Disturbance                      ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(validsleep = case_when(\n     iE1lll %in% c(0,1,2,3,4) &\n       iE1yyy %in% c(0,1,2,3,4) & \n       iE1zzz %in% c(0,1,2,3,4) & \n       iE1aaaa %in% c(0,1,2,3,4) & \n       iE1bbbb %in% c(0,1,2,3,4) & \n       iJ4 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate(xcymhsleep = case_when(validsleep == 1 ~ \n                                                (case_when(iE1lll %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n                                                   case_when(iE1yyy %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n                                                   case_when(iE1zzz %in% c(2,3,4) ~ + 1, TRUE ~ 0) + \n                                                   case_when(iE1aaaa %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n                                                   case_when(iE1bbbb %in% c(2,3,4) ~ + 1, TRUE ~ 0) +\n                                                   case_when(iJ4 %in% c(1,2,3,4) ~ + 1, TRUE ~ 0))))\n  \n   Combined <- Combined %>% mutate('Sleep Disturbance' = case_when(validsleep == 1 ~ case_when(\n     xcymhsleep >= 2 ~ \"Triggered\", TRUE ~ \"Not Triggered\")))\n   \n   \n   ##################################################################\n   ##          Social and Peer Relationships: cCYMHSOCREL          ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate(validsocrel = case_when(\n     iE1qqq %in% c(0,1,2,4) & \n       iE1ttt %in% c(0,1,2,3,4) & \n       iE14d %in% c(0,1) & \n       iE15e %in% c(0,1,2,3,4,5) & \n       iF13 %in% c(0,1) & \n       iF15e %in% c(0,1) & \n       iF15f %in% c(0,1) & \n       iP8 %in% c(0,1) & \n       iY1aq %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate(xcymhsocrel1 = case_when(validsocrel == 1 ~ \n                                                  (case_when(iE1qqq %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1ttt %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE14d == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iF15e == 0 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iF15f == 0 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iP8 == 0 ~ + 1, TRUE ~ 0) + \n                                                     case_when(iY1aq %in% c(2,3,4,5) ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate(xcymhsocrel2 = case_when(validsocrel == 1 ~ \n                                                  (case_when(iE15e %in% c(2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iF13 == 1 ~ + 1, TRUE ~ 0)))) \n   \n   Combined <- Combined %>% mutate('Social and Peer Relationships' = case_when(validsocrel == 1 ~ \n                                                 (case_when(xcymhsocrel1 >= 2 ~ 2, TRUE ~ 0) +\n                                                    case_when(xcymhsocrel1 < 2 ~ \n                                                                (case_when(xcymhsocrel2 >= 1 ~ 1, TRUE ~ 0) +\n                                                                   case_when(xcymhsocrel2 == 0 ~ 0, TRUE ~ 0)), TRUE ~ 0))))\n \n   Combined$'Social and Peer Relationships'[Combined$'Social and Peer Relationships' == 0] <- \"Not Triggered\"\n   Combined$'Social and Peer Relationships'[Combined$'Social and Peer Relationships' == 1] <- \"Triggered to reduce maladaptive or antisocial peer interactions\"\n   Combined$'Social and Peer Relationships'[Combined$'Social and Peer Relationships' == 2] <- \"Triggered to reduce social withdrawal or isolation\"\n   \n   \n   #################################################################\n   ##                     Strengths: cCYMHSTR                     ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(validstr = case_when(\n     iC7 %in% c(0,1,2) & \n       iC9a %in% c(0,1,8) & \n       iF8b %in% c(0,1) & \n       iF15a %in% c(0,1) ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate(xcymhstr = case_when(validstr == 1 ~\n                                              (case_when(iC7 == 2 ~ + 1, TRUE ~ 0) +\n                                                 case_when(iC9a %in% c(1,8) ~ + 1, TRUE ~ 0) +\n                                                 case_when(iF8b == 0 ~ + 1, TRUE ~ 0) +\n                                                 case_when(iF15a == 0 ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate('Strengths' = case_when(validstr == 1 ~ \n                                              case_when(xcymhstr >= 3 ~ \"Triggered\", TRUE ~ \"NOt Triggered\")))\n   \n  \n   \n   ##################################################################\n   ##                  Substance Use:cCYMHSUBUSE                   ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate(validsubuse = case_when(\n     iM6 %in% c(0,1) & \n       iW2 %in% c(0,1,2,3,4) &\n       iW3a %in% c(0,1,2,3,4,5) &\n       iW3b %in% c(0,1,2,3,4,5) &\n       iW3c %in% c(0,1,2,3,4,5) &\n       iW3d %in% c(0,1,2,3,4,5) &\n       iW3e %in% c(0,1,2,3,4,5) &\n       iW3f %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate(xcymhsubuse = case_when(validsubuse == 1 ~ \n                                                 (case_when(iM6 == 1 ~ + 1, TRUE ~ 0) +\n                                                    case_when(iW2 %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iW3a %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iW3b %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                    case_when(iW3c %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iW3d %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iW3e %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) + \n                                                    case_when(iW3f %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate('Substance Use' = case_when(validsubuse == 1 ~ case_when(\n     xcymhsubuse >= 1 ~ \"Triggered\", TRUE ~ \"Not Triggered\")))\n   \n   \n   #################################################################\n   ##          Support Systems for Discharge: cCYMHSSDIS          ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(validssdis = case_when(\n     iA11b %in% c(1:15) & \n       iA12e %in% c(1:6) & \n       iR16d %in% c(0,1,2,8) & \n       iR16e %in% c(0,1,2,8) & \n       iY8a %in% c(0,1,8) ~ 1, TRUE ~ 0))\n   # iA11b replaced iA11j\n   \n   Combined <- Combined %>% mutate('Support Systems for Discharge' = case_when(validssdis == 1 ~ case_when(\n     iA11b %in% c(5,8) | iA12e %in% c(1,5) | iY8a == 1 | iR16d %in% c(0,2) | \n       iR16e %in% c(0,2) ~ \"Triggered\", TRUE ~ \"Not Triggered\")))\n   \n   \n   ##################################################################\n   ##             Tobacco and Nicotine Use: cCYMHTOBAC             ##\n   ##################################################################\n   Combined <- Combined %>% mutate(validtobac = case_when(\n     iW20a %in% c(0,1,2,3) & \n       iW20b %in% c(0,1,2,3) ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate('Tobacco and Nicotine Use' = case_when(validtobac == 1 ~ case_when(\n     iW20a == 3 | iW20b == 3 ~ \"Triggered to prevent long-term tobacco use\", \n     iW20a %in% c(1,2) | iW20b %in% c(1,2) ~ \"Triggered to reduce or cease daily tobacco use\", \n     iW20a == 0 & iW20b == 0 ~ \"Not Triggered\")))\n   \n   \n   #################################################################\n   ##                   Transitions: cCYMHTRANS                   ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(validtrans = case_when(\n     iZ12 %in% c(0,1) ~ 1, TRUE ~ 0))\n   Combined <- Combined %>% mutate('Transitions' = case_when(validtrans == 1 ~ case_when(\n     iZ12 == 1 ~ \"Triggered\", TRUE ~ \"Not Triggered\")))\n\n   \n   ##################################################################\n   ##              Traumatic Life Events: cCYMHTRAUMA              ##\n   ##################################################################\n   \n   Combined <- Combined %>% mutate(validtrauma = case_when(\n     iB34a %in% c(0,1,2,3) & \n       iB34b %in% c(0,1,2,3) & \n       iB34c %in% c(0,1,2,3) & \n       iE1ddd %in% c(0,1,2,3,4) & \n       iE1fff %in% c(0,1,2,3,4) & \n       iE1iii %in% c(0,1,2,3,4) & \n       iE1jjj %in% c(0,1,2,3,4) & \n       iE1kkk %in% c(0,1,2,3,4) & \n       iE1lll %in% c(0,1,2,3,4) & \n       iE1eeee %in% c(0,1,2,3,4) & \n       iY1aa %in% c(0,1,2,3,4,5) & \n       iY1aj %in% c(0,1,2,3,4,5) &\n       iY1ak %in% c(0,1,2,3,4,5) &\n       iY1al %in% c(0,1,2,3,4,5) &\n       iY1am %in% c(0,1,2,3,4,5) &\n       iY1an %in% c(0,1,2,3,4,5) &\n       iY1ao %in% c(0,1,2,3,4,5) &\n       iY1aq %in% c(0,1,2,3,4,5) &\n       iY1ar %in% c(0,1,2,3,4,5) &\n       iY1at %in% c(0,1,2,3,4,5) &\n       iY1au %in% c(0,1,2,3,4,5) &\n       iY1b %in% c(0,1,8) & \n       iY2a %in% c(0,1) & \n       iY2c %in% c(0,1) & \n       iY2d %in% c(0,1) ~ 1, TRUE ~ 0))\n   \n   Combined <- Combined %>% mutate(xcymhtrauma1 = case_when(validtrauma == 1 ~ \n                                                  (case_when(iY1aa %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aj %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ak %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1am %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1an %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ao %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aq %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ar %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1at %in% c(4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1au %in% c(4,5) ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate(xcymhtrauma2 = case_when(validtrauma == 1 ~ \n                                                  (case_when(iY2a == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY2c == 1 ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY2d == 1 ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate(xcymhtrauma3 = case_when(validtrauma == 1 ~ \n                                                  (case_when(iB34a | iB34b | iB34c %in% c(1,2,3) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aa %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aj %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ak %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1al %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1am %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1an %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ao %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1aq %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1ar %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1at %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iY1au %in% c(1,2,3,4,5) ~ + 1, TRUE ~ 0))))\n   \n   Combined <- Combined %>% mutate(xcymhtrauma4 = case_when(validtrauma == 1 ~ \n                                                  (case_when(iE1ddd %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1fff %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1iii %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1jjj %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1kkk %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1lll %in% c(1,2,3,4) ~ + 1, TRUE ~ 0) +\n                                                     case_when(iE1eeee %in% c(1,2,3,4) ~ + 1, TRUE ~ 0)))) \n   \n   Combined <- Combined %>% mutate('Traumatic Life Events' = case_when(validtrauma == 1 ~ case_when(\n     xcymhtrauma1 >= 1 | xcymhtrauma2 >= 1 ~\"Triggered to address immediate safety concerns\", \n     xcymhtrauma1 == 0 & xcymhtrauma2 == 0 ~ case_when(\n       xcymhtrauma3 >= 1 ~ case_when(\n         iY1b == 1 | xcymhtrauma4 >=2 ~ \"Triggered to reduce the impact of prior traumatic life events\", \n         iY1b < 1 & xcymhtrauma4 < 2 ~ \"Not Triggered\"),\n       xcymhtrauma3 == 0 ~ \"Not Triggered\"))))\n\n   \n   #################################################################\n   ##                    Video Gaming: cCYMHVG                    ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(validvg = case_when(\n     iW21 %in% c(0,1,2,3) ~ 1, TRUE ~ 0))\n   Combined <- Combined %>% mutate('Video Gaming' = case_when(validvg == 1 ~ case_when(\n     iW21 %in% c(2,3) ~ \"Triggered\", \n     iW21 < 2 ~ \"Not Triggered\")))\n   \n   #################################################################\n   ##                  Eating/Weight: cCYMHWTMGT                  ##\n   #################################################################\n   \n   Combined <- Combined %>% mutate(validwtmgt = case_when(\n     iK2i %in% c(0,1) & \n       iK2j %in% c(0,1) & \n       iK2k %in% c(0,1) & \n       iK8a %in% c(0,1) & \n       iK8b %in% c(0,1) & \n       iK8c %in% c(0,1) ~ 1, TRUE ~ 0))  \n   Combined <- Combined %>% mutate('Eating/Weight' = case_when(validwtmgt == 1 ~ case_when(\n     iK2k == 1 | iK2k == 1 | iK2i == 1 ~ \"Triggered for weight concerns\", \n     iK2j < 1 & iK2k < 1 & iK2i < 1 ~ case_when(\n       iK8a == 1 | iK8b ==1 | iK8c == 1 ~ \"Triggered due to problematic eating behaviour\", \n       iK8a < 1 & iK8b < 1 & iK8c < 1 ~ \"Not Triggered\"))))\n   \n  ##--------------\n##  EXT__scale  \n##--------------\n\nCombined <- Combined %>% mutate(validexts = case_when(\n  iE15a %in% c(0,1,2,3,4,5) &\n    iE15d %in% c(0,1,2,3,4,5) &\n    iE15e %in% c(0,1,2,3,4,5) &\n    iE1oo %in% c(0,1,2,3,4) &\n    iE3m %in% c(0,1,2,3,4) &\n    iE3r %in% c(0,1,2,3,4) &\n    iE3s %in% c(0,1,2,3,4) &\n    iE3t %in% c(0,1,2,3,4) &\n    iX16c %in% c(0,1,2,3,4,5) & \n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2b %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(EXT__scale = case_when(validexts == 1 ~ \n                                                         (case_when(iE15a == 0 ~ 0, iE15a %in% c(1,2,3,4,5) ~ 1)) + \n                                                         (case_when(iE15d == 0 ~ 0, iE15d %in% c(1,2,3,4,5) ~ 1)) + \n                                                         (case_when(iE15e == 0 ~ 0, iE15e %in% c(1,2,3,4,5) ~ 1)) + \n                                                         (case_when(iE1oo == 0 ~ 0, iE1oo %in% c(1,2,3,4) ~ 1)) + \n                                                         (case_when(iE3m == 0 ~ 0, iE3m %in% c(1,2,3,4) ~ 1)) +\n                                                         (case_when(iE3r == 0 ~ 0, iE3r %in% c(1,2,3,4) ~ 1)) +\n                                                         (case_when(iE3s == 0 ~ 0, iE3s %in% c(1,2,3,4) ~ 1)) +\n                                                         (case_when(iE3t == 0 ~ 0, iE3t %in% c(1,2,3,4) ~ 1)) +\n                                                         (case_when(iX16c == 0 ~ 0, iX16c %in% c(1,2,3,4,5) ~ 1)) +\n                                                         (case_when(iX2a == 0 ~ 0, iX2a %in% c(1,2,3,4,5) ~ 1)) +\n                                                         (case_when(iX2b == 0 ~ 0, iX2b %in% c(1,2,3,4,5) ~ 1)) +\n                                                         (case_when(iX2c == 0 ~ 0, iX2c %in% c(1,2,3,4,5) ~ 1))))\n\n##--------------\n##  INT__scale  \n##--------------\n\nCombined <- Combined %>% mutate(validints = case_when(\n  iE1eee %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) &\n    iE1fff %in% c(0,1,2,3,4) &\n    iE1kkk %in% c(0,1,2,3,4) &\n    iE1rrr %in% c(0,1,2,3,4) &\n    iE1sss %in% c(0,1,2,3,4) &\n    iE1ttt %in% c(0,1,2,3,4) &\n    iE1uu %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(INT__scale = case_when(validints == 1 ~ \n                                                         iE1eee + iE1eeee + iE1fff + iE1kkk +\n                                                         iE1rrr + iE1sss + iE1ttt +  iE1uu + iE1vv +\n                                                         iE1ww + iE1xx + iE1yy))\n\n##--------------\n##  ADL__scale  \n##--------------\n\nCombined <- Combined %>% mutate(validadl = case_when(\n  iG2a %in% c(0,1,2,3,4,5,6,8) & \n    iG2b %in% c(0,1,2,3,4,5,6,8) & \n    iG2c %in% c(0,1,2,3,4,5,6,8) &\n    iG2d %in% c(0,1,2,3,4,5,6,8) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(ADL__scale = case_when(validadl == 1 ~ \n                                         (case_when(iG2a == 0 ~ 0, iG2a %in% c(1,2,3,4,5) ~ 1, iG2a %in% c(6,8) ~ 2))+ \n                                         (case_when(iG2b == 0 ~ 0, iG2b %in% c(1,2,3,4,5) ~ 1, iG2b %in% c(6,8) ~ 2))+\n                                         (case_when(iG2c == 0 ~ 0, iG2c %in% c(1,2,3,4,5) ~ 1, iG2c %in% c(6,8) ~ 2))+\n                                         (case_when(iG2d == 0 ~ 0, iG2d %in% c(1,2,3,4,5) ~ 1, iG2d %in% c(6,8) ~ 2))))\n\n##--------------\n##  PEER__scale  \n##--------------\n\nCombined <- Combined %>% mutate(valideer = case_when(\n  iP19b %in% c(0,1,8) &\n    iP19e %in% c(0,1,8) &\n    iP19f %in% c(0,1,8) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(PEER__scale = case_when(valideer == 1 ~ \n                                                         (case_when(iP19b == 1 ~ + 1, TRUE ~ 0) +\n                                                            case_when(iP19f == 1 ~ + 1, TRUE ~ 0) +\n                                                            case_when(iP19e == 1 ~ + 1, TRUE ~ 0))))\n\n##--------------\n##  FAM__scale  \n##--------------\n\nCombined <- Combined %>% mutate(validily = case_when(\n  iF8a %in% c(0,1) &\n    iP19d %in% c(0,1,8) &\n    iP19h %in% c(0,1,8) &\n    iY7a %in% c(0,1) &\n    iY7b %in% c(0,1) &\n    iY8a %in% c(0,1,8) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(FAM__scale = case_when(validily == 1 ~ \n                                                         case_when(iP19d %in% c(0,1) & iP19h %in% c(0,1) & iY8a %in% c(0,1) ~\n                                                                     case_when(iF8a == 0 ~ (1 + iP19d + iP19h + iY7a + iY7b + iY8a), \n                                                                               iF8a == 1 ~ (iP19d + iP19h + iY7a + iY7b + iY8a)))))\n\n\n##--------------------\n##  STRENGTHS__scale  (Relational Strengths: sCYRelStren)\n##--------------------\n\nCombined <- Combined %>% mutate(validrelstren = case_when(\n  iP8 %in% c(0,1) & \n    iF15c %in% c(0,1) &\n    iF8a %in% c(0,1) &\n    iF15d %in% c(0,1) &\n    iF15e %in% c(0,1) &\n    iF15f %in% c(0,1) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(STRENGTHS__scale = case_when(validrelstren == 1 ~ \n                                                               (case_when(iP8 == 0 ~ 1, iP8 == 1 ~ 0)) +\n                                                               (case_when(iF15c == 0 ~ 1, iF15c == 1 ~ 0)) +\n                                                               (case_when(iF8a == 0 ~ 1, iF8a == 1 ~ 0)) +\n                                                               (case_when(iF15d == 0 ~ 1, iF15d == 1 ~ 0)) +\n                                                               (case_when(iF15e == 0 ~ 1, iF15e == 1 ~ 0)) +\n                                                               (case_when(iF15f == 0 ~ 1, iF15f == 1 ~ 0))))\n\n##----------------------\n##  SCHLDISRUPT__scale  \n##----------------------\n\nCombined <- Combined %>% mutate(validsdes = case_when(\n  iBB5a %in% c(0,1,8) & \n    iBB5b %in% c(0,1,8) & \n    iBB5e %in% c(0,1,8) & \n    iBB5f %in% c(0,1,8) & \n    iBB11a %in% c(0,1) & \n    iBB11b %in% c(0,1) & \n    iBB10 %in% c(0,1,2,3) & \n    iBB14a %in% c(0,1,2,3,8) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(SCHLDISRUPT__scale = case_when(validsdes == 1 ~ \n                                                                 (case_when(iBB5a == 1 ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB5b == 1 ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB5e == 1 ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB5f == 1 ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB10 %in% c(1,2,3) ~ + 1, TRUE ~ 0) +\n                                                                    case_when(iBB11a == 1 ~ + 1, TRUE ~ 0) + \n                                                                    case_when(iBB11b == 1 ~ + 1, TRUE ~ 0) + \n                                                                    case_when(iBB14a %in% c(2,3) ~ + 1, TRUE ~ 0))))\n\n\n##------------------\n##  SENSORY__scale  \n##------------------\n\nCombined <- Combined %>% mutate(validSensDiff = case_when( \n  iD28 %in% c(0,1,2,3,4) &\n    iD29 %in% c(0,1,2,3,4) &\n    iE3aa %in% c(0,1,2,3,4) &\n    oE3ab %in% c(0,1,2,3,4) & \n    oE3ac %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(SENSORY__scale = case_when(validSensDiff == 1 ~ \n                                                             iD28 + iD29 + iE3aa + oE3ab + oE3ac))\n\n##----------------\n##  INT-S__scale  \n##----------------\n\nCombined <- Combined %>% mutate('INT-S__scale' = iE1eee + iE1eeee + iE1fff + iE1kkk +\n                                       iE1rrr + iE1sss + iE1ttt + iE1vv +\n                                       iE1ww + iE1xx + iE1yy)\n\n##----------------\n##  EXT-S__scale  \n##----------------\n\nCombined <- Combined %>% mutate(validexts = case_when(\n  iE15a %in% c(0,1,2,3,4,5) &\n    iE15e %in% c(0,1,2,3,4,5) &\n    iE1oo %in% c(0,1,2,3,4) &\n    iE3l %in% c(0,1,2,3,4) &\n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2b %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate('EXT-S__scale' = case_when(validexts == 1 ~ \n                                                             (case_when(iE15a == 0 ~ 0, iE15a %in% c(1,2,3,4,5) ~ 1)) + \n                                                             (case_when(iE15e == 0 ~ 0, iE15e %in% c(1,2,3,4,5) ~ 1)) + \n                                                             (case_when(iE1oo == 0 ~ 0, iE1oo %in% c(1,2,3,4) ~ 1)) + \n                                                             (case_when(iE3l == 0 ~ 0, iE3m %in% c(1,2,3,4) ~ 1)) +\n                                                             (case_when(iX2a == 0 ~ 0, iX2a %in% c(1,2,3,4,5) ~ 1)) +\n                                                             (case_when(iX2b == 0 ~ 0, iX2b %in% c(1,2,3,4,5) ~ 1)) +\n                                                             (case_when(iX2c == 0 ~ 0, iX2c %in% c(1,2,3,4,5) ~ 1))))\n\n##----------------\n##  AUT__scale  \n##----------------\n\nCombined <- Combined %>% mutate(validssc = case_when(iC7 %in% c(0,1,2) &\n                                                       iE3aa %in% c(0,1,2,3,4) &\n                                                       iE14a %in% c(0,1) &  \n                                                       iE14b %in% c(0,1) &                    \n                                                       iE14c %in% c(0,1) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(AUT__scale = case_when(validssc == 1 ~ \n                                                    (case_when(iE14a == 1 ~ 1, TRUE ~ 0)) + \n                                                    (case_when(iE14b == 1 ~ 1, TRUE ~ 0)) + \n                                                    (case_when(iE14c == 1 ~ 1, TRUE ~ 0)) + \n                                                    (case_when(iE3aa %in% c(1,2,3,4) ~ 1, TRUE ~ 0)) + \n                                                    (case_when(iC7== 2 ~ 1, TRUE ~ 0))))\n\n##----------------\n## COG__scale  \n##----------------\n\nCombined <- Combined %>% mutate(validcognitive = case_when(\n  iC1d %in% c(0,1,2,3,4,5) &\n    iC2a %in% c(0,10) &\n    iC2b %in% c(0,1) & \n    iD1 %in% c(0,1,2,3,4) & \n    iD2 %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(COG__scale = case_when(validcognitive == 1 ~ \n                                                                (case_when(iC1d == 0 ~ 0, iC1d %in% c(1,2,3,4,5) ~ 1)) +\n                                                                (case_when(iC2a == 0 ~ 0, iC2a == 1 ~ 1)) +\n                                                                (case_when(iC2b == 0 ~ 0, iC2b == 1 ~ 1)) +\n                                                                (case_when(iD1 == 0 ~ 0, iD1 %in% c(1,2,3,4) ~ 1)) +\n                                                                (case_when(iD2 == 0 ~ 0, iD2 %in% c(1,2,3,4) ~ 1))))\n\n##----------------\n##  MANIA__scale  \n##----------------\n\nCombined <- Combined %>% mutate(validmania_old = case_when(\n  iE1bbb %in% c(0,1,2,3,4) &\n    iE1zz %in% c(0,1,2,3,4) &\n    iE1llll %in% c(0,1,2,3,4) &\n    iE1ccc %in% c(0,1,2,3,4) &\n    iE1aaa %in% c(0,1,2,3,4) &\n    iE6 %in% c(0,1,2,3,4,5) ~ 1, TRUE ~ 0))\n\nCombined <-Combined %>% mutate(MANIA__scale = case_when(validmania_old == 1 ~ case_when\n                                                        (iE6 == 0 ~  0, \n                                                          iE6 == 1 ~  1, \n                                                          iE6 == 2 ~  1, \n                                                          iE6 == 3 ~  1, \n                                                          iE6 == 4 ~  1,\n                                                          iE6 == 5 ~  2) + iE1bbb + iE1zz\n                                                        + iE1lll + iE1ccc + iE1aaa))\n\n##----------------\n##  SLEEP__scale  \n##----------------\n\nCombined <- Combined %>% mutate(valideep = case_when(\n  iE1yyy %in% c(0,1,2,3,4) &\n    iE1zzz %in% c(0,1,2,3,4)&\n    iE1aaaa %in% c(0,1,2,3,4)&\n    iE1bbbb %in% c(0,1,2,3,4) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(SLEEP__scale = case_when(valideep == 1 ~ (iE1yyy +iE1zzz +iE1aaaa +\n                                                                          iE1bbbb)))\n\n##-------------------------\n##  Psychiatric Diagnosis  \n##-------------------------\n\nCombined <- Combined %>% \n  mutate(`Psychiatric Diagnoses` = case_when(\n    is.na(iCC10b) & is.na(iCC1d) ~ NA,\n    !is.na(iCC10b) & rowSums(across(iCC10b:iCC10u, ~ . %in% c(2, 3, 4))) >= 1 ~ 1,\n    !is.na(iCC1d) & rowSums(across(iCC1d:iCC1u, ~ . %in% c(1, 2, 3, 4))) >= 1 ~ 1,\n    TRUE ~ 0\n  ))\n\n\n##---------------------\n##  Medical Diagnosis    #### DOUBLE CCHECK THIS\n##---------------------\n\nCombined <- Combined %>%\n  mutate(`Medical Diagnoses` = case_when(\n    Tool != \"rscr\" & !is.na(iI1aa) & rowSums(across(iI1aa:iI1z)) >= 1 ~ 1,\n    !is.na(iA48) ~ iA48,\n    TRUE ~ 0\n  ))\n\n##----------\n##  ID/GGD  \n##----------\n\nCombined <- Combined %>%\n  mutate('ID/GDD' = if_else(\n    Tool != \"rscr\" & (\n      iCC10b %in% c(1, 2, 3, 4) |\n        iCC10r %in% c(1, 2, 3, 4) |\n        iCC1r %in% c(1, 2, 3, 4) |\n        iCC9 %in% c(5, 6)\n    ), 1, 0),\n    if_else(\n      is.na(iA47),\n      if_else(\n        iA48 == 1, 1,\n        if_else(iA48 == 0, 0, iA48)\n      ),\n      if_else(iA47 == 1, 1,\n              if_else(iA47 == 0, 0, iA47)\n      )))\n\n##----------------------\n##  Residential Issues  \n##----------------------\n\nCombined$'Residential Issues' <- ifelse(\n  (Combined$iB12 == 1 | Combined$iB38c == 1 | Combined$iB38a == 1 | Combined$iB38b == 1 | Combined$iE5 %in% c(1,2,3) | (Combined$iA11b != 1 & !is.na(Combined$iA11b) & Combined$iA11b != 99)),\n  1,\n  ifelse(\n    (!is.na(Combined$iB12) & Combined$iB12 != 99) | (!is.na(Combined$iB38c) & Combined$iB38c != 99) | (!is.na(Combined$iB38a) & Combined$iB38a != 99) | (!is.na(Combined$iB38b) & Combined$iB38b != 99) | (!is.na(Combined$iE5) & Combined$iE5 != 99) | (!is.na(Combined$iA11b) & Combined$iA11b != 99),\n    0,\n    NA)\n)\n\n##---------\n##  xsdsi  \n##---------\n\nCombined <- Combined %>% mutate(xsdsi =\n                                  iE1ss + iE1tt + iE1vv + iE1ww + iE1xx + iE1yy + \n                                  iE1aaa + iE1rrr + iE1ttt)\n##---------\n##  xsSOS  \n##---------\n\nCombined <- Combined %>% mutate(xsSOS =  case_when(\n  iX1c == 5 ~ case_when(iX1b == 1 ~ 6, iX1b %in% c(0,8) ~ case_when(\n    iX1e == 1 ~ 6, iX1e == 0 ~ case_when(xsdsi >= 9 ~ 5, xsdsi < 9 ~ case_when(\n      iX1d == 1 ~ 4, iX1d == 0 ~ case_when(iE1nnn %in% c(1,2,3,4) ~ 5, \n                                           iE1nnn == 0 ~ 3))))),\n  iX1c %in% c(3,4) ~ case_when(iX1b == 1 ~ 4, iX1b %in% c(0,8) ~ 3),\n  \n  iX1c %in% c(1,2) ~ case_when(iX1b == 1 ~ case_when(xsdsi >= 6 ~ 4,\n                                                     xsdsi < 6 ~ case_when(\n                                                       iX1d == 1 ~ case_when(\n                                                         iE1nnn %in% c(1,2,3,4) ~ 5,\n                                                         iE1nnn == 0 ~ 3), \n                                                       iX1d == 0 ~ case_when(\n                                                         iE1nnn %in% c(1,2,3,4) ~ 4,\n                                                         iE1nnn == 0 ~ 3))),\n                               iX1b %in% c(0,8) ~ case_when(iE1nnn %in% \n                                                              c(1,2,3,4) ~ 3,\n                                                            iE1nnn == 0 ~ \n                                                              case_when(\n                                                                iX1d == 1 ~ 2,\n                                                                iX1d == 0 ~ 1))),\n  iX1c == 0 ~ 0))\n\n##-------------------------\n##  Valid RICHY variables  \n##-------------------------\n\nCombined <- Combined %>% mutate(validrichy = case_when(\n  iE1yyy %in% c(0,1,2,3,4) & \n    iE3q %in% c(0,1,2,3,4) & \n    iE15e %in% c(0,1,2,3,4,5) &\n    iJ2k %in% c(0,1,2,3,4) & \n    iJ2y %in% c(0,1,2,3,4) & \n    iJ2dd %in% c(0,1,2,3,4) & \n    iJ2gg %in% c(0,1,2,3,4) & \n    iJ2ll %in% c(0,1,2,3,4) &\n    iJ3 %in% c(0,1,2,3) & \n    iJ9a %in% c(0,1) & \n    iJ9b %in% c(0,1) & \n    iJ9c %in% c(0,1) & \n    iJ9d %in% c(0,1) & \n    iJ9e %in% c(0,1) & \n    iJ9f %in% c(0,1) & \n    iJ9g %in% c(0,1) & \n    iP15a %in% c(0,1,2,8) &\n    iP15b %in% c(0,1,2,8) &\n    iP15c %in% c(0,1,2,8) &\n    iP15d %in% c(0,1,2,8) &\n    iP15e %in% c(0,1,2,8) &\n    iP15f %in% c(0,1,2,8) &\n    iP19b %in% c(0,1,8) &\n    iP19e %in% c(0,1,8) &\n    iX2b %in% c(0,1,2,3,4,5) &\n    iX16c %in% c(0,1,2,3,4,5) &\n    iY1al %in% c(0,1,2,3,4,5) &\n    iY1am %in% c(0,1,2,3,4,5) & \n    iY1an %in% c(0,1,2,3,4,5) &\n    iY1aq %in% c(0,1,2,3,4,5) &\n    iY1ao %in% c(0,1,2,3,4,5) &\n    iY1au %in% c(0,1,2,3,4,5) &\n    iE1eee %in% c(0,1,2,3,4) & \n    iE1fff %in% c(0,1,2,3,4) & \n    iE1ggg %in% c(0,1,2,3,4) & \n    iE1hhh %in% c(0,1,2,3,4) & \n    iE1iii %in% c(0,1,2,3,4) & \n    iE1kkk %in% c(0,1,2,3,4) & \n    iE1lll %in% c(0,1,2,3,4) & \n    iE1eeee %in% c(0,1,2,3,4) & \n    iF8a %in% c(0,1) &\n    iP19d %in% c(0,1,8) &\n    iP19h %in% c(0,1,8) & ## identical to this point\n    iY7a %in% c(0,1) &\n    iY7b %in% c(0,1) &\n    iY8a %in% c(0,1,8) & \n    iE1oo %in% c(0,1,2,3,4) &\n    iE1nnn %in% c(0,1,2,3,4) & \n    iX1b %in% c(0,1,8) & \n    iX1c %in% c(0,1,2,3,4,5) & \n    iX1d %in% c(0,1) &\n    iX1e %in% c(0,1) & \n    iE1ss %in% c(0,1,2,3,4) & \n    iE1tt %in% c(0,1,2,3,4) &\n    iE1vv %in% c(0,1,2,3,4) &\n    iE1ww %in% c(0,1,2,3,4) &\n    iE1xx %in% c(0,1,2,3,4) &\n    iE1yy %in% c(0,1,2,3,4) &\n    iE1aaa %in% c(0,1,2,3,4) &\n    iE1rrr %in% c(0,1,2,3,4) &\n    iE1ttt %in% c(0,1,2,3,4) &\n    iX2a %in% c(0,1,2,3,4,5) & \n    iX2c %in% c(0,1,2,3,4,5) &\n    Age >= 0 & Age <= 130 &\n    PARENTING__scale %in% c(0:12) ~ 1, TRUE ~ 0))\n\nCombined <- Combined %>% mutate(validSSH = case_when(\n  iE1oo %in% c(0,1,2,3,4) & \n    xsSOS %in% c(0,1,2,3,4,5,6) ~ 1, TRUE ~ 0))\n\n##-----------\n##  xparent  ## added ip15e and iP15f (as per SAS)\n##-----------\n\nCombined <- Combined %>% mutate(xparent = case_when(\n  iP15a == 8 | iP15b == 8 | iP15c == 8 | iP15d == 8 | iP15e == 8 | iP15f ==8 ~ 1, TRUE ~ 0)) ## CHECK THIS!!!!!!!!!!!!!!!!!!!\n\n##----------\n##  xabuse  \n##----------\n\nCombined <- Combined %>% mutate(xabuse = case_when(\n  iY1al %in% c(1,2,3,4,5) ~ + 1, iY1am %in% c(1,2,3,4,5) ~ + 1, \n  iY1an %in% c(1,2,3,4,5) ~ + 1, iY1aq %in% c(1,2,3,4,5) ~ + 1, \n  iY1ao %in% c(1,2,3,4,5) ~ + 1, iY1au %in% c(1,2,3,4,5) ~ + 1))\n\n##-----------\n##  xmedsym  \n##-----------\n\nCombined <- Combined %>% mutate(xmedsym = case_when(\n  iJ2k %in% c(1,2,3,4) ~ + 1, iJ2y %in% c(1,2,3,4) ~ + 1, \n  iJ2dd %in% c(1,2,3,4) ~ + 1, iJ2gg %in% c(1,2,3,4) ~ + 1, \n  iJ2ll %in% c(1,2,3,4) ~ + 1, iJ3 %in% c(1,2,3) ~ + 1, iJ9a == 1 ~ + 1,\n  iJ9b == 1 ~ + 1, iJ9c == 1 ~ + 1, iJ9d == 1 ~ + 1, iJ9e == 1 ~ + 1, \n  iJ9f == 1 ~ + 1, iJ9g == 1 ~ + 1))\n\n##-----------\n##  xsANXIETY  \n##-----------\n\nCombined <- Combined %>% mutate(xsANXIETY =  \n                      iE1eee + iE1fff + iE1ggg + iE1hhh + iE1iii + iE1kkk + iE1lll + iE1eeee)\n\n##------------\n##  xsFAMILY  \n##------------\n\nCombined <- Combined %>% mutate(xsFAMILY = case_when(\n  iP18d != 8 & iP19h !=8 & iY8a != 8 ~ case_when(\n    iF8a == 0 ~ 1 + iP19d + iP19h + iY7a + iY7b + iY8a,\n    iF8a == 1 ~ iP19d + iP19h + iY7a + iY7b + iY8a)))\n\n\n##---------\n##  ssSOSval  \n##---------\n\nCombined$ssSOSval <- ifelse(\n  Combined$iX1c %in% c(0, 1, 2, 3, 4, 5, 8) &\n    Combined$iX1e %in% c(0, 1, 2, 3, 4, 5, 8) &\n    Combined$xsdsi %in% 0:36 &\n    Combined$iX1d %in% c(0, 1, 2, 3, 4, 5, 8) &\n    Combined$iE1nnn %in% c(0, 1, 2, 3, 4, 5, 8) &\n    Combined$iX1b %in% c(0, 1, 2, 3, 4, 5, 8),\n  1, 0\n)\n\n\n##---------\n##  xcSSH  \n##---------\n\nCombined <- Combined %>% mutate(xcSSH = case_when(\n  xsSOS %in% c(5,6) ~ 2, xsSOS %in% c(3,4) ~ case_when(\n    iE1oo >= 2 ~ 2, iE1oo < 2 ~ 1), xsSOS < 3 ~ 0))\n\n\n##---------\n##  sRHOval  \n##---------\n\nCombined$sRHOval <- ifelse(\n  Combined$iX2a %in% c(0,1,2,3,4,5) &\n    Combined$iX2c %in% c(0,1,2,3,4,5) &\n    Combined$iX2b %in% c(0,1,2,3,4,5) &\n    Combined$iX16c %in% c(0,1,2,3,4,5) &\n    Combined$iE1mmm %in% c(0,1,2,3,4,5) &\n    Combined$iE1nnn %in% c(0,1,2,3,4,5) &\n    Combined$iE1ooo %in% c(0,1,2,3,4,5) &\n    Combined$iE1ppp %in% c(0,1,2,3,4,5),\n  1, 0)\n\n#################################################\n# xsRHO \n#################################################\n\nCombined <- Combined %>% mutate(xsRHO = case_when(\n  iX2a %in% c(4,5) ~ 6, iX2a %in% c(2,3) ~ case_when( \n    iX2c %in% c(4,5) | iX2b %in% c(4,5) | iX16c %in% c(4,5) ~ 6, iE1mmm %in%\n      c(2,3,4) | iE1nnn %in% c(2,3,4) | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n      c(2,3,4) ~ 5, TRUE ~ 4),\n  iX2a %in% c(0,1) ~ case_when(iX2c %in% c(4,5) | iX2b %in% c(4,5) | \n                                 iX16c %in% c(4,5) ~ case_when(\n                                   iE1mmm %in% c(2,3,4) | iE1nnn %in% c(2,3,4) \n                                   | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n                                     c(2,3,4) ~ 3, TRUE ~ 2), TRUE ~\n                                 case_when(\n                                   iE1mmm %in% c(2,3,4) | iE1nnn %in% c(2,3,4) \n                                   | iE1ooo %in% c(2,3,4) | iE1ppp %in% \n                                     c(2,3,4) ~ 1, TRUE ~ 0))))\n\n#########################################################\n# xcHARMOTH\n#################################################\n\nCombined <- Combined %>% mutate(xcHARMOTH = case_when(\n  xsRHO %in% c(5,6) ~ 2, xsRHO %in% c(3,4) ~ case_when(\n    iE1oo %in% c(2,3,4) ~ 2, iE1oo < 2 ~ 1), xsRHO < 2 ~ 0))\n\n#########################################################\n# RICHY__scale Calculation * NEW\n#################################################\n\nCombined <- Combined %>% mutate(RIChY_scale = case_when(\n  Age <= 7 ~ case_when(\n    iX2b %in% c(3,4,5) ~ 3, iX2b %in% c(0,1,2) ~ case_when(\n      iE3q %in% c(2,3,4) ~ 1, iE3q %in% c(0,1) ~ 0)),\n  \n  Age %in% c(8,9,10,11) ~ case_when(\n    iP19b == 8 | iP19e == 8 ~ case_when(\n      xsANXIETY >= 7 ~ 5, xsANXIETY %in% c(0,1,2,3,4,5,6) ~ 3),\n    iP19b != 8 & iP19e != 8 ~ case_when(\n      iE15e %in% c(2,3,4,5) | iP19b == 1 ~ case_when(\n        PARENTING__scale >= 3 | xparent == 1 ~ 4, \n        PARENTING__scale %in% c(0,1,2) ~ case_when(\n          iE1yyy %in% c(2,3,4) ~ 3, iE1yyy %in% c(0,1) ~ 2)), ## FOUND ERROR should iE1yyy %in% c(2, 3, 4) ~ 3???\n      iE15e %in% c(0,1) & iP19b %in% c(0, 8) ~ case_when( # 0 or 8\n        xsFAMILY >= 3 | iY8a == 8 ~ 3, xsFAMILY %in% c(0,1,2) ~ case_when(\n          xabuse >= 1 | xmedsym >= 1 ~ 1, xabuse == 0 & xmedsym == 0 ~ 0)))), \n    Age >= 12 ~ case_when(\n    iE15e %in% c(2,3,4,5) | iP19b == 1 ~ case_when(\n      xsANXIETY >= 10 ~ 3, xsANXIETY <= 9 ~ 5), \n    iE15e %in% c(0,1) & iP19b %in% c(0,8) ~ case_when( ## this one too\n      xcSSH %in% c(1,2) ~ 4, xcSSH == 0 ~ case_when(\n        xcHARMOTH %in% c(1,2) ~ 4, xcHARMOTH == 0 ~ case_when(\n          xsFAMILY >= 1 | iY8a == 8 ~ case_when(\n            xparent == 1 ~ 3, xparent == 0 ~ 2), xsFAMILY == 0 ~ 0))))))    \n\n\n# test <- Combined %>% select(EMHID, validrichy, Age, iX2b, iE3q, iP19b, iP19e, xsANXIETY, iP19b, iP19e, iE15e, iP19b, PARENTING__scale, xparent, iE1yyy, xsFAMILY, iY8a, xabuse, xmedsym, xcSSH, xcHARMOTH, RIChY_scale, RIChY_scale2)\n\n#########################################################\n# ALEIC__scale\n#################################################\n\nCombined <- Combined %>% \n    mutate(ALEIC__scale = rowSums(\n    data.frame(\n      PhysAbuse = ifelse(iY1an %in% c(1,2,3,4,5), 1, 0),\n      EmoAbuse = ifelse(iP19d == 1 | iY1ao %in% c(1, 2, 3, 4, 5), 1, 0),\n      SexAbuse = ifelse(iY1am %in% c(1,2,3,4,5), 1, 0),\n      WitnessViolence = ifelse(iP19g == 1 | iY1au %in% c(1, 2, 3, 4, 5), 1, 0),\n      PhysNeglect = ifelse(iB34b %in% c(1,2,3) | iB34c%in% c(1,2,3) | iQ5a ==1 | iQ5b ==1, 1, 0),\n      EmoNeglect = ifelse(iB34a %in% c(1, 2, 3), 1, 0),\n      Neglect = ifelse(iY1at %in% c(1, 2, 3, 4, 5) | iY9 ==1 | iY8a %in% c(1, 2, 3, 4, 5), 1, 0),\n      Parental = ifelse(iY1ap %in% c(1, 2, 3, 4, 5)| iY7a ==1, 1, 0),\n      Placement = ifelse(iB35 ==1 | iB12 ==1, 1, 0),\n      Bullying = ifelse(iY1aq %in% c(1, 2, 3, 4, 5), 1, 0),\n      MHStressors = ifelse(iY7b ==1| iBB11b ==1, 1, 0),\n      DeathLoss = ifelse(iY1ac %in% c(1, 2, 3, 4, 5)| iY1ar %in% c(1, 2, 3, 4, 5), 1, 0),\n      Accident = ifelse(iY1aa %in% c(1, 2, 3, 4, 5), 1, 0),\n      Disaster = ifelse(iY1ak %in% c(1,2,3,4,5)| iY1al %in% c(1,2,3,4,5), 1, 0),\n      WarZone = ifelse(iY1aj %in% c(1,2,3,4,5), 1, 0),\n      Migration = ifelse(iY1ai %in% c(1,2,3,4,5), 1, 0)\n    ), na.rm=TRUE))\n\n#########################################################\n# TSS__scale\n#################################################\n\nCombined <- Combined %>% \n  mutate(TSS__scale = case_when(\n    is.na(ALEIC__scale) ~ NA,\n    TRUE ~ (ifelse(iE1pp %in% 1:5, 1, 0) +\n              ifelse(iE1ss %in% 1:5, 1, 0) +\n              ifelse(iE1vv %in% 1:5, 1, 0) +\n              ifelse(iE1ww %in% 1:5, 1, 0) +\n              ifelse(iE1xx %in% 1:5, 1, 0) +\n              ifelse(iE1yy %in% 1:5, 1, 0) +\n              ifelse(iE1aaa %in% 1:5, 1, 0) +\n              ifelse(iE1iii %in% 1:5, 1, 0) +\n              ifelse(iE1jjj %in% 1:5, 1, 0) +\n              ifelse(iE1kkk %in% 1:5, 1, 0) +\n              ifelse(iE1lll %in% 1:5, 1, 0) +\n              ifelse(iE1eeee %in% 1:5, 1, 0) +\n              ifelse(iE1qqq %in% 1:5, 1, 0) +\n              ifelse(iE1sss %in% 1:5, 1, 0) +\n              ifelse(iE1ttt %in% 1:5, 1, 0) +\n              ifelse(iE1yyy %in% 1:5, 1, 0) +\n              ifelse(iE1zzz %in% 1:5, 1, 0) +\n              ifelse(iB10a %in% c(0, 8), 0, ifelse(iB10a == 1, 1, 0)) +\n              ifelse(iY1b %in% c(0, 8), 0, ifelse(iY1b == 1, 1, 0)))))\n\n\n############################################################################\n############################################################################\n###                                                                      ###\n###                  SELECT COLUMNS FOR INTERRAI BI CSV                  ###\n###                                                                      ###\n############################################################################\n############################################################################\n# goals met, sex, etc. have changed names\n# discharge_a to discharge_d have changed to oGoal1:oGoal4\n# PAIN__scale temporarily removed\n\ninterRAI <- Combined %>%\n select(\"iA3\", \"client_id\", \"iA2\", \"ref\", \"compl\", \"survey_type\", \"program_name\", \"instrument\", \"oV5\", \"oGoal1\", \"oGoal2\", \"oGoal3\", \"oGoal4\", \"iA5a\", \"record_id\", \"client_id\", \"worker_id\", \"program_id\", \"cihiA2a\", \"cihiA2c\", \"iA2\", \"Tool\", \"Type\", \"EMHID\", \"Age\", \"FirstChYMH\", \"FirstAx\", \"FirstScreener\", \"LastAx\", \"LastChYMH\", \"LastScreener\", \"DSI__scale\", \"ANX__scale\", \"CHAMHPS__scale\", \"DABS__scale\", \"SOCDIS__scale\", \"DISTRACT__scale\", \"KinarkRiskHTO_comb\", \"KinarkRiskHTS_comb\", \"KinarkRiskHTP_comb\", \"KinarkRiskSM_comb\", \"KinarkRiskVCP_comb\", \"KinarkRiskFB_comb\", \"KinarkRiskOC_comb\", \"Acute\", \"Complex\", \"KinarkRiskHTO_cat\", \"KinarkRiskHTS_cat\", \"KinarkRiskHTP_cat\", \"KinarkRiskSM_cat\", \"KinarkRiskVCP_cat\", \"KinarkRiskFB_cat\", \"KinarkRiskOC_cat\", \"Acute_cat\", \"Complex_cat\", \"ED_Screen\", \"ID_Screen\", \"ComorbidMedical_Screen\", \"PSS__scale\", \"Trauma\", \"RISSK__scale\", \"RIO__scale\", \"SOS__scale\", \"RHO__scale\", \"IADLC__scale\", \"CAREDIS__scale\", \"PARENTING__scale\", \"COMM__scale\", \"CAS\", \"Psychiatrist\", \"FamilyEngaged\", \"Physical Activity\", \"Attachment\", \"Caffeine Use\", \"Caregiver Distress\", \"Communication\", \"Control Interventions\", \"Criminality Prevention\", \"Education\", \"Hazardous Fire Involvement\", \"Gambling\", \"Harm to Others\", \"Informal Support\", \"Interpersonal Conflict\", \"Life Skills\", \"Medication Adherence\", \"Medication Review\", \"Parenting2\", \"Readmission\", \"Suicidality and Purposeful Self-Harm\", \"Sexual Behaviour\", \"Sleep Disturbance\", \"Social and Peer Relationships\", \"Strengths\", \"Substance Use\", \"Support Systems for Discharge\", \"Tobacco and Nicotine Use\", \"Transitions\", \"Traumatic Life Events\", \"Video Gaming\", \"Eating/Weight\", \"ABS__scale\", \"EXT__scale\", \"INT__scale\", \"ADL__scale\", \"PEER__scale\", \"FAM__scale\", \"STRENGTHS__scale\", \"SCHLDISRUPT__scale\", \"SENSORY__scale\", \"INT-S__scale\", \"EXT-S__scale\", \"AUT__scale\", \"COG__scale\", \"MANIA__scale\", \"SLEEP__scale\", \"Psychiatric Diagnoses\", \"Medical Diagnoses\", \"ID/GDD\", \"Residential Issues\", \"RIChY_scale\", \"ALEIC__scale\", \"TSS__scale\")\n\nrm(ChYMH_export, DetailedHistory_export, ID_Lookup, interRAI_ideasWeb, Table1, Table4, df_list, Combined) # Remove unnecessary columns\n\n# save(list = ls(all.names = TRUE), file= \"all.rda\")\n# ## restore the saved values to the current environment\n# local({\n#   load(\"all.rda\")\n#  # ls()\n# })\n\n#write.csv(interRAI, \"InterRAI_b.csv\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}